@*
 * Copyright 2018 Dept. Protein Evolution, Max Planck Institute for Developmental Biology
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import de.proteinevolution.results.results.HHrepID
@(jobID: String, filePath: String)()

@if(HHrepID.existsResult(filePath)) {
    <div class="colorOptsAlignment">
        <a class="forwardModalOpenBtn" data-modal-type="hhsuite">Forward Query A3M</a>
        <hr class="horizontal-line">
    </div>
    <div class="note">
    Your protein may contain additional repeats. To detect them, please re-run HHrepID with an increased number of MSA
        generation steps and/or run an HHpred search against the PDB_mmCIF70 or SCOPe70 database. You could use the
        'Forward Query A3M' option to forward the MSA generated by HHrepID to HHpred.
    </div>

    <div class="hhrepidResult">
    @HHrepID.getResult(jobID, filePath)
    </div>
    <br/><br/>
    <br/><hr><br/>
    <div id="toolReferences">
        If you use HHrepID on our Toolkit for your research, please cite:
        <div class="citation">
            @views.html.modals.toolkit_citation_results()
            <br>
            <div>De novo identification of highly diverged protein repeats by probabilistic consistency.<br>
                Biegert A, Söding J.<a href="https://academic.oup.com/bioinformatics/article-lookup/doi/10.1093/bioinformatics/btn039" target="_blank" rel="noopener"> Bioinformatics. 2008 Mar 15;24(6):807-14.</a></div>
        </div>
        <hr class="horizontal-line">
    </div>
}else{
    <div class="colorOptsAlignment">
        <a class="forwardModalOpenBtn" data-modal-type="hhsuite">Forward Query A3M</a>
        <hr id="line-element" class="horizontal-line">
    </div>

    <div class="note">No repeats found!<br/>
    Please try increasing the number of MSA generation steps or input your own custom MSA and set
        MSA generation steps to 0.</div>
    <br/><br/>
    <br/><hr><br/>
    <div id="toolReferences">
        If you use HHrepID on our Toolkit for your research, please cite:
        <div class="citation">
            @views.html.modals.toolkit_citation_results()
            <br>
            <div>De novo identification of highly diverged protein repeats by probabilistic consistency.<br>
                Biegert A, Söding J.<a href="https://academic.oup.com/bioinformatics/article-lookup/doi/10.1093/bioinformatics/btn039" target="_blank" rel="noopener"> Bioinformatics. 2008 Mar 15;24(6):807-14.</a></div>
        </div>
        <hr id="line-element" class="horizontal-line">
    </div>
}

<script>
    new ForwardingModal($("#jobview"), "hhrepid", "@{jobID}");
</script>
