#!/bin/bash


# Make Request to Toolkit to indicate current state of execution
trap catch_errors ERR;
function catch_errors() {

    curl -X POST http://%HOSTNAME:%PORT/jobs/error/%jobid.content
    echo "script aborted, because of errors"
    exit 0
}
curl -X POST http://%HOSTNAME:%PORT/jobs/running/%jobid.content

# retrieve sge id

curl -X POST http://%HOSTNAME:%PORT/jobs/sge/%jobid.content/${JOB_ID}


# Recreate results and log directories
rm -rf ../results
rm -rf ../logs

mkdir ../results
mkdir ../logs

# Set environment
source %ENVIRONMENT
