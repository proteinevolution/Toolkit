require=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t){var n="/* BASIC */\n\n.biojs_msa_stage {\n    cursor: default;\n    line-height: normal; \n}\n\n.biojs_msa_seqblock {\n    cursor: move;\n}\n\n.biojs_msa_layer{\n    display: block;\n    white-space: nowrap;\n}\n\n.biojs_msa_labels {\n    color:black;\n    display: inline-block;\n    white-space: nowrap;\n    cursor: pointer;\n    vertical-align:middle;\n    overflow: hidden;\n    text-overflow: clip;\n    /*margin:auto; */\n    text-align: left;\n}\n\n.biojs_msa_header {\n    white-space: nowrap;\n    text-align: left;\n}\n\n.biojs_msa_labelrow:before {\n    content: '';\n    display: inline-block;\n    width: 0;\n float: left; \n width: 50%;\n    vertical-align: middle;\n}\n\n.biojs_msa_labelrow{\n   width: 50%;\n}\n\n.biojs_msa_labelblock::-webkit-scrollbar, .biojs_msa_rheader::-webkit-scrollbar{\n    // FIX scrollbars on Mac\n    -webkit-appearance: none;\n    width: 7px;\n    height: 7px;\n}\n.biojs_msa_labelblock::-webkit-scrollbar-thumb, .biojs_msa_rheader::-webkit-scrollbar-thumb{\n    border-radius: 4px;\n    background-color: rgba(0,0,0,.5);\n    box-shadow: 0 0 1px rgba(255,255,255,.5);\n}\n\n/* END BASIC */\n/* Marker */\n\n.biojs_msa_marker{\n    color:grey;\n    white-space: nowrap;\n    cursor: pointer;\n}\n\n.biojs_msa_marker span{\n    text-align: center;\n}\n\n/* END Marker */\n/* Menubar */\n\n.smenubar .smenubar_alink {\n    background: #3498db;\n    background-image: -webkit-linear-gradient(top, #ffffff, #2980b9);\n    background-image: -moz-linear-gradient(top, #ffffff, #2980b9);\n    background-image: -ms-linear-gradient(top, #ffffff, #2980b9);\n    background-image: -o-linear-gradient(top, #ffffff, #2980b9);\n    background-image: linear-gradient(to bottom, #ffffff, #ffffff);\n    -webkit-border-radius: 28;\n    -moz-border-radius: 28;\n    border-radius: 28px;\n    font-family: Arial;\n    color: #ffffff;\n    padding: 3px 10px 3px 10px;\n    margin-left: 10px;\n    text-decoration: none;\n}\n.smenubar {\n    display: inline-block;\n height: 22px;\n}\n\n.smenubar .smenubar_alink:hover {\n    cursor: pointer;\n}\n\n\n/* jquery dropdown CSS */\n\n.smenu-dropdown {\n    position: absolute;\n    z-index: 9999999;\n    display: none;\n}\n\n.smenu-dropdown .smenu-dropdown-menu,\n.smenu-dropdown .smenu-dropdown-panel {\n    min-width: 160px;\n    max-width: 360px;\n    list-style: none;\n    background: #FFF;\n    border: solid 1px #DDD;\n    border: solid 1px rgba(0, 0, 0, .2);\n    border-radius: 6px;\n    box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\n    overflow: visible;\n    padding: 4px 0;\n    margin: 0;\n}\n\n.smenu-dropdown .smenu-dropdown-panel {\n    padding: 10px;\n}\n\n\n.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-menu,\n.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-panel {\n    max-height: 358px;\n    overflow: auto;\n}\n\n.smenu-dropdown .smenu-dropdown-menu LI {\n    list-style: none;\n    padding: 0 0;\n    margin: 0;\n    line-height: 18px;\n}\n\n.smenu-dropdown .smenu-dropdown-menu LI,\n.smenu-dropdown .smenu-dropdown-menu LABEL {\n    display: block;\n    color: #555;\n    text-decoration: none;\n    line-height: 18px;\n    padding: 3px 15px;\n    white-space: nowrap;\n}\n\n.smenu-dropdown .smenu-dropdown-menu LI:hover,\n.smenu-dropdown .smenu-dropdown-menu LABEL:hover {\n    background-color: #08C;\n    color: #FFF;\n    cursor: pointer;\n}\n\n.smenu-dropdown .smenu-dropdown-menu .smenu-dropdown-divider {\n    font-size: 1px;\n    border-top: solid 1px #E5E5E5;\n    padding: 0;\n    margin: 5px 0;\n}\n\n/* END Menubar */\n";e("/home/travis/build/greenify/msa/node_modules/cssify")(n),t.exports=n},{"/home/travis/build/greenify/msa/node_modules/cssify":65}],2:[function(e,t){function n(e){var t=e.parentNode,n=e.nextSibling;return t.removeChild(e),function(){n?t.insertBefore(e,n):t.appendChild(e)}}var i,r=e("underscore"),o=e("backbone-viewj"),s=function(e){for(var t;t=e.lastChild;)e.removeChild(t)};t.exports=i=o.extend({renderSubviews:function(){var e=this.el,t=void 0!=e.parentNode;if(t)var i=n(e);s(e);for(var o,a,l=document.createDocumentFragment(),h=this._views(),u=r.sortBy(h,function(e){return e.ordering}),c=0;c<u.length;c++)o=u[c],o.render(),a=o.el,null!=a&&l.appendChild(a);return e.appendChild(l),t&&i(),e},addView:function(e,t){var n=this._views();if(null==t)throw"Invalid plugin. ";return null==t.ordering&&(t.ordering=e),n[e]=t},removeViews:function(){var e,t,n=this._views();for(t in n)e=n[t],e.undelegateEvents(),e.unbind(),null!=e.removeViews&&e.removeViews(),e.remove();return this.views={}},removeView:function(e){var t=this._views();return t[e].remove(),delete t[e]},getView:function(e){var t=this._views();return t[e]},remove:function(){return this.removeViews(),o.prototype.remove.apply(this)},_views:function(){return null==this.views&&(this.views={}),this.views}})},{"backbone-viewj":9,underscore:91}],3:[function(e,t){var n=e("backbone-events-standalone"),i=e("backbone-extend-standalone"),r=e("underscore"),o=e("./model"),s=[],a=s.slice,l=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,r.extend({silent:!0},t))},h={add:!0,remove:!0,merge:!0},u={add:!0,remove:!1};r.extend(l.prototype,n,{model:o,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(e,t){return this.set(e,r.extend({merge:!1},t,u))},remove:function(e,t){var n=!r.isArray(e);e=n?[e]:r.clone(e),t||(t={});for(var i=0,o=e.length;o>i;i++){var s=e[i]=this.get(e[i]);if(s){var a=this.modelId(s.attributes);null!=a&&delete this._byId[a],delete this._byId[s.cid];var l=this.indexOf(s);this.models.splice(l,1),this.length--,t.silent||(t.index=l,s.trigger("remove",s,this,t)),this._removeReference(s,t)}}return n?e[0]:e},set:function(e,t){t=r.defaults({},t,h),t.parse&&(e=this.parse(e,t));var n=!r.isArray(e);e=n?e?[e]:[]:e.slice();for(var i,o,s,a,l,u=t.at,c=this.comparator&&null==u&&t.sort!==!1,d=r.isString(this.comparator)?this.comparator:null,f=[],g=[],m={},p=t.add,v=t.merge,b=t.remove,x=!c&&p&&b?[]:!1,w=0,y=e.length;y>w;w++){if(s=e[w],a=this.get(s))b&&(m[a.cid]=!0),v&&s!==a&&(s=this._isModel(s)?s.attributes:s,t.parse&&(s=a.parse(s,t)),a.set(s,t),c&&!l&&a.hasChanged(d)&&(l=!0)),e[w]=a;else if(p){if(o=e[w]=this._prepareModel(s,t),!o)continue;f.push(o),this._addReference(o,t)}o=a||o,o&&(i=this.modelId(o.attributes),!x||!o.isNew()&&m[i]||x.push(o),m[i]=!0)}if(b){for(var w=0,y=this.length;y>w;w++)m[(o=this.models[w]).cid]||g.push(o);g.length&&this.remove(g,t)}if(f.length||x&&x.length)if(c&&(l=!0),this.length+=f.length,null!=u)for(var w=0,y=f.length;y>w;w++)this.models.splice(u+w,0,f[w]);else{x&&(this.models.length=0);for(var _=x||f,w=0,y=_.length;y>w;w++)this.models.push(_[w])}if(l&&this.sort({silent:!0}),!t.silent){for(var S=null!=u?r.clone(t):t,w=0,y=f.length;y>w;w++)null!=u&&(S.index=u+w),(o=f[w]).trigger("add",o,this,S);(l||x&&x.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,r.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,r.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,r.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null==e)return void 0;var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){return r.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),r.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(r.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return r.invoke(this.models,"get",e)},fetch:function(e){e=e?r.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},wrapError(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?r.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(e,r){t.wait&&n.add(e,t),i&&i(e,r,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?r.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_isModel:function(e){return e instanceof o},_addReference:function(e){this._byId[e.cid]=e;var t=this.modelId(e.attributes);null!=t&&(this._byId[t]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if("add"!==e&&"remove"!==e||n===this){if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}this.trigger.apply(this,arguments)}}});var c=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];r.each(c,function(e){r[e]&&(l.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),r[e].apply(r,t)})});var d=["groupBy","countBy","sortBy","indexBy"];r.each(d,function(e){r[e]&&(l.prototype[e]=function(t,n){var i=r.isFunction(t)?t:function(e){return e.get(t)};return r[e](this.models,i,n)})}),l.extend=i,t.exports=l},{"./model":5,"backbone-events-standalone":7,"backbone-extend-standalone":8,underscore:91}],4:[function(e,t){t.exports.Model=e("./model"),t.exports.Collection=e("./collection"),t.exports.Events=e("backbone-events-standalone"),t.exports.extend=e("backbone-extend-standalone")},{"./collection":3,"./model":5,"backbone-events-standalone":7,"backbone-extend-standalone":8}],5:[function(e,t){var n=e("backbone-events-standalone"),i=e("backbone-extend-standalone"),r=e("underscore"),o=function(e,t){var n=e||{};t||(t={}),this.cid=r.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=r.defaults({},n,r.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};r.extend(o.prototype,n,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return r.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,o,s,a,l,h,u,c;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;s=n.unset,l=n.silent,a=[],h=this._changing,this._changing=!0,h||(this._previousAttributes=r.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)t=o[i],r.isEqual(c[i],t)||a.push(i),r.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,s?delete c[i]:c[i]=t;if(!l){a.length&&(this._pending=n);for(var d=0,f=a.length;f>d;d++)this.trigger("change:"+a[d],this,c[a[d]],n)}if(h)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!r.isEmpty(this.changed):r.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?r.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)r.isEqual(i[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(e){e=e?r.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),t.trigger("sync",t,i,e),void 0):!1},wrapError(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,o,s,a=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,n=r.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=r.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var l=this,h=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);return n.wait&&(t=r.extend(i||{},t)),r.isObject(t)&&!l.set(t,n)?!1:(h&&h(l,e,n),l.trigger("sync",l,e,n),void 0)},wrapError(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"!==o||n.attrs||(n.attrs=i),s=this.sync(o,this,n),i&&n.wait&&(this.attributes=a),s},destroy:function(e){e=e?r.clone(e):{};var t=this,n=e.success,i=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;wrapError(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||urlError();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},r.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,r.extend(t,{validationError:n})),!1):!0}});var s=["keys","values","pairs","invert","pick","omit","chain","isEmpty"];r.each(s,function(e){r[e]&&(o.prototype[e]=function(){var t=slice.call(arguments);return t.unshift(this.attributes),r[e].apply(r,t)})}),o.extend=i,t.exports=o},{"backbone-events-standalone":7,"backbone-extend-standalone":8,underscore:91}],6:[function(e,t,n){!function(){function e(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++l+"";return e?e+t:t},has:function(e,t){return s.call(e,t)},each:function(e,t,n){if(null!=e)if(o&&e.forEach===o)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,r=e.length;r>i;i++)t.call(n,e[i],i,e);else for(var s in e)this.has(e,s)&&t.call(n,e[s],s,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,r=this,o=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,l=0,h=e();i={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,r=h.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,a,l,u,d;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:h.keys(this._events),a=0,l=s.length;l>a;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,d=o.length;d>u;u++)r=o[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}};var u=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},f={listenTo:"on",listenToOnce:"once"};h.each(f,function(e,t){i[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=h.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return h.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=i),n.BackboneEvents=i):"function"==typeof define?define(function(){return i}):r.BackboneEvents=i}(this)},{}],7:[function(e,t){t.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":6}],8:[function(e,t,n){!function(e){"object"==typeof n?t.exports=e():"function"==typeof define&&define.amd?define(e):window.BackboneExtend=e()}(function(){"use strict";var e={has:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e){for(var t=1;t<arguments.length;++t){var n=arguments[t];if(n)for(var i in n)e[i]=n[i]}return e}},t=function(t,n){var i,r=this;i=t&&e.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},e.extend(i,r,n);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,t&&e.extend(i.prototype,t),i.__super__=r.prototype,i};return t})},{}],9:[function(e,t){var n=e("underscore"),i=e("backbone-events-standalone"),r=e("backbone-extend-standalone"),o=e("jbone"),s=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,l)),this._ensureElement(),this.initialize.apply(this,arguments)},a=/^(\S+)\s*(.*)$/,l=["model","collection","el","id","attributes","className","tagName","events"];n.extend(s.prototype,i,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof o?e:o(e),this.el=this.$el[0]},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var r=t.match(a);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){this.$el.on(e+".delegateEvents"+this.cid,t,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){this.$el.off(e+".delegateEvents"+this.cid,t,n)},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),s.extend=r,t.exports=s},{"backbone-events-standalone":11,"backbone-extend-standalone":12,jbone:67,underscore:91}],10:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],11:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{"./backbone-events-standalone":10,dup:7}],12:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],13:[function(e,t){var n=e("backbone-events-standalone");n.onAll=function(e,t){return this.on("all",e,t),this},n.oldMixin=n.mixin,n.mixin=function(e){n.oldMixin(e);for(var t=["onAll"],i=0;i<t.length;i++){var r=t[i];e[r]=this[r]}return e},t.exports=n},{"backbone-events-standalone":15}],14:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],15:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{"./backbone-events-standalone":14,dup:7}],16:[function(e,t){var n,i=e("request"),r=e("vow");t.exports=n=function(){function e(){}return e.read=function(t,n){var o;if(o=function(t){return function(i,r,o){return e._onRetrieval(i,o,n,t)}}(this),"undefined"==typeof n){var s=r.defer();return n=function(e,t){e?s.reject(e):s.resolve(t)},i(t,o),s.promise()}return i(t,o)},e._onRetrieval=function(e,t,n,i){var r;return"undefined"!=typeof e&&(r=i.parse(t)),n.call(i,e,r)},e.extend=function(t,n){return extend(e,t,n)},e.mixin=function(t){var n=["read"];return"object"!=typeof t&&(t=t.prototype),n.forEach(function(n){t[n]=e[n]},this),t},e}()},{request:18,vow:17}],17:[function(e,t){(function(e){!function(n){var i,r=function(){var t=[],i=function(e){return 1===t.push(e)},r=function(){var e=t,n=0,i=t.length;for(t=[];i>n;)e[n++]()};if("function"==typeof setImmediate)return function(e){i(e)&&setImmediate(r)};if("object"==typeof e&&e.nextTick)return function(t){i(t)&&e.nextTick(r)};if(n.postMessage){var o=!0;if(n.attachEvent){var s=function(){o=!1};n.attachEvent("onmessage",s),n.postMessage("__checkAsync","*"),n.detachEvent("onmessage",s)}if(o){var a="__promise"+ +new Date,l=function(e){e.data===a&&(e.stopPropagation&&e.stopPropagation(),r())};return n.addEventListener?n.addEventListener("message",l,!0):n.attachEvent("onmessage",l),function(e){i(e)&&n.postMessage(a,"*")}}}var h=n.document;if("onreadystatechange"in h.createElement("script")){var u=function(){var e=h.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,r()},(h.documentElement||h.body).appendChild(e)};return function(e){i(e)&&u()}}return function(e){i(e)&&setTimeout(r,0)}}(),o=function(e){r(function(){throw e})},s=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"==typeof e},l=Object.prototype.toString,h=Array.isArray||function(e){return"[object Array]"===l.call(e)},u=function(e){for(var t=[],n=0,i=e.length;i>n;)t.push(n++);return t},c=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},d=function(e){var t=function(t){this.name=e,this.message=t};return t.prototype=new Error,t},f=function(e,t){return function(n){e.call(this,n,t)}},g=function(){this._promise=new p};g.prototype={promise:function(){return this._promise},resolve:function(e){this._promise.isResolved()||this._promise._resolve(e)},reject:function(e){this._promise.isResolved()||(x.isPromise(e)?(e=e.then(function(e){var t=x.defer();return t.reject(e),t.promise()}),this._promise._resolve(e)):this._promise._reject(e))},notify:function(e){this._promise.isResolved()||this._promise._notify(e)}};var m={PENDING:0,RESOLVED:1,FULFILLED:2,REJECTED:3},p=function(e){if(this._value=i,this._status=m.PENDING,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],e){var t=this,n=e.length;e(function(e){t.isResolved()||t._resolve(e)},n>1?function(e){t.isResolved()||t._reject(e)}:i,n>2?function(e){t.isResolved()||t._notify(e)}:i)}};p.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==m.PENDING},isFulfilled:function(){return this._status===m.FULFILLED},isRejected:function(){return this._status===m.REJECTED},then:function(e,t,n,i){var r=new g;return this._addCallbacks(r,e,t,n,i),r.promise()},"catch":function(e,t){return this.then(i,e,t)},fail:function(e,t){return this.then(i,e,t)},always:function(e,t){var n=this,i=function(){return e.call(this,n)};return this.then(i,i,t)},progress:function(e,t){return this.then(i,i,e,t)},spread:function(e,t,n){return this.then(function(t){return e.apply(this,t)},t,n)},done:function(e,t,n,i){this.then(e,t,n,i).fail(o)},delay:function(e){var t,n=this.then(function(n){var i=new g;return t=setTimeout(function(){i.resolve(n)},e),i.promise()});return n.always(function(){clearTimeout(t)}),n},timeout:function(e){var t=new g,n=setTimeout(function(){t.reject(new x.TimedOutError("timed out"))},e);return this.then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise().always(function(){clearTimeout(n)}),t.promise()},_vow:!0,_resolve:function(e){if(!(this._status>m.RESOLVED)){if(e===this)return this._reject(TypeError("Can't resolve promise with itself")),void 0;if(this._status=m.RESOLVED,e&&e._vow)return e.isFulfilled()?this._fulfill(e.valueOf()):e.isRejected()?this._reject(e.valueOf()):e.then(this._fulfill,this._reject,this._notify,this),void 0;if(a(e)||s(e)){var t;try{t=e.then}catch(n){return this._reject(n),void 0}if(s(t)){var i=this,r=!1;try{t.call(e,function(e){r||(r=!0,i._resolve(e))},function(e){r||(r=!0,i._reject(e))},function(e){i._notify(e)})}catch(n){r||this._reject(n)}return}}this._fulfill(e)}},_fulfill:function(e){this._status>m.RESOLVED||(this._status=m.FULFILLED,this._value=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=i)},_reject:function(e){this._status>m.RESOLVED||(this._status=m.REJECTED,this._value=e,this._callCallbacks(this._rejectedCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=i)},_notify:function(e){this._callCallbacks(this._progressCallbacks,e)},_addCallbacks:function(e,t,n,r,o){n&&!s(n)?(o=n,n=i):r&&!s(r)&&(o=r,r=i);var a;this.isRejected()||(a={defer:e,fn:s(t)?t:i,ctx:o},this.isFulfilled()?this._callCallbacks([a],this._value):this._fulfilledCallbacks.push(a)),this.isFulfilled()||(a={defer:e,fn:n,ctx:o},this.isRejected()?this._callCallbacks([a],this._value):this._rejectedCallbacks.push(a)),this._status<=m.RESOLVED&&this._progressCallbacks.push({defer:e,fn:r,ctx:o})},_callCallbacks:function(e,t){var n=e.length;if(n){var i=this.isResolved(),o=this.isFulfilled();r(function(){for(var r,s,a,l=0;n>l;)if(r=e[l++],s=r.defer,a=r.fn){var h,u=r.ctx;try{h=u?a.call(u,t):a(t)}catch(c){s.reject(c);continue}i?s.resolve(h):s.notify(h)}else i?o?s.resolve(t):s.reject(t):s.notify(t)})}}};var v={cast:function(e){return x.cast(e)},all:function(e){return x.all(e)},race:function(e){return x.anyResolved(e)},resolve:function(e){return x.resolve(e)},reject:function(e){return x.reject(e)}};for(var b in v)v.hasOwnProperty(b)&&(p[b]=v[b]);var x={Deferred:g,Promise:p,defer:function(){return new g},when:function(e,t,n,i,r){return x.cast(e).then(t,n,i,r)},fail:function(e,t,n){return x.when(e,i,t,n)},always:function(e,t,n){return x.when(e).always(t,n)},progress:function(e,t,n){return x.when(e).progress(t,n)},spread:function(e,t,n,i){return x.when(e).spread(t,n,i)},done:function(e,t,n,i,r){x.when(e).done(t,n,i,r)},isPromise:function(e){return a(e)&&s(e.then)},cast:function(e){return e&&e._vow?e:x.resolve(e)},valueOf:function(e){return e&&s(e.valueOf)?e.valueOf():e},isFulfilled:function(e){return e&&s(e.isFulfilled)?e.isFulfilled():!0},isRejected:function(e){return e&&s(e.isRejected)?e.isRejected():!1},isResolved:function(e){return e&&s(e.isResolved)?e.isResolved():!0},resolve:function(e){var t=x.defer();return t.resolve(e),t.promise()},fulfill:function(e){var t=x.defer(),n=t.promise();return t.resolve(e),n.isFulfilled()?n:n.then(null,function(e){return e})},reject:function(e){var t=x.defer();return t.reject(e),t.promise()},invoke:function(e){var t,i=Math.max(arguments.length-1,0);if(i){t=Array(i);for(var r=0;i>r;)t[r++]=arguments[r]}try{return x.resolve(t?e.apply(n,t):e.call(n))}catch(o){return x.reject(o)}},all:function(e){var t=new g,n=h(e),i=n?u(e):c(e),r=i.length,o=n?[]:{};if(!r)return t.resolve(o),t.promise();var s=r;return x._forEach(e,function(e,n){o[i[n]]=e,--s||t.resolve(o)},t.reject,t.notify,t,i),t.promise()},allResolved:function(e){var t=new g,n=h(e),i=n?u(e):c(e),r=i.length,o=n?[]:{};if(!r)return t.resolve(o),t.promise();var s=function(){--r||t.resolve(e)};return x._forEach(e,s,s,t.notify,t,i),t.promise()},allPatiently:function(e){return x.allResolved(e).then(function(){var t,n,i,r,o=h(e),s=o?u(e):c(e),a=s.length,l=0;if(!a)return o?[]:{};for(;a>l;)i=s[l++],r=e[i],x.isRejected(r)?(t||(t=o?[]:{}),o?t.push(r.valueOf()):t[i]=r.valueOf()):t||((n||(n=o?[]:{}))[i]=x.valueOf(r));if(t)throw t;return n})},any:function(e){var t=new g,n=e.length;if(!n)return t.reject(Error()),t.promise();var i,r=0;return x._forEach(e,t.resolve,function(e){r||(i=e),++r===n&&t.reject(i)},t.notify,t),t.promise()},anyResolved:function(e){var t=new g,n=e.length;return n?(x._forEach(e,t.resolve,t.reject,t.notify,t),t.promise()):(t.reject(Error()),t.promise())},delay:function(e,t){return x.resolve(e).delay(t)},timeout:function(e,t){return x.resolve(e).timeout(t)},_forEach:function(e,t,n,i,r,o){for(var s=o?o.length:e.length,a=0;s>a;)x.when(e[o?o[a]:a],f(t,a),n,i,r),++a},TimedOutError:d("TimedOut")},w=!0;"object"==typeof t&&"object"==typeof t.exports&&(t.exports=x,w=!1),"object"==typeof modules&&s(modules.define)&&(modules.define("vow",function(e){e(x)}),w=!1),"function"==typeof define&&(define(function(e,t,n){n.exports=x}),w=!1),w&&(n.vow=x)}(this)}).call(this,e("_process"))},{_process:64}],18:[function(e,t){"use strict";function n(e,t){function n(){4===c.readyState&&h()}function i(){var e=void 0;if(c.response?e=c.response:"text"!==c.responseType&&c.responseType||(e=c.responseText||c.responseXML),x)try{e=JSON.parse(e)}catch(t){}return e}function r(e){clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"unknown"))),e.statusCode=0,t(e,u)}function h(){clearTimeout(f);var e=1223===c.status?204:c.status,n=u,r=null;0!==e?(n={body:i(),statusCode:e,method:m,headers:{},url:g,rawRequest:c},c.getAllResponseHeaders&&(n.headers=s(c.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),t(r,n,n.body)}var u={body:void 0,headers:{},statusCode:0,method:m,url:g,rawRequest:c};if("string"==typeof e&&(e={uri:e}),e=e||{},"undefined"==typeof t)throw new Error("callback argument missing");t=o(t);var c=e.xhr||null;c||(c=e.cors||e.useXDR?new l:new a);var d,f,g=c.url=e.uri||e.url,m=c.method=e.method||"GET",p=e.body||e.data,v=c.headers=e.headers||{},b=!!e.sync,x=!1;if("json"in e&&(x=!0,v.Accept||(v.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(v["Content-Type"]="application/json",p=JSON.stringify(e.json))),c.onreadystatechange=n,c.onload=h,c.onerror=r,c.onprogress=function(){},c.ontimeout=r,c.open(m,g,!b),c.withCredentials=!!e.withCredentials,!b&&e.timeout>0&&(f=setTimeout(function(){c.abort("timeout")
},e.timeout+2)),c.setRequestHeader)for(d in v)v.hasOwnProperty(d)&&c.setRequestHeader(d,v[d]);else if(e.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(p),c}function i(){}var r=e("global/window"),o=e("once"),s=e("parse-headers"),a=r.XMLHttpRequest||i,l="withCredentials"in new a?a:r.XDomainRequest;t.exports=n},{"global/window":19,once:20,"parse-headers":24}],19:[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t){function n(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],21:[function(e,t){function n(e,t,n){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===a.call(e)?i(e,t,n):"string"==typeof e?r(e,t,n):o(e,t,n)}function i(e,t,n){for(var i=0,r=e.length;r>i;i++)l.call(e,i)&&t.call(n,e[i],i,e)}function r(e,t,n){for(var i=0,r=e.length;r>i;i++)t.call(n,e.charAt(i),i,e)}function o(e,t,n){for(var i in e)l.call(e,i)&&t.call(n,e[i],i,e)}var s=e("is-function");t.exports=n;var a=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":22}],22:[function(e,t){function n(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n;var i=Object.prototype.toString},{}],23:[function(e,t,n){function i(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=i,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],24:[function(e,t){var n=e("trim"),i=e("for-each"),r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return i(n(e).split("\n"),function(e){var i=e.indexOf(":"),o=n(e.slice(0,i)).toLowerCase(),s=n(e.slice(i+1));"undefined"==typeof t[o]?t[o]=s:r(t[o])?t[o].push(s):t[o]=[t[o],s]}),t}},{"for-each":21,trim:23}],25:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{dup:16,request:27,vow:26}],26:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{_process:64,dup:17}],27:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,"global/window":28,once:29,"parse-headers":33}],28:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],29:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],30:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21,"is-function":31}],31:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],32:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],33:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24,"for-each":30,trim:32}],34:[function(e,t){var n={};t.exports=n;var i=e("./utils");n.readHeader=function(e){for(var t,i={},r=0,o=[];r<e.length;r++){var s=e[r];if(s.indexOf("#")>=0)break;var a=s.split(/\t/),l=a[0].trim();if("GFF"===l)break;if(2===a.length)if("startgroup"===l)t=a[1].trim();else{if("endgroup"===l){t="";continue}i[a[0]]=n.parseColor(a[1])}else if(a.length>=5){var h=n.parseLine(a);t&&(h.attributes.Parent=t),o.push(h)}}return{offset:r,colors:i,features:o}},n.parseColor=function(e){return e.indexOf(",")>=0?i.rgbToHex(e.split(",").map(function(e){return parseInt(e)})):6===e.length&&parseInt(e.charAt(0),16)<=16&&"bisque"!==e?"#"+e:e},n.parseLine=function(e){var t={attributes:{}};return t.attributes.Name=e[0].trim(),t.seqname=e[1].trim(),t.start=parseInt(e[3]),t.end=parseInt(e[4]),t.feature=e[5].trim(),"ID_NOT_SPECIFIED"===t.seqname&&(t.seqname=e[2].trim()),t}},{"./utils":35}],35:[function(e,t){function n(e){var t=e.toString(16);return 1===t.length?"0"+t:t}var i={};t.exports=i,i.extractKeys=function(e){var t={},n=e.split(";");return n.forEach(function(e){var n,i,r;e.indexOf("=")>0?(n=e.split("="),i=n[0],r=n[1],t[i]=r):e.indexOf(" ")>0&&(n=e.split(" "),i=n[0],r=n[1].replace(/"/g,""),t[i]=r)}),t},i.rgbToHex=function(e,t,r){return 3===e.length?i.rgbToHex(e[0],e[1],e[2]):"#"+n(e)+n(t)+n(r)}},{}],36:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{dup:16,request:38,vow:37}],37:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{_process:64,dup:17}],38:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,"global/window":39,once:40,"parse-headers":44}],39:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],40:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],41:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21,"is-function":42}],42:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],43:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],44:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24,"for-each":41,trim:43}],45:[function(e,t){t.exports.seq=e("./seq")},{"./seq":46}],46:[function(e,t){t.exports=function(e,t,n){this.seq=e,this.name=t,this.id=n,this.meta={}}},{}],47:[function(e,t){t.exports=e("./src/index.js")},{"./src/index.js":53}],48:[function(e,t){t.exports={render_x_axis_label:function(){var e="Model Position";this.display_ali_map&&(e="Alignment Column"),this.called_on.find(".logo_xaxis").remove(),this.called_on.prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+e+"</p></div>")},render_y_axis_label:function(){this.dom_element.parent().before('<canvas class="logo_yaxis" height="'+this.options.height+'" width="55"></canvas>');var e=this.called_on.find(".logo_yaxis"),t=(Math.abs(this.data.max_height),isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),null),n="Information Content (bits)";t=e[0].getContext("2d"),t.beginPath(),t.moveTo(55,1),t.lineTo(40,1),t.moveTo(55,this.info_content_height),t.lineTo(40,this.info_content_height),t.moveTo(55,this.info_content_height/2),t.lineTo(40,this.info_content_height/2),t.lineWidth=1,t.strokeStyle="#666666",t.stroke(),t.fillStyle="#666666",t.textAlign="right",t.font="bold 10px Arial",t.textBaseline="top",t.fillText(parseFloat(this.data.max_height).toFixed(1),38,0),t.textBaseline="middle",t.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2),t.fillText("0",38,this.info_content_height),"score"===this.data.height_calc&&(n="Score (bits)"),t.save(),t.translate(5,this.height/2-20),t.rotate(-Math.PI/2),t.textAlign="center",t.font="normal 12px Arial",t.fillText(n,1,0),t.restore(),t.fillText("occupancy",55,this.info_content_height+7),this.show_inserts&&(t.fillText("ins. prob.",50,280),t.fillText("ins. len.",46,296))}}},{}],49:[function(e,t){var n=null;t.exports=function(){if(!n){var e=document.createElement("canvas");n=!(!e.getContext||!e.getContext("2d"))}return n}},{}],50:[function(e,t){t.exports={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"}},{}],51:[function(e,t){t.exports={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"}},{}],52:[function(e,t){var n=e("jbone");t.exports=function(e,t,i){e.find(".logo_settings_switch, .logo_settings .close").on("click",function(e){e.preventDefault(),n(".logo_settings").toggle()}),e.find(".logo_reset").on("click",function(e){e.preventDefault(),t.changeZoom({target:t.default_zoom})}),e.find(".logo_change").on("click",function(e){e.preventDefault()}),e.find(".logo_zoomin").on("click",function(e){e.preventDefault(),t.changeZoom({distance:.1,direction:"+"})}),e.find(".logo_zoomout").on("click",function(e){e.preventDefault(),t.changeZoom({distance:.1,direction:"-"})}),e.find(".logo_scale").on("change",function(){t.toggleScale(this.value)}),e.find(".logo_color").on("change",function(){t.toggleColorscheme(this.value)}),e.find(".logo_ali_map").on("change",function(){t.toggleAliMap(this.value)}),e.find(".logo_position").on("change",function(){this.value.match(/^\d+$/m)&&t.scrollToColumn(this.value,1)}),i.on("dblclick",function(n){console.log("dblclick",t),offset=t.logo_graphic.offset(),x=parseInt(n.pageX-offset.left,10),window_position=n.pageX-e.parent().offset().left,col=t.columnFromCoordinates(x),console.log("col",col),current=t.zoom,1>current?t.changeZoom({target:1,offset:window_position,column:col}):t.changeZoom({target:.3,offset:window_position,column:col})}),n(document).on(e.attr("id")+".scrolledTo",function(e,n){t.render({target:n})}),n(document).on("keydown",function(e){e.ctrlKey||((61===e.which||107===e.which)&&(zoom+=.1,t.changeZoom({distance:.1,direction:"+"})),(109===e.which||0===e.which)&&(zoom-=.1,t.changeZoom({distance:.1,direction:"-"})))})}},{jbone:67}],53:[function(e,t){_=e("underscore");var n=e("./canvasSupport.js"),i=e("./render/render.js"),r=e("./model/letter.js"),o=e("backbone-viewj"),s=e("./axis"),a=e("./eventListener.js"),l=e("./info/settings.js"),h=e("jbone");t.exports=o.extend({options:{xaxis:!0,yaxis:!0,height:300,column_width:34,debug:!0,scale_height_enabled:!0,scaled_max:!0,zoom_buttons:!0,colorscheme:"default",data:void 0,start:1,end:void 0,zoom:.4,colors:void 0,divider:!1,show_probs:!1,divider_step:5,show_divider:!1,border:!1,settings:!1,scroller:!0,positionMarker:!0},loadDefault:function(t){this.data=t.data,this.display_ali_map=0,this.alphabet=t.data.alphabet||"dna",this.start=t.start,this.zoom=parseFloat(t.zoom)||.4,this.default_zoom=this.zoom,this.column_width=t.column_width,this.height=t.height,this.canvas_width=5e3,this.scale_height_enabled=t.scale_height_enabled,this.scrollme=null,this.previous_target=0,this.rendered=[],this.previous_zoom=0,void 0==this.data.max_height&&(this.data.max_height=this.calcMaxHeight(this.data.heightArr)),this.data.insert_probs&&this.data.delete_probs||(this.options.show_probs=!1),this.data.max_height=t.scaled_max?t.data.max_height_obs||this.data.max_height||2:t.data.max_height_theory||this.data.max_height||2,t.colors?this.changeColors(t.colors):"aa"===this.alphabet?(this.aa_colors=e("./colors/aa.js"),this.changeColors(this.aa_colors)):(this.dna_colors=e("./colors/dna.js"),this.changeColors(this.dna_colors))},initialize:function(e){if(!n())return this.el.textContent="Your browser doesn't support canvas.",void 0;void 0==e.data&&(this.el.textContent="No data added."),_.extend(this.options,e);var t=this.options;if(this.loadDefault(t),this.options.show_probs?this.data.processing&&/^observed|weighted/.test(this.data.processing)?(this.show_inserts=0,this.info_content_height=this.height-14):(this.show_inserts=1,this.info_content_height=this.height-44):this.info_content_height=this.height,this.$el=h(this.el),this.initDivs(),this.options.settings){var i=l(this,t);this.$el.append(i)}a(this.$el,this,this.logo_graphic)},initDivs:function(){var e=u("div");e.className="logo_graphic",this.logo_graphic=h(e);var t=u("div");if(t.className="logo_container",t.style.height=this.height,this.container=h(t),this.container.append(e),this.$el.append(t),this.options.divider){var n=u("div");n.className="logo_divider",this.$el.append(n)}this.dom_element=h(e),this.called_on=this.$el,this.options.xaxis&&s.render_x_axis_label.call(this),this.options.yaxis?s.render_y_axis_label.call(this):this.container[0].style.marginLeft="0px"},render:function(){return i.call(this),this},changeColors:function(e){this.colors=e;var t=void 0!=e&&void 0!=e.type;t&&(this.colorscheme="dynamic"),this.buildAlphabet()},buildAlphabet:function(){this.letters={};var e=this.colors;if("dynamic"==this.colorscheme){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");e={},t.forEach(function(t){e[t]=""})}for(var n in e)if(e.hasOwnProperty(n)){var i={color:e[n]};this.letters[n]=new r(n,i)}},toggleColorscheme:function(e){var t=this.currentColumn();this.colorscheme=e?"default"===e?"default":"consensus":"default"===this.colorscheme?"consensus":"default",this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(t+1),this.scrollToColumn(t)},toggleScale:function(e){var t=this.currentColumn();this.data.max_height=e?"obs"===e?this.data.max_height_obs:this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height_theory:this.data.max_height_obs,this.rendered=[],this.logoYAxis&&this.logoYAxis.remove(),s.render_y_axis_label.call(this),this.scrollme.reflow(),this.scrollToColumn(t+1),this.scrollToColumn(t)},toggleAliMap:function(e){var t=this.currentColumn();this.display_ali_map=e?"model"===e?0:1:1===this.display_ali_map?0:1,s.render_x_axis_label(this),this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(t+1),this.scrollToColumn(t)},currentColumn:function(){var e=this.scrollme.scroller.getValues().left,t=this.column_width*this.zoom,n=e/t,i=this.container.width()/t/2,r=Math.ceil(n+i);return r},changeZoom:function(e){var t=.3,n=null;if(e.target?t=e.target:e.distance&&(t=(parseFloat(this.zoom)-parseFloat(e.distance)).toFixed(1),"+"===e.direction&&(t=(parseFloat(this.zoom)+parseFloat(e.distance)).toFixed(1))),t>1?t=1:.1>t&&(t=.1),n=this.logo_graphic.width()*t/this.zoom,n>this.container.width())if(e.column){this.zoom=t,this.render({zoom:this.zoom}),this.scrollme.reflow();var i=this.coordinatesFromColumn(e.column);this.scrollme.scroller.scrollTo(i-e.offset)}else{var r=this.currentColumn();this.zoom=t,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(r)}return this.zoom},columnFromCoordinates:function(e){var t=Math.ceil(e/(this.column_width*this.zoom));return t},coordinatesFromColumn:function(e){var t=e-1,n=t*this.column_width*this.zoom+this.column_width*this.zoom/2;return n},scrollToColumn:function(e,t){var n=this.logo_container.width()/2,i=this.coordinatesFromColumn(e);this.scrollme.scroller.scrollTo(i-n,0,t)},calcMaxHeight:function(e){return e.reduce(function(e,t){var n=0;for(var i in t)n+=t[i];return n>e?n:e},0)}});var u=function(e){return document.createElement(e)}},{"./axis":48,"./canvasSupport.js":49,"./colors/aa.js":50,"./colors/dna.js":51,"./eventListener.js":52,"./info/settings.js":54,"./model/letter.js":55,"./render/render.js":59,"backbone-viewj":9,jbone:67,underscore:91}],54:[function(e,t){var n=e("jbone");t.exports=function(e,t){var i=n('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position"></input><button class="button logo_change">Go</button></fieldset></form>'),r=n('<div class="logo_settings"></div>');if(r.append('<span class="close">x</span>'),e.scale_height_enabled&&e.data.max_height_obs<e.data.max_height_theory){var o="",s="",a="",l="";e.data.max_height_obs===e.data.max_height?o="checked":s="checked"}var h='<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+o+"/>Maximum Observed "+l+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+s+"/>Maximum Theoretical "+a+"</label></fieldset>";if(r.append(h),"score"!==e.data.height_calc&&"aa"===e.data.alphabet&&e.data.probs_arr){var u=null,c=null,d="",f="";"default"===e.colorscheme?u="checked":c="checked",t.help&&(d='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',f='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var g='<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+u+"/>Default "+d+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+c+"/>Consensus Colors "+f+"</label></fieldset>";r.append(g)}if(e.data.ali_map){var m=null,p=null,v="",b="";0===e.display_ali_map?m="checked":p="checked",t.help&&(v='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',b='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var x='<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+m+"/>Model "+v+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+p+"/>Alignment "+b+"</label></fieldset>";r.append(x)}var w=n('<div class="logo_controls"></div>');return e.zoom_enabled&&w.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>'),r.children().length>0&&(w.append('<button class="logo_settings_switch button">Settings</button>'),w.append(r)),i.append(w),i}},{jbone:67}],55:[function(e,t){t.exports=function(e,t){t=t||{},this.value=e,this.width=parseInt(t.width,10)||100,"W"===this.value&&(this.width+=30*this.width/100),this.height=parseInt(t.height,10)||100,this.color=t.color||"#000000",this.fontSize=t.fontSize||138,this.scaled=function(){},this.draw=function(e,t,n,i,r,o){var s=t/this.height,a=n/this.width,l=e.font;e.transform(a,0,0,s,i,r),e.fillStyle=o||this.color,e.textAlign="center",e.font="bold "+this.fontSize+"px Arial",e.fillText(this.value,0,0),e.setTransform(1,0,0,1,0,0),e.fillStyle="#000000",e.font=l}}},{}],56:[function(e,t){t.exports=function(e,t,n){e.beginPath(),e.moveTo(0,t),e.lineTo(n,t),e.lineWidth=1,e.strokeStyle="#999999",e.stroke()}},{}],57:[function(e,t){t.exports=function(e,t,n,i,r,o,s){e.font=o+"px Arial",e.textAlign=s?"right":"center",e.fillStyle="#666666",e.fillText(r,t+i/2,n)}},{}],58:[function(e,t){t.exports=function(e,t,n,i,r){r=r||"#999999",e.beginPath(),e.moveTo(t,n),e.lineTo(t,n+i),e.lineWidth=1,e.strokeStyle=r,e.stroke()}},{}],59:[function(e,t){function n(e,t,n,i,r){var s=o(e).find("#canv_"+i);return s.length||(o(e).append('<canvas class="canvas_logo" id="canv_'+i+'"  height="'+t+'" width="'+n+'" style="left:'+r*i+'px"></canvas>'),s=o(e).find("#canv_"+i)),o(s).attr("width",n).attr("height",t),s[0]}var i=e("./render_with_text.js"),r=e("./render_with_rects.js"),o=e("jbone");t.exports=function(e){if(this.data){e=e||{};var t=e.zoom||this.zoom,o=e.target||1,s=(e.scaled||null,this.dom_element.parent().attr("width")),a=1,l=null,h=null,u=0;if(this.previous_target=o,e.start&&(this.start=e.start),e.end&&(this.end=e.end),.1>=t?t=.1:t>=1&&(t=1),this.zoom=t,l=this.end||this.data.heightArr.length,h=this.start||1,l=l>this.data.heightArr.length?this.data.heightArr.length:l,l=h>l?h:l,h=h>l?l:h,h=h>1?h:1,this.y=this.height-20,this.max_width=this.column_width*(l-h+1),s>this.max_width&&(t=1,this.zoom_enabled=!1),this.zoom=t,this.zoomed_column=this.column_width*t,this.total_width=this.zoomed_column*(l-h+1),1>t)for(;this.total_width<s&&(this.zoom+=.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(l-h+1),this.zoom_enabled=!1,!(t>=1)););o>this.total_width&&(o=this.total_width),this.dom_element.attr({width:this.total_width+"px"}).css({width:this.total_width+"px"}),this.canvas_width=this.total_width;var c=Math.ceil(this.total_width/this.canvas_width);for(this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column),this.previous_zoom!==this.zoom&&(this.dom_element.find("canvas").remove(),this.previous_zoom=this.zoom,this.rendered=[]),this.canvases=[],this.contexts=[],u=0;c>u;u++){var d=this.columns_per_canvas*u+h,f=d+this.columns_per_canvas-1;f>l&&(f=l);var g=(f-d+1)*this.zoomed_column;g>a&&(a=g);var m=a*u,p=m+g;if(p+p/2>o&&o>m-m/2)if(this.canvases[u]=n(this.dom_element,this.height,g,u,a),this.contexts[u]=this.canvases[u].getContext("2d"),this.contexts[u].setTransform(1,0,0,1,0,0),this.contexts[u].clearRect(0,0,g,this.height),this.contexts[u].fillStyle="#ffffff",this.contexts[u].fillRect(0,0,p,this.height),this.zoomed_column>12){var v=parseInt(10*t,10);v=v>10?10:v,this.debug&&r.call(this,d,f,u,1),i.call(this,d,f,u,v)}else r.call(this,d,f,u)}!this.scrollme&&this.options.scroller&&(this.scrollme=new EasyScroller(this.dom_element[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on})),1!==o&&this.scrollme.reflow()}}},{"./render_with_rects.js":60,"./render_with_text.js":61,jbone:67}],60:[function(e,t){function n(e,t,n,i,r,o,s,a){var l="#ffffff";a?(r>.1?l="#d7301f":r>.05?l="#fc8d59":r>.03&&(l="#fdcc8a"),e.fillStyle=l,e.fillRect(t,n+15,i,10),l="#ffffff",o>9?l="#d7301f":o>7?l="#fc8d59":o>4&&(l="#fdcc8a"),e.fillStyle=l,e.fillRect(t,n+30,i,10)):n+=30,l="#ffffff",.75>s?l="#2171b5":.85>s?l="#6baed6":.95>s&&(l="#bdd7e7"),e.fillStyle=l,e.fillRect(t,n,i,10)}var i=e("./draw/border.js"),r=e("./draw/ticks.js"),o=e("./draw/column_number.js");t.exports=function(e,t,s,a){var l=0,h=e,u=null,c=0,d=Math.abs(this.data.max_height),f=Math.abs(this.data.min_height_obs),g=d+f,m=Math.round(100*Math.abs(this.data.max_height)/g),p=Math.round(this.info_content_height*m/100),v=(this.info_content_height-p,10);for(c=e;t>=c;c++){if(this.data.mmline&&1===this.data.mmline[c-1])this.contexts[s].fillStyle="#cccccc",this.contexts[s].fillRect(l,10,this.zoomed_column,this.height-40);else{var b=this.data.heightArr[c-1],x=0,w=(b.length,0);for(var w in b)if(values=[w,b[w]],values[1]>.01){var y=parseFloat(values[1])/this.data.max_height,_=l,S=(this.info_content_height-2)*y,k=this.info_content_height-2-x-S,C=null;C="dynamic"===this.colorscheme?this.colors.getColor(values[0],{pos:c-1}):"consensus"===this.colorscheme?this.cmap[c-1][values[0]]||"#7a7a7a":this.colors[values[0]],a?(this.contexts[s].strokeStyle=C,this.contexts[s].strokeRect(_,k,this.zoomed_column,S)):(this.contexts[s].fillStyle=C,this.contexts[s].fillRect(_,k,this.zoomed_column,S)),x+=S}}this.zoom<.2?v=20:this.zoom<.3&&(v=10),this.options.positionMarker&&c%v===0&&(this.options.show_probs&&r(this.contexts[s],l+this.zoomed_column,this.height-30,parseFloat(this.height),"#dddddd"),r(this.contexts[s],l+this.zoomed_column,0,5),u=this.display_ali_map?this.data.ali_map[c-1]:h,o(this.contexts[s],l-2,10,this.zoomed_column,u,10,!0)),this.options.show_probs&&n(this.contexts[s],l,this.height-42,this.zoomed_column,this.data.insert_probs[c-1],this.data.insert_lengths[c-1],this.data.delete_probs[c-1],this.show_inserts),this.options.show_probs&&(this.show_inserts?i(this.contexts[s],this.height-45,this.total_width):i(this.contexts[s],this.height-15,this.total_width)),this.options.border&&i(this.contexts[s],0,this.total_width),l+=this.zoomed_column,h++}}},{"./draw/border.js":56,"./draw/column_number.js":57,"./draw/ticks.js":58}],61:[function(e,t){function n(e,t,n,r,o,s,a){var l=n-4,h="#ffffff",u="#555555";a&&(l=n-35),.75>o?(h="#2171b5",u="#ffffff"):.85>o?h="#6baed6":.95>o&&(h="#bdd7e7"),i(e,t,l,o,s,r,h,u)}function i(e,t,n,i,r,o,s,a){e.font=r+"px Arial",e.fillStyle=s,e.fillRect(t,n-10,o,14),e.textAlign="center",e.fillStyle=a,e.fillText(i,t+o/2,n)}function r(e,t){var n=t.ralign?t.x+e.zoomed_column:t.x,i=t.ralign?t.x+2:t.x;l(e.contexts[t.context_num],n,e.height-30,-30-e.height,"#dddddd"),l(e.contexts[t.context_num],n,0,5),h(e.contexts[t.context_num],i,10,e.zoomed_column,t.column_num,t.fontsize,t.ralign)}function o(e,t,n,r,o,s){var a=n-20,h="#ffffff",u="#555555";o>.1?(h="#d7301f",u="#ffffff"):o>.05?h="#fc8d59":o>.03&&(h="#fdcc8a"),i(e,t,a,o,s,r,h,u),o>.03&&l(e,t+r,n-30,-30-n,h)}function s(e,t,n,r,o,s){var a="#ffffff",l="#555555";o>9?(a="#d7301f",l="#ffffff"):o>7?a="#fc8d59":o>4&&(a="#fdcc8a"),i(e,t,n,o,s,r,a,l)}var a=e("./draw/border.js"),l=e("./draw/ticks.js"),h=e("./draw/column_number.js");t.exports=function(e,t,i,h){{var u=0,c=e,d=null,f=0,g=Math.abs(this.data.max_height),m=isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),p=g+Math.abs(m),v=Math.round(100*Math.abs(this.data.max_height)/p),b=Math.round(this.info_content_height*v/100),x=this.info_content_height-b;b/this.info_content_height,x/this.info_content_height}for(t+3<=this.end&&(t+=3),f=e;t>=f;f++){if(this.data.mmline&&1===this.data.mmline[f-1])this.contexts[i].fillStyle="#cccccc",this.contexts[i].fillRect(u,10,this.zoomed_column,this.height-40);else{var w=this.data.heightArr[f-1],y=[];if(w){var _=0,S=(w.length,0),k=null;for(var S in w){var C=w[S],E=[S,C];if(x_pos=u+this.zoomed_column/2,letter_height=null,E[1]>.01){letter_height=parseFloat(E[1])/this.data.max_height;var j=this.info_content_height-2-_,z=(this.info_content_height-2)*letter_height;y[S]=[z,this.zoomed_column,x_pos,j],_+=z}}for(var S in w)y[S]&&this.letters[S]&&(k="dynamic"===this.colorscheme?this.colors.getColor(S,{pos:f-1}):"consensus"===this.colorscheme?this.cmap[f-1][S]||"#7a7a7a":null,this.letters[S].draw(this.contexts[i],y[S][0],y[S][1],y[S][2],y[S][3],k))}}d=this.display_ali_map?this.data.ali_map[f-1]:c,this.options.show_divider&&(this.zoom<.7?f%this.options.divider_step===0&&r(this,{context_num:i,x:u,fontsize:10,column_num:d,ralign:!0}):r(this,{context_num:i,x:u,fontsize:h,column_num:d})),this.options.show_probs&&(n(this.contexts[i],u,this.height,this.zoomed_column,this.data.delete_probs[f-1],h,this.show_inserts),l(this.contexts[i],u,this.height-15,5),this.show_inserts&&(o(this.contexts[i],u,this.height,this.zoomed_column,this.data.insert_probs[f-1],h),s(this.contexts[i],u,this.height-5,this.zoomed_column,this.data.insert_lengths[f-1],h),l(this.contexts[i],u,this.height-45,5),l(this.contexts[i],u,this.height-30,5))),u+=this.zoomed_column,c++}this.options.show_probs&&(this.show_inserts&&(a(this.contexts[i],this.height-30,this.total_width),a(this.contexts[i],this.height-45,this.total_width)),a(this.contexts[i],this.height-15,this.total_width)),this.options.border&&a(this.contexts[i],0,this.total_width)}},{"./draw/border.js":56,"./draw/column_number.js":57,"./draw/ticks.js":58}],62:[function(e,t){var n=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,i=window.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),r=i&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=(i||o)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(e){var t,n,s,a,l,h;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),n=new ArrayBuffer(t.length),s=new Uint8Array(n),a=0;a<t.length;a+=1)s[a]=t.charCodeAt(a);return l=e.split(",")[0].split(":")[1].split(";")[0],i?new Blob([r?s:n],{type:l}):(h=new o,h.append(n),h.getBlob(l))};window.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(e,t,i){i&&n.toDataURL&&s?e(s(this.toDataURL(t,i))):e(this.mozGetAsFile("blob",t))}:n.toDataURL&&s&&(n.toBlob=function(e,t,n){e(s(this.toDataURL(t,n)))})),t.exports=s},{}],63:[function(e,t){var n=n||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!e.externalHost&&"download"in i,o=function(n){var i=t.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)},s=e.webkitRequestFileSystem,a=e.requestFileSystem||s||e.mozRequestFileSystem,l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},h="application/octet-stream",u=0,c=[],d=function(){for(var e=c.length;e--;){var t=c[e];"string"==typeof t?n().revokeObjectURL(t):t.remove()}c.length=0},f=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(o){l(o)}}},g=function(t,l){var d,g,m,p=this,v=t.type,b=!1,x=function(){var e=n().createObjectURL(t);return c.push(e),e},w=function(){f(p,"writestart progress write writeend".split(" "))},y=function(){(b||!d)&&(d=x(t)),g?g.location.href=d:window.open(d,"_blank"),p.readyState=p.DONE,w()},_=function(e){return function(){return p.readyState!==p.DONE?e.apply(this,arguments):void 0}},S={create:!0,exclusive:!1};return p.readyState=p.INIT,l||(l="download"),r?(d=x(t),i.href=d,i.download=l,o(i),p.readyState=p.DONE,w(),void 0):(e.chrome&&v&&v!==h&&(m=t.slice||t.webkitSlice,t=m.call(t,0,t.size,h),b=!0),s&&"download"!==l&&(l+=".download"),(v===h||s)&&(g=e),a?(u+=t.size,a(e.TEMPORARY,u,_(function(e){e.root.getDirectory("saved",S,_(function(e){var n=function(){e.getFile(l,S,_(function(e){e.createWriter(_(function(n){n.onwriteend=function(t){g.location.href=e.toURL(),c.push(e),p.readyState=p.DONE,f(p,"writeend",t)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&y()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=p["on"+e]}),n.write(t),p.abort=function(){n.abort(),p.readyState=p.DONE},p.readyState=p.WRITING}),y)}),y)};e.getFile(l,{create:!1},_(function(e){e.remove(),n()}),_(function(e){e.code===e.NOT_FOUND_ERR?n():y()}))}),y)}),y),void 0):(y(),void 0))},m=g.prototype,p=function(e,t){return new g(e,t)};return m.abort=function(){var e=this;e.readyState=e.DONE,f(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,e.addEventListener("unload",d,!1),p.unload=function(){d(),e.removeEventListener("unload",d,!1)},p}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);amdDefine=window.define,"undefined"==typeof amdDefine&&"undefined"!=typeof window.almond&&"define"in window.almond&&(amdDefine=window.almond.define),"undefined"!=typeof t&&null!==t?t.exports=n:"undefined"!=typeof amdDefine&&null!==amdDefine&&null!=amdDefine.amd&&amdDefine("saveAs",[],function(){return n})},{}],64:[function(e,t){function n(){if(!s){s=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}s=!1}}function i(){}var r=t.exports={},o=[],s=!1;r.nextTick=function(e){o.push(e),s||setTimeout(n,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],65:[function(e,t){t.exports=function(e,t){var n=t||document;if(n.createStyleSheet){var i=n.createStyleSheet();return i.cssText=e,i.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(n.createTextNode(e)),r.appendChild(o),o},t.exports.byUrl=function(e){if(document.createStyleSheet)return document.createStyleSheet(e).ownerNode;var t=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=e,t.appendChild(n),n}},{}],66:[function(e,t){var n={};n.removeToInsertLater=function(e){var t,n;return n=e.parentNode,t=e.nextSibling,n.removeChild(e),function(){t?n.insertBefore(e,t):n.appendChild(e)}},n.removeAllChilds=function(e){var t;for(t=0;e.firstChild;)t++,e.removeChild(e.firstChild)},t.exports=n},{}],67:[function(e,t){!function(e){function n(t){var n=t.length,i=typeof t;return m(i)||t===e?!1:1===t.nodeType&&n?!0:p(i)||0===n||"number"==typeof n&&n>0&&n-1 in t}function i(e,t){var n,i;this.originalEvent=e,i=function(e,t){this[e]="preventDefault"===e?function(){return this.defaultPrevented=!0,t[e]()}:"stopImmediatePropagation"===e?function(){return this.immediatePropagationStopped=!0,t[e]()
}:m(t[e])?function(){return t[e]()}:t[e]};for(n in e)(e[n]||"function"==typeof e[n])&&i.call(this,n,e);v.extend(this,t,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var r,o=e.$,s=e.jBone,a=/^<(\w+)\s*\/?>$/,l=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=[].slice,u=[].splice,c=Object.keys,d=document,f=function(e){return"string"==typeof e},g=function(e){return e instanceof Object},m=function(e){return"[object Function]"==={}.toString.call(e)},p=function(e){return Array.isArray(e)},v=function(e,t){return new r.init(e,t)};v.noConflict=function(){return e.$=o,e.jBone=s,v},r=v.fn=v.prototype={init:function(e,t){var n,i,r,o;if(!e)return this;if(f(e)){if(i=a.exec(e))return this[0]=d.createElement(i[1]),this.length=1,g(t)&&this.attr(t),this;if((i=l.exec(e))&&i[1]){for(o=d.createDocumentFragment(),r=d.createElement("div"),r.innerHTML=e;r.lastChild;)o.appendChild(r.firstChild);return n=h.call(o.childNodes),v.merge(this,n)}if(v.isElement(t))return v(t).find(e);try{return n=d.querySelectorAll(e),v.merge(this,n)}catch(s){return this}}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?e():e instanceof v?e:v.makeArray(e,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},r.constructor=v,r.init.prototype=r,v.setId=function(t){var n=t.jid;t===e?n="window":void 0===t.jid&&(t.jid=n=++v._cache.jid),v._cache.events[n]||(v._cache.events[n]={})},v.getData=function(t){t=t instanceof v?t[0]:t;var n=t===e?"window":t.jid;return{jid:n,events:v._cache.events[n]}},v.isElement=function(e){return e&&e instanceof v||e instanceof HTMLElement||f(e)},v._cache={events:{},jid:0},r.pushStack=function(e){var t=v.merge(this.constructor(),e);return t},v.merge=function(e,t){for(var n=t.length,i=e.length,r=0;n>r;)e[i++]=t[r++];return e.length=i,e},v.contains=function(e,t){var n;return e.reverse().some(function(e){return e.contains(t)?n=e:void 0}),n},v.extend=function(e){var t;return u.call(arguments,1).forEach(function(n){if(t=e,n)for(var i in n)t[i]=n[i]}),e},v.makeArray=function(e,t){var i=t||[];return null!==e&&(n(e)?v.merge(i,f(e)?[e]:e):i.push(e)),i},v.unique=function(e){if(null==e)return[];for(var t=[],n=0,i=e.length;i>n;n++){var r=e[n];t.indexOf(r)<0&&t.push(r)}return t},v.Event=function(e,t){var n,i;return e.type&&!t&&(t=e,e=e.type),n=e.split(".").splice(1).join("."),i=e.split(".")[0],e=d.createEvent("Event"),e.initEvent(i,!0,!0),v.extend(e,{namespace:n,isDefaultPrevented:function(){return e.defaultPrevented}},t)},v.event={add:function(e,t,n,i,r){var o,s,a,l,h=function(){v.event.dispatch.apply(e,arguments)};for(v.setId(e),o=v.getData(e).events,t=t.split(" "),a=t.length;a--;)l=t[a],s=l.split(".")[0],o[s]=o[s]||[],o[s].length||e.addEventListener&&e.addEventListener(s,h,!1),o[s].push({namespace:l.split(".").splice(1).join("."),fn:h,selector:r,data:i,originfn:n})},dispatch:function(e){for(var t,n,r,o,s=0,a=this,l=v.getData(a).events[e.type],h=l.length;h>s;s++){if(o={},n=l[s],n.data&&(o.data=n.data),r&&r.isImmediatePropagationStopped())return;n.selector?(~v(a).find(n.selector).indexOf(e.target)||(t=v.contains(v(a).find(n.selector),e.target)))&&(t=t||e.target,o.currentTarget=t,r=new i(e,o),e.namespace&&e.namespace!==n.namespace||n.originfn.call(t,r)):(r=new i(e,o),e.namespace&&e.namespace!==n.namespace||n.originfn.call(a,r))}}},r.on=function(e){var t,n,i=arguments,r=this.length,o=0,s=h.call(i,-1)[0];for(3===i.length&&f(i[1])?t=i[1]:3===i.length&&g(i[1])?n=i[1]:4===i.length&&(t=i[1],n=i[2]);r>o;o++)v.event.add(this[o],e,s,n,t);return this},r.one=function(e){var t,n=arguments,i=0,r=this.length,o=h.call(n,1,n.length-1),s=h.call(n,-1)[0];for(t=function(t){var n=v(t);e.split(" ").forEach(function(e){var i=function(r){n.off(e,i),s.call(t,r)};n.on.apply(n,[e].concat(o,i))})};r>i;i++)t(this[i]);return this},r.trigger=function(e){var t,n=[],i=0,r=this.length;if(!e)return this;for(f(e)?n=e.split(" ").map(function(e){return v.Event(e)}):(e=e instanceof Event?e:v.Event(e),n=[e]),t=function(e){n.forEach(function(t){t.type&&e.dispatchEvent&&e.dispatchEvent(t)})};r>i;i++)t(this[i]);return this},r.off=function(e,t){var n,i,r,o,s=0,a=this.length,l=function(e,n,i,r,o){var s;(t&&o.originfn===t||!t)&&(s=o.fn),e[n][i].fn===s&&(r.removeEventListener(n,s),v._cache.events[v.getData(r).jid][n].splice(i,1))};for(r=function(t){var r,s,a;return(n=v.getData(t).events)?!e&&n?c(n).forEach(function(e){for(s=n[e],r=s.length;r--;)l(n,e,r,t,s[r])}):(e.split(" ").forEach(function(e){if(o=e.split(".")[0],i=e.split(".").splice(1).join("."),n[o])for(s=n[o],r=s.length;r--;)a=s[r],(!i||i&&a.namespace===i)&&l(n,o,r,t,a);else i&&c(n).forEach(function(e){for(s=n[e],r=s.length;r--;)a=s[r],a.namespace.split(".")[0]===i.split(".")[0]&&l(n,e,r,t,a)})}),void 0):void 0};a>s;s++)r(this[s]);return this},r.find=function(e){for(var t=[],n=0,i=this.length,r=function(n){m(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(e),function(e){t.push(e)})};i>n;n++)r(this[n]);return v(t)},r.get=function(e){return null!=e?0>e?this[e+this.length]:this[e]:h.call(this)},r.eq=function(e){return v(this[e])},r.parent=function(){for(var e,t=[],n=0,i=this.length;i>n;n++)!~t.indexOf(e=this[n].parentElement)&&e&&t.push(e);return v(t)},r.toArray=function(){return h.call(this)},r.is=function(){var e=arguments;return this.some(function(t){return t.tagName.toLowerCase()===e[0]})},r.has=function(){var e=arguments;return this.some(function(t){return t.querySelectorAll(e[0]).length})},r.add=function(e,t){return this.pushStack(v.unique(v.merge(this.get(),v(e,t))))},r.attr=function(e,t){var n,i=arguments,r=0,o=this.length;if(f(e)&&1===i.length)return this[0]&&this[0].getAttribute(e);for(2===i.length?n=function(n){n.setAttribute(e,t)}:g(e)&&(n=function(t){c(e).forEach(function(n){t.setAttribute(n,e[n])})});o>r;r++)n(this[r]);return this},r.removeAttr=function(e){for(var t=0,n=this.length;n>t;t++)this[t].removeAttribute(e);return this},r.val=function(e){var t=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;n>t;t++)this[t].value=e;return this},r.css=function(t,n){var i,r=arguments,o=0,s=this.length;if(f(t)&&1===r.length)return this[0]&&e.getComputedStyle(this[0])[t];for(2===r.length?i=function(e){e.style[t]=n}:g(t)&&(i=function(e){c(t).forEach(function(n){e.style[n]=t[n]})});s>o;o++)i(this[o]);return this},r.data=function(e,t){var n,i=arguments,r={},o=0,s=this.length,a=function(e,t,n){g(n)?(e.jdata=e.jdata||{},e.jdata[t]=n):e.dataset[t]=n},l=function(e){return"true"===e?!0:"false"===e?!1:e};if(0===i.length)return this[0].jdata&&(r=this[0].jdata),c(this[0].dataset).forEach(function(e){r[e]=l(this[0].dataset[e])},this),r;if(1===i.length&&f(e))return this[0]&&l(this[0].dataset[e]||this[0].jdata&&this[0].jdata[e]);for(1===i.length&&g(e)?n=function(t){c(e).forEach(function(n){a(t,n,e[n])})}:2===i.length&&(n=function(n){a(n,e,t)});s>o;o++)n(this[o]);return this},r.removeData=function(e){for(var t,n,i=0,r=this.length;r>i;i++)if(t=this[i].jdata,n=this[i].dataset,e)t&&t[e]&&delete t[e],delete n[e];else{for(e in t)delete t[e];for(e in n)delete n[e]}return this},r.addClass=function(e){for(var t=0,n=0,i=this.length,r=e.trim().split(/\s+/);i>t;t++)for(n=0,n=0;n<r.length;n++)this[t].classList.add(r[n]);return this},r.removeClass=function(e){for(var t=0,n=0,i=this.length,r=e.trim().split(/\s+/);i>t;t++)for(n=0,n=0;n<r.length;n++)this[t].classList.remove(r[n]);return this},r.toggleClass=function(e,t){var n=0,i=this.length,r="toggle";for(t===!0&&(r="add")||t===!1&&(r="remove");i>n;n++)this[n].classList[r](e);return this},r.hasClass=function(e){for(var t=0,n=this.length;n>t;t++)if(this[t].classList.contains(e))return!0;return!1},r.html=function(e){var t,n=arguments;return 1===n.length&&void 0!==e?this.empty().append(e):0===n.length&&(t=this[0])?t.innerHTML:this},r.append=function(e){var t,n=0,i=this.length;for(f(e)&&l.exec(e)?e=v(e):g(e)||(e=document.createTextNode(e)),e=e instanceof v?e:v(e),t=function(t,n){e.forEach(function(e){n?t.appendChild(e.cloneNode(!0)):t.appendChild(e)})};i>n;n++)t(this[n],n);return this},r.appendTo=function(e){return v(e).append(this),this},r.empty=function(){for(var e,t=0,n=this.length;n>t;t++)for(e=this[t];e.lastChild;)e.removeChild(e.lastChild);return this},r.remove=function(){var e,t=0,n=this.length;for(this.off();n>t;t++)e=this[t],delete e.jdata,e.parentNode&&e.parentNode.removeChild(e);return this},"object"==typeof t&&t&&"object"==typeof t.exports?t.exports=v:"function"==typeof define&&define.amd?(define(function(){return v}),e.jBone=e.$=v):"object"==typeof e&&"object"==typeof e.document&&(e.jBone=e.$=v)}(window)},{}],68:[function(e,t){var n={};n.d=n.defaultValue=function(e,t){return void 0===e?"function"==typeof e?t():t:e},n.id=function(e){return document.getElementById(e)},n.mk=function(e){return document.createElement(e)},void 0!==t&&void 0!==t.exports&&(t.exports=n)},{}],69:[function(e,t){t.exports=e("./lib/menubuilder")},{"./lib/menubuilder":70}],70:[function(e,t){var n,i,r;i=e("jbone"),r=e("backbone-viewj"),t.exports=n=r.extend({initialize:function(e){this._nodes=[],this.name=e.name||"",this.el.className+="smenubar"},render:function(){for(var e=this.el.firstChild;e;)this.el.removeChild(e),e=this.el.firstChild;this.el.appendChild(this.buildDOM())},setName:function(e){this.name=e},addNode:function(e,t,n){var i;null!=n&&(i=n.style),null==this._nodes&&(this._nodes=[]),this._nodes.push({label:e,callback:t,style:i})},getNode:function(e){var t=void 0;return this._nodes.forEach(function(n){n.label===e&&(t=n)}),t},modifyNode:function(e,t,n){var i=this.getNode(e);i.callback=t||i.callback,n=n||{},i.style=n.style||i.style},renameNode:function(e,t){var n=this.getNode(e);n.label=t||n.label},removeNode:function(e){var t=this.getNode(e);this._nodes.splice(this._nodes.indexOf(t),1)},removeAllNodes:function(){this._nodes=[]},buildDOM:function(){var e=document.createElement("span");return e.appendChild(this._buildM({nodes:this._nodes,name:this.name})),e},_buildM:function(e){var t,n,r,o,s,a,l,h=e.nodes,u=e.name,c=document.createElement("div");c.className="smenu-dropdown smenu-dropdown-tip",c.style.display="none";var d=document.createElement("ul");d.className="smenu-dropdown-menu";for(var f=0,g=h.length;g>f;f++){s=h[f],o=document.createElement("li"),o.textContent=s.label,l=s.style;for(r in l)a=l[r],o.style[r]=a;o.addEventListener("click",s.callback),this.trigger("new:node",o),d.appendChild(o)}return this.trigger("new:menu",d),c.appendChild(d),t=document.createElement("a"),t.textContent=u,t.className="smenubar_alink",this.trigger("new:button",t),i(t).on("click",function(e){return function(n){return e._showMenu(n,c,t),window.setTimeout(function(){return i(document.body).one("click",function(){return c.style.display="none"})},5)}}(this)),n=document.createDocumentFragment(),n.appendChild(c),n.appendChild(t),n},_showMenu:function(e,t,n){var i;t.style.display="block",t.style.position="absolute",i=n.getBoundingClientRect(),t.style.left=i.left-180+"px",t.style.top=i.top+n.offsetHeight-135+"px"}})},{"backbone-viewj":9,jbone:67}],71:[function(e,t){var n;t.exports=n={rel:function(e){var t,n,i,r;return t=e.offsetX,n=e.offsetY,void 0==t&&(i=r.getBoundingClientRect(),r=e.target||e.srcElement,void 0==t&&(t=e.clientX-i.left,n=e.clientY-i.top),void 0==t&&(t=e.pageX-r.offsetLeft,n=e.pageY-r.offsetTop),void 0==t)?(console.log(e,"no mouse event defined. your browser sucks"),void 0):[t,n]},abs:function(e){var t,n;return t=e.pageX,n=e.pageY,void 0==t&&(t=e.layerX,n=e.layerY),void 0==t&&(t=e.clientX,n=e.clientY),void 0==t&&(t=e.x,n=e.y),[t,n]},wheelDelta:function(e){var t;return t=[e.deltaX,e.deltaY],void 0==t[0]&&e.mozMovementX&&(t=[0,e.mozMovementX]),isNaN(t[0])&&(t[0]=0),isNaN(t[1])&&(t[1]=0),t}}},{}],72:[function(e,t){t.exports={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"}},{}],73:[function(e,t){t.exports={A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"}},{}],74:[function(e,t){t.exports={A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"magenta",O:"magenta",P:"orange",Q:"magenta",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"}},{}],75:[function(e,t){t.exports={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"}},{}],76:[function(e,t){t.exports={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"}},{}],77:[function(e,t){t.exports={A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"}},{}],78:[function(e,t){function n(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var i=e("./schemeclass"),r=i.stat,o=i.dyn,s=e("./buried"),a=e("./cinema"),l=e("./clustal"),h=e("./clustal2"),u=e("./helix"),c=e("./hydrophobicity"),d=e("./lesk"),f=e("./mae"),g=e("./nucleotide"),m=e("./purine"),p=e("./strand"),v=e("./taylor"),b=e("./turn"),x=e("./zappo"),w={buried:s,buried_index:s,cinema:a,clustal2:h,clustal:l,helix:u,helix_propensity:u,hydro:c,lesk:d,mae:f,nucleotide:g,purine:m,purine_pyrimidine:m,strand:p,strand_propensity:p,taylor:v,turn:b,turn_propensity:b,zappo:x},y=e("./pid_colors.js"),_={pid:y};t.exports=Colors=function(e){this.maps=n(w),this.dyn=n(_),this.opt=e},Colors.getScheme=function(e){return w[e]},Colors.prototype.getScheme=function(e){var t=this.maps[e];return void 0===t&&(t={},void 0!=this.dyn[e])?new o(this.dyn[e],this.opt):new r(t)},Colors.prototype.addStaticScheme=function(e,t){this.maps[e]=t},Colors.prototype.addDynScheme=function(e,t){this.dyn[e]=t}},{"./buried":72,"./cinema":73,"./clustal":74,"./clustal2":75,"./helix":76,"./hydrophobicity":77,"./lesk":79,"./mae":80,"./nucleotide":81,"./pid_colors.js":82,"./purine":83,"./schemeclass":84,"./strand":85,"./taylor":86,"./turn":87,"./zappo":88}],79:[function(e,t){t.exports={A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"}},{}],80:[function(e,t){t.exports={A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"}},{}],81:[function(e,t){t.exports={A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"}},{}],82:[function(e,t){var n;t.exports=n={},n.init=function(){this.cons=this.opt.conservation()},n.run=function(e,t){var n=this.cons[t.pos];return n>.8?"#6464ff":n>.6?"#9da5ff":n>.4?"#cccccc":"#ffffff"}},{}],83:[function(e,t){t.exports={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"}},{}],84:[function(e,t){var n=function(e){this.defaultColor="#ffffff",this.type="static",this.map=e,this.getColor=function(e){return void 0!==this.map[e]?this.map[e]:this.defaultColor}},i=function(e,t){this.type="dyn",this.opt=t,void 0!==e.init?(e.init.call(this),this.getColor=e.run,this.reset=e.init):this.getColor=e};t.exports.stat=n,t.exports.dyn=i},{}],85:[function(e,t){t.exports={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"}},{}],86:[function(e,t){t.exports={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"}},{}],87:[function(e,t){t.exports={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"}},{}],88:[function(e,t){t.exports={A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},{}],89:[function(e,t){var n={};t.exports=n,n.getMeta=function(e){if(n.contains(e,"|")){for(var t,o,s=e.split(" "),a=0,l={};a<s.length-1;)t=s[a],o=s[a+1]-1,l[t]=o,a+=2;var h=s[s.length-1];if(h.indexOf("=")>=0&&h.indexOf("OS")>=0){var u={},c=h.split(" ");u.en=c[0],c=c.splice(1);var d=i(c,"="),f=c.splice(d-1);h=c.join(" "),c=f,a=0;var g=[];return c.forEach(function(e){g.push(e),e.indexOf("=")>=0&&(r(g.join(" "),"=",u),g=[])}),{name:h,ids:l,details:u}}return{name:h,ids:l}}return{name:e}};var i=function(e){for(var t=0;t<e.lenght;t++)if(e[t].indexOf(t))return t;return e.length-1},r=function(e,t,n){n=n||{};var i=e.split(t);return n[i[0].toLowerCase()]=i[1],n},o={sp:{link:"http://www.uniprot.org/%s",name:"Uniprot"},tr:{link:"http://www.uniprot.org/%s",name:"Trembl"},gb:{link:"http://www.ncbi.nlm.nih.gov/nuccore/%s",name:"Genbank"},pdb:{link:"http://www.rcsb.org/pdb/explore/explore.do?structureId=%s",name:"PDB"}};n.buildLinks=function(e){var t={};return e=e||{},Object.keys(e).forEach(function(n){if(n in o){var i=o[n],r=i.link.replace("%s",e[n]);t[i.name]=r}}),t},n.contains=function(e,t){return-1!=="".indexOf.call(e,t,0)},n.splitNChars=function(e,t){var n,i;t=t||80;var r=[];for(n=0,i=e.length-1;i>=n;n+=t)r.push(e.substr(n,t));return r},n.model=function(e,t,n){this.seq=e,this.name=t,this.id=n,this.ids={}}},{}],90:[function(e,t){var n=e("underscore"),i=function(e){if(this.constructor!==i)return new i(e);if(void 0===e||"string"==typeof e)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(e),this.alphabetSize=4,this._useBackground=!1,this.ignoredChars=["-","*"]};i.prototype.addSeq=function(e){this.seqs.push(e),this._reset()},i.prototype.removeSeq=function(e){"number"==typeof e?this.seqs.splice(e,1):n.each(this.seqs,function(t,n){e===t&&this.seqs.splice(n,1)}.bind(this)),this._reset()},i.prototype.addSeqs=function(e){e.forEach(function(e){this.addSeq(e)}.bind(this))},i.prototype.resetSeqs=function(e){if(this.seqs=[],e instanceof Array)this.addSeqs(e),this._reset(),this.trigger("reset");else{this.mseqs=e;var t=function(){var e=this.mseqs.pluck("seq");this.resetSeqs(e)};e.on("add change reset ",t,this),t.call(this)}};var r=["consensus","frequency","maxLength","ic","gaps"];i.prototype._reset=function(){for(var e=0;e<r.length;e++)this["_"+r[e]]=void 0;this._identity=void 0,this._background=void 0},i.prototype.setBackground=function(e){this._useBackground=e,this._reset()},i.prototype.useBackground=function(){this.setBackground(!0)},i.prototype.setDNA=function(){this.alphabetSize=4},i.prototype.setProtein=function(){this.alphabetSize=20},r.forEach(function(e){i.prototype[e]=function(){return void 0===this["_"+e]&&this[e+"Calc"](),this["_"+e]}}),i.prototype.identity=function(e){var t;return(void 0===this._identity||e)&&(t=this.identityCalc(e),this._identity=void 0),this._identity||t},i.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},i.prototype.frequencyCalc=function(e){var t,i;t=new Array(this.maxLength()),i=new Array(this.seqs.length);var r=this.ignoredChars;return void 0!==e&&e.all&&(r=[]),n.each(this.seqs,function(e){n.each(e,function(e,n){r.indexOf(e)>=0||(void 0===t[n]&&(t[n]={}),void 0===t[n][e]&&(t[n][e]=0),t[n][e]++,void 0===i[n]&&(i[n]=0),i[n]++)})}),n.each(t,function(e,r){return n.each(e,function(e,n){return t[r][n]=e/i[r]})}),this._frequency=t,t},i.prototype.backgroundCalc=function(){var e={},t=0;return n.each(this.seqs,function(i){n.each(i,function(n){return void 0===e[n]&&(e[n]=0),e[n]++,t++})}),e=n.mapValues(e,function(e){return e/t}),this._background=e,e},i.prototype.icCalc=function(){var e=this.frequency();if(this._useBackground)var t=this.background();var i=this.ignoredChars,r=this._useBackground,o=n.map(e,function(e){return n.reduce(e,function(e,n,o){return i.indexOf(o)>=0?e:(r&&(n/=t[o]),e-n*(Math.log(n)/Math.log(2)))},0)});return this._ic=o,o},i.prototype.conservation=function(e){var t=this.ic();e=e||this.alphabetSize;var i=Math.log(e)/Math.log(2),r=n.map(t,function(e){return i-e});return r},i.prototype.conservResidue=function(e){var t,i=e?e.alphabetSize:void 0,r=this.ignoredChars;t=void 0!==e&&e.scaled?this.scale(this.conservation(i)):this.conservation(i);var o,s=this.frequency(),a=n.map(s,function(e,i){o=n.reject(n.keys(e),function(e){return r.indexOf(e)>=0});var s={};return n.each(o,function(n){s[n]=e[n]*t[i]}),s});return a},i.prototype.conservResidue2=function(e){var t=this.frequency(),i=this.conservation(e),r=this.background(),o=n.map(t,function(e,o){return n.map(e,function(e){var s=n.reduce(t[o],function(e,t){return e+t/r[o]},0);return e/r[o]/s*i[o]},0)});return o},i.prototype.scale=function(e,t){t=t||this.alphabetSize;var i=Math.log(t)/Math.log(2),r=n.map(e,function(e){return e/i});return r},i.prototype.maxLengthCalc=function(){this._maxLength=n.max(this.seqs,function(e){return e.length}).length},i.prototype.consensusCalc=function(){var e=new Array(this.maxLength());return n.each(this.seqs,function(t){n.each(t,function(t,n){void 0===e[n]&&(e[n]={}),void 0===e[n][t]&&(e[n][t]=0),e[n][t]++})}),this._consensus=n.reduce(e,function(e,t){var i;return i=n.keys(t),e+=n.max(i,function(e){return t[e]})},""),this._consensus},i.prototype.identityCalc=function(e){var t=e||this.consensus();return this._identity=this.seqs.map(function(e){for(var n=0,i=0,r=0;r<e.length;r++)"-"!==e[r]&&"-"!==t[r]&&(i++,e[r]===t[r]&&n++);return n/i}),this._identity},i.prototype.gapsCalc=function(){var e=new Array(this.maxLength());return n.each(this.seqs,function(t){n.each(t,function(t,n){void 0===e[n]&&(e[n]={g:0,t:0}),t="-"===t?"g":"t",e[n][t]++})}),this._gaps=n.map(e,function(e){return e.g/(e.g+e.t)}),this._gaps},n.mixin({mapValues:function(e,t){return n.object(n.keys(e),n.map(e,t))}}),e("biojs-events").mixin(i.prototype),t.exports=i},{"biojs-events":13,underscore:91}],91:[function(e,t,n){(function(){function e(e){function t(t,n,i,r,o,s){for(;o>=0&&s>o;o+=e){var a=r?r[o]:o;i=n(i,t[a],a,t)}return i}return function(n,i,r,o){i=w(i,o,4);var s=!C(n)&&x.keys(n),a=(s||n).length,l=e>0?0:a-1;return arguments.length<3&&(r=n[s?s[l]:l],l+=e),t(n,i,r,s,l,a)}}function i(e){return function(t,n,i){n=y(n,i);for(var r=null!=t&&t.length,o=e>0?0:r-1;o>=0&&r>o;o+=e)if(n(t[o],o,t))return o;return-1}}function r(e,t){var n=q.length,i=e.constructor,r=x.isFunction(i)&&i.prototype||l,o="constructor";for(x.has(e,o)&&!x.contains(t,o)&&t.push(o);n--;)o=q[n],o in e&&e[o]!==r[o]&&!x.contains(t,o)&&t.push(o)}var o=this,s=o._,a=Array.prototype,l=Object.prototype,h=Function.prototype,u=a.push,c=a.slice,d=l.toString,f=l.hasOwnProperty,g=Array.isArray,m=Object.keys,p=h.bind,v=Object.create,b=function(){},x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=x),n._=x):o._=x,x.VERSION="1.8.2";var w=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return null==e?x.identity:x.isFunction(e)?w(e,t,n):x.isObject(e)?x.matcher(e):x.property(e)};x.iteratee=function(e,t){return y(e,t,1/0)};var _=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],s=e(o),a=s.length,l=0;a>l;l++){var h=s[l];t&&void 0!==n[h]||(n[h]=o[h])}return n}},S=function(e){if(!x.isObject(e))return{};if(v)return v(e);b.prototype=e;var t=new b;return b.prototype=null,t},k=Math.pow(2,53)-1,C=function(e){var t=e&&e.length;return"number"==typeof t&&t>=0&&k>=t};x.each=x.forEach=function(e,t,n){t=w(t,n);var i,r;if(C(e))for(i=0,r=e.length;r>i;i++)t(e[i],i,e);else{var o=x.keys(e);for(i=0,r=o.length;r>i;i++)t(e[o[i]],o[i],e)}return e},x.map=x.collect=function(e,t,n){t=y(t,n);for(var i=!C(e)&&x.keys(e),r=(i||e).length,o=Array(r),s=0;r>s;s++){var a=i?i[s]:s;o[s]=t(e[a],a,e)}return o},x.reduce=x.foldl=x.inject=e(1),x.reduceRight=x.foldr=e(-1),x.find=x.detect=function(e,t,n){var i;return i=C(e)?x.findIndex(e,t,n):x.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},x.filter=x.select=function(e,t,n){var i=[];return t=y(t,n),x.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},x.reject=function(e,t,n){return x.filter(e,x.negate(y(t)),n)},x.every=x.all=function(e,t,n){t=y(t,n);for(var i=!C(e)&&x.keys(e),r=(i||e).length,o=0;r>o;o++){var s=i?i[o]:o;if(!t(e[s],s,e))return!1}return!0},x.some=x.any=function(e,t,n){t=y(t,n);for(var i=!C(e)&&x.keys(e),r=(i||e).length,o=0;r>o;o++){var s=i?i[o]:o;if(t(e[s],s,e))return!0}return!1},x.contains=x.includes=x.include=function(e,t,n){return C(e)||(e=x.values(e)),x.indexOf(e,t,"number"==typeof n&&n)>=0},x.invoke=function(e,t){var n=c.call(arguments,2),i=x.isFunction(t);return x.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matcher(t))},x.findWhere=function(e,t){return x.find(e,x.matcher(t))},x.max=function(e,t,n){var i,r,o=-1/0,s=-1/0;if(null==t&&null!=e){e=C(e)?e:x.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],i>o&&(o=i)}else t=y(t,n),x.each(e,function(e,n,i){r=t(e,n,i),(r>s||r===-1/0&&o===-1/0)&&(o=e,s=r)});return o},x.min=function(e,t,n){var i,r,o=1/0,s=1/0;if(null==t&&null!=e){e=C(e)?e:x.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],o>i&&(o=i)}else t=y(t,n),x.each(e,function(e,n,i){r=t(e,n,i),(s>r||1/0===r&&1/0===o)&&(o=e,s=r)});return o},x.shuffle=function(e){for(var t,n=C(e)?e:x.values(e),i=n.length,r=Array(i),o=0;i>o;o++)t=x.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},x.sample=function(e,t,n){return null==t||n?(C(e)||(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))},x.sortBy=function(e,t,n){return t=y(t,n),x.pluck(x.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,n,i){var r={};return n=y(n,i),x.each(t,function(i,o){var s=n(i,o,t);e(r,i,s)}),r}};x.groupBy=E(function(e,t,n){x.has(e,n)?e[n].push(t):e[n]=[t]}),x.indexBy=E(function(e,t,n){e[n]=t}),x.countBy=E(function(e,t,n){x.has(e,n)?e[n]++:e[n]=1}),x.toArray=function(e){return e?x.isArray(e)?c.call(e):C(e)?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:C(e)?e.length:x.keys(e).length},x.partition=function(e,t,n){t=y(t,n);var i=[],r=[];return x.each(e,function(e,n,o){(t(e,n,o)?i:r).push(e)}),[i,r]},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:x.initial(e,e.length-t)},x.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:x.rest(e,Math.max(0,e.length-t))},x.rest=x.tail=x.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var j=function(e,t,n,i){for(var r=[],o=0,s=i||0,a=e&&e.length;a>s;s++){var l=e[s];if(C(l)&&(x.isArray(l)||x.isArguments(l))){t||(l=j(l,t,n));var h=0,u=l.length;for(r.length+=u;u>h;)r[o++]=l[h++]}else n||(r[o++]=l)}return r};x.flatten=function(e,t){return j(e,t,!1)},x.without=function(e){return x.difference(e,c.call(arguments,1))},x.uniq=x.unique=function(e,t,n,i){if(null==e)return[];x.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=y(n,i));for(var r=[],o=[],s=0,a=e.length;a>s;s++){var l=e[s],h=n?n(l,s,e):l;t?(s&&o===h||r.push(l),o=h):n?x.contains(o,h)||(o.push(h),r.push(l)):x.contains(r,l)||r.push(l)}return r},x.union=function(){return x.uniq(j(arguments,!0,!0))},x.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,i=0,r=e.length;r>i;i++){var o=e[i];if(!x.contains(t,o)){for(var s=1;n>s&&x.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},x.difference=function(e){var t=j(arguments,!0,!0,1);return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(e){for(var t=e&&x.max(e,"length").length||0,n=Array(t),i=0;t>i;i++)n[i]=x.pluck(e,i);return n},x.object=function(e,t){for(var n={},i=0,r=e&&e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},x.indexOf=function(e,t,n){var i=0,r=e&&e.length;if("number"==typeof n)i=0>n?Math.max(0,r+n):n;else if(n&&r)return i=x.sortedIndex(e,t),e[i]===t?i:-1;if(t!==t)return x.findIndex(c.call(e,i),x.isNaN);for(;r>i;i++)if(e[i]===t)return i;return-1},x.lastIndexOf=function(e,t,n){var i=e?e.length:0;if("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1)),t!==t)return x.findLastIndex(c.call(e,0,i),x.isNaN);for(;--i>=0;)if(e[i]===t)return i;return-1},x.findIndex=i(1),x.findLastIndex=i(-1),x.sortedIndex=function(e,t,n,i){n=y(n,i,1);for(var r=n(t),o=0,s=e.length;s>o;){var a=Math.floor((o+s)/2);n(e[a])<r?o=a+1:s=a}return o},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;i>o;o++,e+=n)r[o]=e;return r};var z=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=S(e.prototype),s=e.apply(o,r);return x.isObject(s)?s:o};x.bind=function(e,t){if(p&&e.bind===p)return p.apply(e,c.call(arguments,1));if(!x.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return z(e,i,t,this,n.concat(c.call(arguments)))};return i},x.partial=function(e){var t=c.call(arguments,1),n=function(){for(var i=0,r=t.length,o=Array(r),s=0;r>s;s++)o[s]=t[s]===x?arguments[i++]:t[s];for(;i<arguments.length;)o.push(arguments[i++]);return z(e,n,this,this,o)};return n},x.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=x.bind(e[n],e);return e},x.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return x.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},x.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(e,t,n){var i,r,o,s=null,a=0;
n||(n={});var l=function(){a=n.leading===!1?0:x.now(),s=null,o=e.apply(i,r),s||(i=r=null)};return function(){var h=x.now();a||n.leading!==!1||(a=h);var u=t-(h-a);return i=this,r=arguments,0>=u||u>t?(s&&(clearTimeout(s),s=null),a=h,o=e.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(l,u)),o}},x.debounce=function(e,t,n){var i,r,o,s,a,l=function(){var h=x.now()-s;t>h&&h>=0?i=setTimeout(l,t-h):(i=null,n||(a=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,s=x.now();var h=n&&!i;return i||(i=setTimeout(l,t)),h&&(a=e.apply(o,r),o=r=null),a}},x.wrap=function(e,t){return x.partial(t,e)},x.negate=function(e){return function(){return!e.apply(this,arguments)}},x.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},x.once=x.partial(x.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),q=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(e){if(!x.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return T&&r(e,t),t},x.allKeys=function(e){if(!x.isObject(e))return[];var t=[];for(var n in e)t.push(n);return T&&r(e,t),t},x.values=function(e){for(var t=x.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},x.mapObject=function(e,t,n){t=y(t,n);for(var i,r=x.keys(e),o=r.length,s={},a=0;o>a;a++)i=r[a],s[i]=t(e[i],i,e);return s},x.pairs=function(e){for(var t=x.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},x.invert=function(e){for(var t={},n=x.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=_(x.allKeys),x.extendOwn=x.assign=_(x.keys),x.findKey=function(e,t,n){t=y(t,n);for(var i,r=x.keys(e),o=0,s=r.length;s>o;o++)if(i=r[o],t(e[i],i,e))return i},x.pick=function(e,t,n){var i,r,o={},s=e;if(null==s)return o;x.isFunction(t)?(r=x.allKeys(s),i=w(t,n)):(r=j(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var a=0,l=r.length;l>a;a++){var h=r[a],u=s[h];i(u,h,s)&&(o[h]=u)}return o},x.omit=function(e,t,n){if(x.isFunction(t))t=x.negate(t);else{var i=x.map(j(arguments,!1,!1,1),String);t=function(e,t){return!x.contains(i,t)}}return x.pick(e,t,n)},x.defaults=_(x.allKeys,!0),x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e},x.isMatch=function(e,t){var n=x.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;i>o;o++){var s=n[o];if(t[s]!==r[s]||!(s in r))return!1}return!0};var M=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(x.isFunction(s)&&s instanceof s&&x.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!M(e[l],t[l],n,i))return!1}else{var h,u=x.keys(e);if(l=u.length,x.keys(t).length!==l)return!1;for(;l--;)if(h=u[l],!x.has(t,h)||!M(e[h],t[h],n,i))return!1}return n.pop(),i.pop(),!0};x.isEqual=function(e,t){return M(e,t)},x.isEmpty=function(e){return null==e?!0:C(e)&&(x.isArray(e)||x.isString(e)||x.isArguments(e))?0===e.length:0===x.keys(e).length},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=g||function(e){return"[object Array]"===d.call(e)},x.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){x["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return x.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(e){return"function"==typeof e||!1}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!==+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return null!=e&&f.call(e,t)},x.noConflict=function(){return o._=s,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.noop=function(){},x.property=function(e){return function(t){return null==t?void 0:t[e]}},x.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},x.matcher=x.matches=function(e){return e=x.extendOwn({},e),function(t){return x.isMatch(t,e)}},x.times=function(e,t,n){var i=Array(Math.max(0,e));t=w(t,n,1);for(var r=0;e>r;r++)i[r]=t(r);return i},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=x.invert(L),R=function(e){var t=function(t){return e[t]},n="(?:"+x.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};x.escape=R(L),x.unescape=R(N),x.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),x.isFunction(i)?i.call(e):i};var A=0;x.uniqueId=function(e){var t=++A+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,D=function(e){return"\\"+F[e]};x.template=function(e,t,n){!t&&n&&(t=n),t=x.defaults({},t,x.templateSettings);var i=RegExp([(t.escape||O).source,(t.interpolate||O).source,(t.evaluate||O).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,i,s,a){return o+=e.slice(r,a).replace(I,D),r=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(e){return s.call(this,e,x)},h=t.variable||"obj";return l.source="function("+h+"){\n"+o+"}",l},x.chain=function(e){var t=x(e);return t._chain=!0,t};var H=function(e,t){return e._chain?x(t).chain():t};x.mixin=function(e){x.each(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),H(this,n.apply(x,e))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],H(this,n)}}),x.each(["concat","join","slice"],function(e){var t=a[e];x.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this)},{}],92:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],93:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],94:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21,"is-function":95}],95:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],96:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],97:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24,"for-each":94,trim:96}],98:[function(e,t){var n,i,r;n=e("msa-colorschemes"),r=e("backbone-thin").Model,t.exports=i=r.extend({defaults:{scheme:"taylor",colorBackground:!0,showLowerCase:!0,opacity:.6},initialize:function(e,t,i){return this.colors=new n({seqs:t,conservation:function(){return i.scale(i.conservation())}}),i.on("reset",function(){return"dyn"===this.getSelectedScheme().type?this.getSelectedScheme().reset():void 0},this)},addStaticScheme:function(e,t){return this.colors.addStaticScheme(e,t)},addDynScheme:function(e,t){return this.colors.addDynScheme(e,t)},getScheme:function(e){return this.colors.getScheme(e)},getSelectedScheme:function(){return this.colors.getScheme(this.get("scheme"))}})},{"backbone-thin":4,"msa-colorschemes":78}],99:[function(e,t){var n,i,r;i=e("backbone-thin").Model,r=e("underscore"),t.exports=n=i.extend({initialize:function(e,t){return null==this.get("hidden")&&this.set("hidden",[]),this.stats=t},calcHiddenColumns:function(e){var t,n,i,r,o;for(t=this.get("hidden"),o=e,i=0,r=t.length;r>i;i++)n=t[i],o>=n&&o++;return o-e}})},{"backbone-thin":4,underscore:91}],100:[function(e,t){var n,i;i=e("backbone-thin").Model,t.exports=n=i.extend({defaults:{registerMouseHover:!1,registerMouseClicks:!0,importProxy:"https://cors-anywhere.herokuapp.com/",eventBus:!0,alphabetSize:20,dropImport:!1,debug:!1,hasRef:!1}})},{"backbone-thin":4}],101:[function(e,t){var n,i,r;n=e("../utils/loader"),i=e("backbone-thin").Model,t.exports=r=i.extend({initialize:function(e){return this.g=e},development:{"msa-tnt":"/node_modules/msa-tnt/build/bundle.js","biojs-io-newick":"/node_modules/biojs-io-newick/build/biojs-io-newick.min.js"},loadPackage:function(t,i){var r;try{return r=e(t),i(r)}catch(o){return n.loadScript(this._pkgURL(t),i)}},loadPackages:function(e,t){var i;return i=n.joinCb(function(){return t()},e.length),e.forEach(function(e){return function(t){return e.loadPackage(t,i)}}(this))},_pkgURL:function(e){var t;return t=this.g.config.get("debug")?this.development[e]:"http://wzrd.in/bundle/"+e+"@latest"}})},{"../utils/loader":132,"backbone-thin":4}],102:[function(e,t){var n,i,r,o,s,a;a=e("underscore"),i=e("backbone-thin").Model,s=i.extend({defaults:{type:"super"}}),o=s.extend({defaults:a.extend({},s.prototype.defaults,{type:"row",seqId:""}),inRow:function(e){return e===this.get("seqId")},inColumn:function(){return!0},getLength:function(){return 1}}),n=s.extend({defaults:a.extend({},s.prototype.defaults,{type:"column",xStart:-1,xEnd:-1}),inRow:function(){return!0},inColumn:function(e){return e>=xStart&&xEnd>=e},getLength:function(){return xEnd-xStart}}),r=o.extend(a.extend({},a.pick(n,"inColumn"),a.pick(n,"getLength"),{defaults:a.extend({},n.prototype.defaults,o.prototype.defaults,{type:"pos"})})),t.exports.sel=s,t.exports.possel=r,t.exports.rowsel=o,t.exports.columnsel=n},{"backbone-thin":4,underscore:91}],103:[function(e,t){var n,i,r,o;o=e("./Selection"),r=e("underscore"),n=e("backbone-thin").Collection,t.exports=i=n.extend({model:o.sel,initialize:function(e,t){return null!=t?(this.g=t.g,this.listenTo(this.g,"residue:click",function(e){return this._handleE(e.evt,new o.possel({xStart:e.rowPos,xEnd:e.rowPos,seqId:e.seqId}))}),this.listenTo(this.g,"row:click",function(e){return this._handleE(e.evt,new o.rowsel({seqId:e.seqId}))}),this.listenTo(this.g,"column:click",function(e){return this._handleE(e.evt,new o.columnsel({xStart:e.rowPos,xEnd:e.rowPos+e.stepSize-1}))})):void 0},getSelForRow:function(e){return this.filter(function(t){return t.inRow(e)})},getSelForColumns:function(e){return this.filter(function(t){return t.inColumn(e)})},addJSON:function(e){return this.add(this._fromJSON(e))},_fromJSON:function(e){switch(e.type){case"column":return new o.columnsel(e);case"row":return new o.rowsel(e);case"pos":return new o.possel(e)}},resetJSON:function(e){return e=r.map(e,this._fromJSON),this.reset(e)},getBlocksForRow:function(e,t){var n,i,r,o,s,a,l,h;for(h=this.filter(function(t){return t.inRow(e)}),n=[],i=0,r=h.length;r>i;i++){if(l=h[i],"row"===l.attributes.type){n=function(){s=[];for(var e=0;t>=0?t>=e:e>=t;t>=0?e++:e--)s.push(e);return s}.apply(this);break}n=n.concat(function(){a=[];for(var e=o=l.attributes.xStart,t=l.attributes.xEnd;t>=o?t>=e:e>=t;t>=o?e++:e--)a.push(e);return a}.apply(this))}return n},getAllColumnBlocks:function(e){var t,n,i,o,s,a,l,h,u;for(s=e.maxLen,u=e.withPos,t=[],n=e.withPos?this.filter(function(e){return null!=e.get("xStart")}):this.filter(function(e){return"column"===e.get("type")}),i=0,o=n.length;o>i;i++)h=n[i],t=t.concat(function(){l=[];for(var e=a=h.attributes.xStart,t=h.attributes.xEnd;t>=a?t>=e:e>=t;t>=a?e++:e--)l.push(e);return l}.apply(this));return t=r.uniq(t)},invertRow:function(e){var t,n,i,s,a,l;for(l=this.where({type:"row"}),l=r.map(l,function(e){return e.attributes.seqId}),i=r.filter(e,function(e){return l.indexOf(e)>=0?!1:!0}),a=[],n=0,s=i.length;s>n;n++)t=i[n],a.push(new o.rowsel({seqId:t}));return this.reset(a)},invertCol:function(e){var t,n,i,s,a,l,h,u;if(l=this.where({type:"column"}),l=r.reduce(l,function(e,t){var n,i;return e.concat(function(){i=[];for(var e=n=t.attributes.xStart,r=t.attributes.xEnd;r>=n?r>=e:e>=r;r>=n?e++:e--)i.push(e);return i}.apply(this))},[]),i=r.filter(e,function(e){return l.indexOf(e)>=0?!1:!0}),0!==i.length){for(a=[],u=h=i[0],n=0,s=i.length;s>n;n++)t=i[n],h+1===t?h=t:(a.push(new o.columnsel({xStart:u,xEnd:h})),u=h=t);return u!==h&&a.push(new o.columnsel({xStart:u,xEnd:i[i.length-1]})),this.reset(a)}},_handleE:function(e,t){return e.ctrlKey||e.metaKey?this.add(t):this.reset([t])},_reduceColumns:function(){return this.each(function(e,t,n){var i,o,s,a,l,h,u,c,d,f,g;for(i=r.filter(n,function(e){return"column"===e.get("type")}),g=e.get("xStart"),f=e.get("xEnd"),l=r.filter(i,function(e){return e.get("xEnd")===g-1}),o=0,h=l.length;h>o;o++)a=l[o],a.set("xEnd",g);for(d=r.filter(i,function(e){return e.get("xStart")===f+1}),s=0,u=d.length;u>s;s++)c=d[s],c.set("xStart",f);return l.length>0||d.length>0?(console.log("removed el"),e.collection.remove(e)):void 0})}})},{"./Selection":102,"backbone-thin":4,underscore:91}],104:[function(e,t){var n,i;i=e("backbone-thin").Model,t.exports=n=i.extend({defaults:{searchText:""}})},{"backbone-thin":4}],105:[function(e,t){var n,i;n=e("backbone-thin").Model,t.exports=i=n.extend({defaults:{searchBox:-10,overviewBox:30,headerBox:-1,alignmentBody:0}})},{"backbone-thin":4}],106:[function(e,t){var n,i;n=e("backbone-thin").Model,t.exports=i=n.extend({defaults:{sequences:!0,markers:!0,metacell:!1,conserv:!1,overviewbox:!1,seqlogo:!1,gapHeader:!1,leftHeader:!0,labels:!0,labelName:!0,labelId:!0,labelPartition:!1,labelCheckbox:!1,metaGaps:!0,metaIdentity:!0,metaLinks:!0},constructor:function(e,t){return this.calcDefaults(t.model),n.apply(this,arguments)},initialize:function(){return this.listenTo(this,"change:metaLinks change:metaIdentity change:metaGaps",function(){return this.trigger("change:metacell")},this),this.listenTo(this,"change:labelName change:labelId change:labelPartition change:labelCheckbox",function(){return this.trigger("change:labels")},this),this.listenTo(this,"change:markers change:conserv change:seqlogo change:gapHeader",function(){return this.trigger("change:header")},this)},calcDefaults:function(e){var t,n;return e.length>0&&(n=e.at(0),t=n.get("ids"),void 0!==t&&0===Object.keys(t).length)?this.defaults.metaLinks=!1:void 0}})},{"backbone-thin":4}],107:[function(e,t){var n,i;n=e("backbone-thin").Model,t.exports=i=n.extend({constructor:function(e,t){return this.calcDefaults(t.model),n.apply(this,arguments),this.g=t.g,this.listenTo(this,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",function(){return this.trigger("change:labelWidth",this.getLabelWidth())},this),this.listenTo(this,"change:metaLinksWidth change:metaIdentWidth change:metaGapWidth",function(){return this.trigger("change:metaWidth",this.getMetaWidth())},this),this},defaults:{alignmentWidth:"auto",alignmentHeight:225,columnWidth:15,rowHeight:15,autoResize:!0,textVisible:!0,labelIdLength:50,labelNameLength:100,labelPartLength:15,labelCheckLength:15,labelFontsize:13,labelLineHeight:"13px",markerFontsize:"10px",stepSize:1,markerStepSize:2,markerHeight:20,residueFont:"13",canvasEventScale:1,boxRectHeight:2,boxRectWidth:2,overviewboxPaddingTop:10,menuFontsize:"14px",menuItemFontsize:"14px",menuItemLineHeight:"14px",menuMarginLeft:"3px",menuPadding:"3px 4px 3px 4px",metaGapWidth:35,metaIdentWidth:40,metaLinksWidth:25,_alignmentScrollLeft:0,_alignmentScrollTop:0},calcDefaults:function(e){var t;return t=e.getMaxLength(),200>t&&e.length<30?this.defaults.boxRectWidth=this.defaults.boxRectHeight=5:void 0},getAlignmentWidth:function(e){return this.get("autoResize")&&void 0!==e?this.get("columnWidth")*e:void 0===this.get("alignmentWidth")||"auto"===this.get("alignmentWidth")||0===this.get("alignmentWidth")?this._adjustWidth():this.get("alignmentWidth")},setLeftOffset:function(e){var t;return t=e,t=Math.max(0,t),t-=this.g.columns.calcHiddenColumns(t),this.set("_alignmentScrollLeft",t*this.get("columnWidth"))},setTopOffset:function(e){var t,n,i,r,o,s;for(s=Math.max(0,e-1),t=0,n=i=0,r=s;r>=i;n=i+=1)o=this.model.at(n),t+=o.attributes.height||1;return this.set("_alignmentScrollTop",t*this.get("rowHeight"))},getLeftBlockWidth:function(){var e;return e=0,this.g.vis.get("labels")&&(e+=this.getLabelWidth()),this.g.vis.get("metacell")&&(e+=this.getMetaWidth()),e},getMetaWidth:function(){var e;return e=0,this.g.vis.get("metaGaps")&&(e+=this.get("metaGapWidth")),this.g.vis.get("metaIdentity")&&(e+=this.get("metaIdentWidth")),this.g.vis.get("metaLinks")&&(e+=this.get("metaLinksWidth")),e},getLabelWidth:function(){var e;return e=0,this.g.vis.get("labelName")&&(e+=this.get("labelNameLength")),this.g.vis.get("labelId")&&(e+=this.get("labelIdLength")),this.g.vis.get("labelPartition")&&(e+=this.get("labelPartLength")),this.g.vis.get("labelCheckbox")&&(e+=this.get("labelCheckLength")),e},_adjustWidth:function(){var e,t,n,i;if(void 0!==this.el&&void 0!==this.model)return n=null!=this.el.parentNode&&0!==this.el.parentNode.offsetWidth?this.el.parentNode.offsetWidth:document.body.clientWidth-35,t=n-this.getLeftBlockWidth(),e=this.getAlignmentWidth(this.model.getMaxLength()-this.g.columns.get("hidden").length),i=Math.min(t,e),i=Math.floor(i/this.get("columnWidth"))*this.get("columnWidth"),this.attributes.alignmentWidth=i},autoResize:function(){return this.get("autoResize")?this._adjustWidth(this.el,this.model):void 0},autoHeight:function(e){var t;return t=this.getMaxAlignmentHeight(),void 0!==e&&e>0&&(t=Math.min(t,e)),this.set("alignmentHeight",t)},setEl:function(e,t){return this.el=e,this.model=t},_checkScrolling:function(e,t){var n,i;return n=e[0],i=e[1],this.set("_alignmentScrollLeft",n,t),this.set("_alignmentScrollTop",i,t)},getMaxAlignmentHeight:function(){var e;return e=0,this.model.each(function(t){return e+=t.attributes.height||1}),e*this.get("rowHeight")},getMaxAlignmentWidth:function(){return this.model.getMaxLength()*this.get("columnWidth")}})},{"backbone-thin":4}],108:[function(e,t){var n;n=e("./msa"),t.exports=function(){var e;return e=function(e){return n.apply(this,e)},e.prototype=n.prototype,new e(arguments)},t.exports.msa=n,t.exports.model=e("./model"),t.exports.menu=e("./menu"),t.exports.utils=e("./utils"),t.exports.selection=e("./g/selection/Selection"),t.exports.selcol=e("./g/selection/SelectionCol"),t.exports.view=e("backbone-viewj"),t.exports.boneView=e("backbone-childs"),t.exports._=e("underscore"),t.exports.$=e("jbone"),t.exports.io={},t.exports.io.xhr=e("xhr"),t.exports.io.fasta=e("biojs-io-fasta"),t.exports.io.clustal=e("biojs-io-clustal"),t.exports.io.gff=e("biojs-io-gff"),t.exports.version="0.2.0"},{"./g/selection/Selection":102,"./g/selection/SelectionCol":103,"./menu":110,"./model":126,"./msa":127,"./utils":131,"backbone-childs":2,"backbone-viewj":9,"biojs-io-clustal":"biojs-io-clustal","biojs-io-fasta":"biojs-io-fasta","biojs-io-gff":"biojs-io-gff",jbone:67,underscore:91,xhr:"xhr"}],109:[function(e,t){var n,i,r,o,s,a,l,h,u,c,d,f;f=e("backbone-childs"),l=e("./views/ImportMenu"),s=e("./views/FilterMenu"),c=e("./views/SelectionMenu"),d=e("./views/VisMenu"),n=e("./views/ColorMenu"),u=e("./views/OrderingMenu"),o=e("./views/ExtraMenu"),r=e("./views/ExportMenu"),a=e("./views/HelpMenu"),i=e("./views/DebugMenu"),t.exports=h=f.extend({initialize:function(e){return this.msa=e.msa,this.addView("20_filter",new s({model:this.msa.seqs,g:this.msa.g})),this.addView("30_selection",new c({model:this.msa.seqs,g:this.msa.g})),this.addView("40_vis",new d({model:this.msa.seqs,g:this.msa.g})),this.addView("50_color",new n({model:this.msa.seqs,g:this.msa.g})),this.addView("60_ordering",new u({model:this.msa.seqs,g:this.msa.g})),this.addView("70_extra",new o({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("80_export",new r({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("90_help",new a({g:this.msa.g})),this.msa.g.config.get("debug")?this.addView("95_debug",new i({g:this.msa.g})):void 0},render:function(){return this.renderSubviews(),this.el.setAttribute("class","smenubar"),this.el.appendChild(document.createElement("p"))}})},{"./views/ColorMenu":112,"./views/DebugMenu":113,"./views/ExportMenu":114,"./views/ExtraMenu":115,"./views/FilterMenu":116,"./views/HelpMenu":117,"./views/ImportMenu":118,"./views/OrderingMenu":119,"./views/SelectionMenu":120,"./views/VisMenu":121,"backbone-childs":2}],110:[function(e,t){t.exports.defaultmenu=e("./defaultmenu"),t.exports.menubuilder=e("./menubuilder")},{"./defaultmenu":109,"./menubuilder":111}],111:[function(e,t){var n,i;i=e("menu-builder"),t.exports=n=i.extend({buildDOM:function(){return this.on("new:node",this.buildNode),this.on("new:button",this.buildButton),this.on("new:menu",this.buildMenu),i.prototype.buildDOM.call(this)},buildNode:function(e){return null!=this.g?e.style.lineHeight=this.g.zoomer.get("menuItemLineHeight"):void 0},buildButton:function(e){return null!=this.g?(e.style.fontSize=this.g.zoomer.get("menuFontsize"),e.style.marginLeft=this.g.zoomer.get("menuMarginLeft"),e.style.padding=this.g.zoomer.get("menuPadding")):void 0},buildMenu:function(e){return null!=this.g?e.style.fontSize=this.g.zoomer.get("menuItemFontsize"):void 0}})},{"menu-builder":69}],112:[function(e,t){var n,i,r,o;i=e("../menubuilder"),r=e("underscore"),o=e("dom-helper"),t.exports=n=i.extend({initialize:function(e){return this.g=e.g,this.el.style.display="inline-block",this.listenTo(this.g.colorscheme,"change",function(){return this.render()})},render:function(){var e,t,n,i,r,s;for(i=this.setName("Color scheme"),this.removeAllNodes(),e=this.getColorschemes(),t=0,n=e.length;n>t;t++)r=e[t],this.addScheme(i,r);return s="Background",s=this.g.colorscheme.get("colorBackground")?"Hide "+s:"Show "+s,this.grey(i),o.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},addScheme:function(e,t){var n,i;return i={},n=this.g.colorscheme.get("scheme"),n===t.id&&(i.backgroundColor="#77ED80"),this.addNode(t.name,function(e){return function(){return e.g.colorscheme.set("scheme",t.id)}}(this),{style:i})},getColorschemes:function(){var e;return e=[],e.push({name:"Zappo",id:"zappo"}),e.push({name:"Taylor",id:"taylor"}),e.push({name:"Hydrophobicity",id:"hydro"}),e.push({name:"MAE",id:"mae"}),e.push({name:"Clustal",id:"clustal"}),e.push({name:"Clustal2",id:"clustal2"}),e.push({name:"Turn",id:"turn"}),e.push({name:"Strand",id:"strand"}),e.push({name:"Buried",id:"buried"}),e.push({name:"Helix",id:"helix"}),e.push({name:"PID",id:"pid"}),e.push({name:"No color",id:"foo"}),e},grey:function(){return }})},{"../menubuilder":111,"dom-helper":66,underscore:91}],113:[function(e,t){var n,i;i=e("../menubuilder"),t.exports=n=i.extend({initialize:function(e){return this.g=e.g,this.el.style.display="inline-block"},render:function(){return this.setName("Debug"),this.addNode("Get the code",function(){return function(){return window.open("https://github.com/greenify/msa")}}(this)),this.addNode("Toggle mouseover events",function(e){return function(){return e.g.config.set("registerMouseHover",!e.g.config.get("registerMouseHover")),e.g.onAll(function(){return console.log(arguments)})}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":111}],114:[function(e,t){var n,i,r,o,s;o=e("../menubuilder"),r=e("biojs-io-fasta").writer,s=e("underscore"),i=e("../../utils/export"),t.exports=n=o.extend({initialize:function(e){return this.g=e.g,this.msa=e.msa,this.el.style.display="inline-block"},render:function(){return this.setName("Export"),this.addNode("View in Jalview",function(e){return function(){var t;return t=e.g.config.get("url"),null==t?alert("Sequence weren't imported via an URL"):t.indexOf("localhost")?i.publishWeb(e.msa,function(t){return i.openInJalview(t,e.g.colorscheme.get("scheme"))}):i.openInJalview(t,e.g.colorscheme.get("scheme"))}}(this)),this.addNode("Export sequences",function(e){return function(){return i.saveAsFile(e.msa,"all.fasta")}}(this)),this.addNode("Export selection",function(e){return function(){return i.saveSelection(e.msa,"selection.fasta")}}(this)),this.addNode("Export image",function(e){return function(){return i.saveAsImg(e.msa,"biojs-msa.png")}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../../utils/export":129,"../menubuilder":111,"biojs-io-fasta":"biojs-io-fasta",underscore:91}],115:[function(e,t){var n,i,r,o,s;r=e("../menubuilder"),o=e("../../model/Sequence"),i=e("../../utils/loader"),s=e("xhr"),t.exports=n=r.extend({initialize:function(e){return this.g=e.g,this.el.style.display="inline-block",this.msa=e.msa},render:function(){var e,t;return this.setName("Extras"),t=this.g.stats,e=this.msa,this.addNode("Add consensus seq",function(e){return function(){var n,i;return n=t.consensus(),i=new o({seq:n,id:"0c",name:"consenus"}),e.model.add(i),e.model.setRef(i),e.model.comparator=function(e){return!e.get("ref")},e.model.sort()}}(this)),this.addNode("Increase font size",function(e){return function(){var t,n,i;return t=e.g.zoomer.get("columnWidth"),n=t+5,e.g.zoomer.set("columnWidth",n),e.g.zoomer.set("rowHeight",n),i=.7*n,e.g.zoomer.set("residueFont",i),e.g.zoomer.set("labelFontSize",i)}}(this)),this.addNode("Decrease font size",function(e){return function(){var t,n,i;return t=e.g.zoomer.get("columnWidth"),n=t-2,e.g.zoomer.set("columnWidth",n),e.g.zoomer.set("rowHeight",n),i=.6*n,e.g.zoomer.set("residueFont",i),e.g.zoomer.set("labelFontSize",i),e.g.zoomer.get("columnWidth")<8?e.g.zoomer.set("textVisible",!1):void 0}}(this)),this.addNode("Jump to a column",function(e){return function(){var t;return t=prompt("Column","20"),0>t||t>e.model.getMaxLength()||isNaN(t)?(alert("invalid column"),void 0):e.g.zoomer.setLeftOffset(t)}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../../model/Sequence":125,"../../utils/loader":132,"../menubuilder":111,xhr:"xhr"}],116:[function(e,t){var n,i,r;i=e("../menubuilder"),r=e("underscore"),t.exports=n=i.extend({initialize:function(e){return this.g=e.g,this.el.style.display="inline-block"},render:function(){return this.setName("Filter"),this.addNode("Hide columns by threshold",function(e){return function(){var t,n,i,r,o,s,a;for(a=prompt("Enter threshold (in percent)",20),a/=100,o=e.model.getMaxLength(),n=[],t=e.g.stats.scale(e.g.stats.conservation()),i=r=0,s=o-1;s>=0?s>=r:r>=s;i=s>=0?++r:--r)t[i]<a&&n.push(i);return e.g.columns.set("hidden",n)}}(this)),this.addNode("Hide columns by selection",function(e){return function(){var t,n;return n=e.g.columns.get("hidden"),t=n.concat(e.g.selcol.getAllColumnBlocks({maxLen:e.model.getMaxLength(),withPos:!0})),e.g.selcol.reset([]),e.g.columns.set("hidden",t)}}(this)),this.addNode("Hide columns by gaps",function(e){return function(){var t,n,i,r,o,s,a,l,h;for(l=prompt("Enter threshold (in percent)",20),l/=100,s=e.model.getMaxLength(),i=[],r=o=0,a=s-1;a>=0?a>=o:o>=a;r=a>=0?++o:--o)n=0,h=0,e.model.each(function(e){return"-"===e.get("seq")[r]&&n++,h++}),t=n/h,t>l&&i.push(r);return e.g.columns.set("hidden",i)}}(this)),this.addNode("Hide seqs by identity",function(e){return function(){var t;return t=prompt("Enter threshold (in percent)",20),t/=100,e.model.each(function(e){return e.get("identity")<t?e.set("hidden",!0):void 0})}}(this)),this.addNode("Hide seqs by selection",function(e){return function(){var t,n;return t=e.g.selcol.where({type:"row"}),n=r.map(t,function(e){return e.get("seqId")}),e.g.selcol.reset([]),e.model.each(function(e){return n.indexOf(e.get("id"))>=0?e.set("hidden",!0):void 0})}}(this)),this.addNode("Hide seqs by gaps",function(e){return function(){var t;return t=prompt("Enter threshold (in percent)",40),e.model.each(function(e){var n,i;return i=e.get("seq"),n=r.reduce(i,function(e,t){return"-"===t&&e++,e},0),n>t?e.set("hidden",!0):void 0})}}(this)),this.addNode("Reset",function(e){return function(){return e.g.columns.set("hidden",[]),e.model.each(function(e){return e.get("hidden")?e.set("hidden",!1):void 0})}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":111,underscore:91}],117:[function(e,t){var n,i;i=e("../menubuilder"),t.exports=n=i.extend({initialize:function(e){return this.g=e.g},render:function(){return this.setName("Help"),this.addNode("About the project",function(){return function(){return window.open("https://github.com/greenify/msa")}}(this)),this.addNode("Report issues",function(){return function(){return window.open("https://github.com/greenify/msa/issues")
}}(this)),this.addNode("User manual",function(){return function(){return window.open("https://github.com/greenify/msa/wiki")}}(this)),this.el.style.display="inline-block",this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":111}],118:[function(e,t){var n,i,r;i=e("../menubuilder"),r=e("koala-js"),t.exports=n=i.extend({initialize:function(e){return this.g=e.g,this.el.style.display="inline-block",this.msa=e.msa},render:function(){var e,t;return e=this.msa,t=r.mk("input"),t.type="file",t.style.display="none",t.multiple=!0,t.addEventListener("change",function(){var n;return n=t.files||[],e.u.file.importFiles(n)}),this.el.appendChild(t),this.setName("Import"),this.addNode("URL",function(e){return function(){var t;return t=prompt("URL","http://rostlab.org/~goldberg/clustalw2-I20140818-215249-0556-53699878-pg.clustalw"),e.msa.u.file.importURL(t,function(){})}}(this)),this.addNode("From file",function(){return function(){return t.click()}}(this)),this.addNode("Drag & Drop",function(){return function(){return alert("Yep. Just drag & drop your file")}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":111,"koala-js":68}],119:[function(e,t){var n,i,r,o;n=e("../menubuilder"),o=e("dom-helper"),r=e("underscore"),t.exports=i=n.extend({initialize:function(e){return this.g=e.g,this.order="ID",this.el.style.display="inline-block"},setOrder:function(e){return this.order=e,this.render()},render:function(){var e,t,n,i,r;for(this.setName("Ordering"),this.removeAllNodes(),e=this.getComparators(),n=0,i=e.length;i>n;n++)r=e[n],this._addNode(r);return t=this.buildDOM(),o.removeAllChilds(this.el),this.el.appendChild(t),this},_addNode:function(e){var t,n;return n=e.text,t={},n===this.order&&(t.backgroundColor="#77ED80"),this.addNode(n,function(t){return function(){return null!=e.precode&&e.precode(),t.model.comparator=e.comparator,t.model.sort(),t.setOrder(e.text)}}(this),{style:t})},getComparators:function(){var e,t;return e=[],e.push({text:"Label",comparator:"name"}),e.push({text:"Label Desc",comparator:function(e,t){return-e.get("name").localeCompare(t.get("name"))}}),e.push({text:"Seq",comparator:"seq"}),e.push({text:"Seq Desc",comparator:function(e,t){return-e.get("seq").localeCompare(t.get("seq"))}}),t=function(e){return function(){return e.ident=e.g.stats.identity()}}(this),e.push({text:"Identity",comparator:function(e){return function(t,n){var i;return i=e.ident[t.id]-e.ident[n.id],i>0?1:0>i?-1:0}}(this),precode:t}),e.push({text:"Identity Desc",comparator:function(e){return function(t,n){var i;return i=e.ident[t.id]-e.ident[n.id],i>0?-1:0>i?1:0}}(this),precode:t}),e}})},{"../menubuilder":111,"dom-helper":66,underscore:91}],120:[function(e,t){var n,i;n=e("../menubuilder"),t.exports=i=n.extend({initialize:function(e){return this.g=e.g,this.el.style.display="inline-block"},render:function(){return this.setName("Selection"),this.addNode("Find Motif (String Search)",function(e){return function(){var t;return t=prompt("your search","D"),e.g.user.set("searchText",t)}}(this)),this.addNode("Invert columns",function(e){return function(){var t;return e.g.selcol.invertCol(function(){t=[];for(var n=0,i=e.model.getMaxLength();i>=0?i>=n:n>=i;i>=0?n++:n--)t.push(n);return t}.apply(this))}}(this)),this.addNode("Invert rows",function(e){return function(){return e.g.selcol.invertRow(e.model.pluck("id"))}}(this)),this.addNode("Reset",function(e){return function(){return e.g.selcol.reset()}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":111}],121:[function(e,t){var n,i,r;n=e("../menubuilder"),r=e("dom-helper"),t.exports=i=n.extend({initialize:function(e){return this.g=e.g,this.el.style.display="inline-block",this.listenTo(this.g.vis,"change",this.render)},render:function(){var e,t,n,i;for(this.removeAllNodes(),this.setName("Vis.elements"),i=this.getVisElements(),e=0,t=i.length;t>e;e++)n=i[e],this._addVisEl(n);return r.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},_addVisEl:function(e){var t,n;return n={},this.g.vis.get(e.id)?(t="Hide ",n.color="red"):(t="Show ",n.color="green"),this.addNode(t+e.name,function(t){return function(){return t.g.vis.set(e.id,!t.g.vis.get(e.id))}}(this),{style:n})},getVisElements:function(){var e;return e=[],e.push({name:"Markers",id:"markers"}),e.push({name:"Conserv",id:"conserv"}),e.push({name:"Seq. logo",id:"seqlogo"}),e.push({name:"Gap Header",id:"gapHeader"}),e}})},{"../menubuilder":111,"dom-helper":66}],122:[function(e,t){var n,i;n=e("./Feature"),i=e("backbone-thin").Model,t.exports=n=i.extend({defaults:{xStart:-1,xEnd:-1,height:-1,text:"",fillColor:"red",fillOpacity:.5,type:"rectangle",borderSize:1,borderColor:"black",borderOpacity:.5,validate:!0,row:0},initialize:function(e){return null!=e.start&&this.set("xStart",e.start),null!=e.end&&this.set("xEnd",e.end),null!=e.attributes&&(null!=e.attributes.Name&&this.set("text",e.attributes.Name),null!=e.attributes.Color&&this.set("fillColor",e.attributes.Color)),this.attributes.xEnd<this.attributes.xStart&&console.warn("invalid feature range for",this.attributes),_.isNumber(this.attributes.xStart)&&_.isNumber(this.attributes.xEnd)?void 0:(console.warn("please provide numeric feature ranges",e),this.set("xStart",parseInt(this.attributes.xStart)),this.set("xEnd",parseInt(this.attributes.xEnd)))},validate:function(){return isNaN(this.attributes.xStart||isNaN(this.attributes.xEnd))?"features need integer start and end.":void 0},contains:function(e){return this.attributes.xStart<=e&&e<=this.attributes.xEnd}})},{"./Feature":122,"backbone-thin":4}],123:[function(e,t){var n,i,r,o;i=e("./Feature"),n=e("backbone-thin").Collection,o=e("underscore"),t.exports=r=n.extend({model:i,constructor:function(){return this.startOnCache=[],this.on("all",function(){return this.startOnCache=[]},this),n.apply(this,arguments)},startOn:function(e){return null==this.startOnCache[e]&&(this.startOnCache[e]=this.where({xStart:e})),this.startOnCache[e]},contains:function(e){return this.reduce(function(t,n){return n||t.contains(e)},!1)},getFeatureOnRow:function(e,t){return this.filter(function(n){return n.get("row")===e&&n.get("xStart")<=t&&t<=n.get("xEnd")})},assignRows:function(){var e,t,n;return e=this.max(function(e){return e.get("xEnd")}).attributes.xEnd,t=function(){var t,i,r;for(r=[],n=t=0,i=e;i>=0?i>=t:t>=i;n=i>=0?++t:--t)r.push(0);return r}(),this.each(function(e){var i,r,o,s;for(r=0,n=i=o=e.get("xStart"),s=e.get("xEnd");s>=i;n=i+=1)t[n]>r&&(r=t[n]),t[n]++;return e.set("row",r)}),o.max(t)},getCurrentHeight:function(){return this.max(function(e){return e.get("row")}).attributes.row+1},getMinRows:function(){var e,t,n;return e=this.max(function(e){return e.get("xEnd")}).attributes.xEnd,t=function(){var t,i,r;for(r=[],n=t=0,i=e;i>=0?i>=t:t>=i;n=i>=0?++t:--t)r.push(0);return r}(),this.each(function(e){var i,r,o,s;for(s=[],n=i=r=e.get("xStart"),o=e.get("xEnd");o>=i;n=i+=1)s.push(t[n]++);return s}),o.max(t)}})},{"./Feature":122,"backbone-thin":4,underscore:91}],124:[function(e,t){var n,i,r,o;o=e("./Sequence"),i=e("./FeatureCol"),n=e("backbone-thin").Collection,t.exports=r=n.extend({model:o,constructor:function(e,t){return n.apply(this,arguments),this.g=t,this.on("add reset remove",function(e){return function(){return e.lengthCache=null,e._bindSeqsWithFeatures()}}(this),this),this.on("reset",function(e){return function(){return e._autoSetRefSeq()}}(this)),this._autoSetRefSeq(),this.lengthCache=null,this.features={},this},getMaxLength:function(){return 0===this.models.length?0:(null===this.lengthCache&&(this.lengthCache=this.max(function(e){return e.get("seq").length}).get("seq").length),this.lengthCache)},prev:function(e,t){var n;return n=this.indexOf(e)-1,0>n&&t&&(n=this.length-1),this.at(n)},next:function(e,t){var n;return n=this.indexOf(e)+1,n===this.length&&t&&(n=0),this.at(n)},calcHiddenSeqs:function(e){var t,n,i,r;for(i=e,t=n=0,r=i;r>=0?r>=n:n>=r;t=r>=0?++n:--n)this.at(t).get("hidden")&&i++;return i-e},addFeatures:function(e){var t,n;return null!=e.config&&(n=e,e=e.seqs,null!=n.config.colors&&(t=n.config.colors,_.each(e,function(e){return _.each(e,function(e){return null!=t[e.feature]?e.fillColor=t[e.feature]:void 0})}))),_.isEmpty(this.features)?this.features=e:_.each(e,function(e){return function(t,n){return e.features[n]=e.features.hasOwnProperty(n)?_.union(e.features[n],t):t}}(this)),this._bindSeqsWithFeatures()},_bindSeqWithFeatures:function(e){var t;return t=this.features[e.attributes.name],t?(e.set("features",new i(t)),e.attributes.features.assignRows(),e.set("height",e.attributes.features.getCurrentHeight()+1)):void 0},_bindSeqsWithFeatures:function(){return this.each(function(e){return function(t){return e._bindSeqWithFeatures(t)}}(this))},removeAllFeatures:function(){return delete this.features},_autoSetRefSeq:function(){return this.length>0?this.at(0).set("ref",!0):void 0},setRef:function(e){var t;return t=this.get(e),this.each(function(n){return e.cid?t.cid===n.cid?n.set("ref",!0):n.set("ref",!1):void 0}),this.g.config.set("hasRef",!0),this.trigger("change:reference",e)}})},{"./FeatureCol":123,"./Sequence":125,"backbone-thin":4}],125:[function(e,t){var n,i,r;i=e("backbone-thin").Model,n=e("./FeatureCol"),t.exports=r=i.extend({defaults:{name:"",id:"",seq:"",height:1,ref:!1},initialize:function(){return this.set("grey",[]),null==this.get("features")?this.set("features",new n):void 0}})},{"./FeatureCol":123,"backbone-thin":4}],126:[function(e,t){t.exports.seq=e("./Sequence"),t.exports.seqcol=e("./SeqCollection"),t.exports.feature=e("./Feature"),t.exports.featurecol=e("./FeatureCol")},{"./Feature":122,"./FeatureCol":123,"./SeqCollection":124,"./Sequence":125}],127:[function(e,t){var n,i,r,o,s,a,l,h,u,c,d,f,g,m,p,v,b,x;c=e("./model/SeqCollection"),i=e("./g/colorscheme"),r=e("./g/columns"),o=e("./g/config"),l=e("./g/package"),u=e("./g/selection/SelectionCol"),m=e("./g/user"),v=e("./g/visibility"),p=e("./g/visOrdering"),b=e("./g/zoomer"),x=e("backbone-childs"),s=e("biojs-events"),d=e("./views/Stage"),f=e("stat.seqs"),n=e("jbone"),a=e("./utils/file"),g=e("./utils/tree"),h=e("./utils/proxy"),t.exports=x.extend({initialize:function(e){var t,x,w,y,_,S;return null==e&&(e={}),null==e.colorscheme&&(e.colorscheme={}),null==e.columns&&(e.columns={}),null==e.conf&&(e.conf={}),null==e.vis&&(e.vis={}),null==e.zoomer&&((null!=(_=e.visorder)?_:e.zoomer={})||(e.visorder={})),this.g=s.mixin({}),this.seqs=new c(e.seqs,this.g),this.g.config=new o(e.conf),this.g["package"]=new l(this.g),this.g.selcol=new u([],{g:this.g}),this.g.user=new m,this.g.vis=new v(e.vis,{model:this.seqs}),this.g.visorder=new p(e.visorder),this.g.zoomer=new b(e.zoomer,{g:this.g,model:this.seqs}),"localhost"===window.location.hostname&&this.g.config.set("debug",!0),y=this.seqs.pluck("seq"),this.g.stats=new f(this.seqs),this.g.stats.alphabetSize=this.g.config.get("alphabetSize"),this.g.columns=new r(e.columns,this.g.stats),this.g.colorscheme=new i(e.colorscheme,y,this.g.stats),this.g.zoomer.setEl(this.el,this.seqs),this.addView("stage",new d({model:this.seqs,g:this.g})),this.el.setAttribute("class","biojs_msa_div"),this.u={},this.u.file=new a(this),this.u.proxy=new h({g:this.g}),this.u.tree=new g(this),this.g.config.get("eventBus")===!0&&this.startEventBus(),this.g.config.get("dropImport")&&(x={dragover:this.dragOver,drop:this.dropFile},this.delegateEvents(x)),e.importURL&&this.u.file.importURL(e.importURL,function(e){return function(){return e.render()}}(this)),e.bootstrapMenu&&(w=document.createElement("div"),S=document.createElement("div"),this.el.parentNode?(this.el.parentNode.replaceChild(S,this.el),S.appendChild(w),S.appendChild(this.el)):(S.appendChild(w),S.appendChild(this.el)),t=new msa.menu.defaultmenu({el:w,msa:this}),t.render()),n(window).on("resize",function(e){return function(){var t;return t=function(){return this.g.zoomer.autoResize()},setTimeout(t.bind(e),5)}}(this))},dragOver:function(e){return e.preventDefault(),e.target.className="hover",!1},dropFile:function(e){var t;return e.preventDefault(),t=e.target.files||e.dataTransfer.files,this.u.file.importFiles(t),!1},startEventBus:function(){var e,t,n,i,r;for(e=["config","columns","colorscheme","selcol","vis","visorder","zoomer"],r=[],t=0,i=e.length;i>t;t++)n=e[t],r.push(this._proxyToG(n));return r},_proxyToG:function(e){return this.listenTo(this.g[e],"all",function(t,n,i,r){return"change"!==t?null!=r?this.g.trigger(e+":"+t,i,n,r):this.g.trigger(e+":"+t,i,n):void 0})},render:function(){return(void 0===this.seqs||0===this.seqs.length)&&console.log("warning. empty seqs."),this.renderSubviews(),this.g.vis.set("loaded",!0),this}})},{"./g/colorscheme":98,"./g/columns":99,"./g/config":100,"./g/package":101,"./g/selection/SelectionCol":103,"./g/user":104,"./g/visOrdering":105,"./g/visibility":106,"./g/zoomer":107,"./model/SeqCollection":124,"./utils/file":130,"./utils/proxy":133,"./utils/tree":136,"./views/Stage":140,"backbone-childs":2,"biojs-events":13,jbone:67,"stat.seqs":90}],128:[function(e,t){var n;t.exports=n=function(){function e(){}return e.randomInt=function(e,t){var n,i;return null==t&&(n=[0,e],e=n[0],t=n[1]),e>t&&(i=[t,e],e=i[0],t=i[1]),Math.floor(Math.random()*(t-e+1)+e)},e.uniqueId=function(e){var t;for(null==e&&(e=8),t="";t.length<e;)t+=Math.random().toString(36).substr(2);return t.substr(0,e)},e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e}()},{}],129:[function(e,t){var n,i,r,o,s,a,l;i=e("biojs-io-fasta"),r=e("biojs-io-gff"),l=e("xhr"),s=e("blueimp_canvastoblob"),a=e("browser-saveas"),o=e("underscore"),t.exports=n={openInJalview:function(e,t){var n,i;return"."===e.charAt(0)&&(e=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+e),e.indexOf("http")<0&&(n="http://"+window.location.hostname,e=n+e),e=encodeURIComponent(e),i="http://www.jalview.org/services/launchApp?open="+e,i+="&colour="+t,window.open(i,"_blank")},publishWeb:function(e,t){var n,r;return n=i.write(e.seqs.toJSON()),n=encodeURIComponent(n),r=e.u.proxy.corsURL("http://sprunge.biojs.net"),l({method:"POST",body:"sprunge="+n,uri:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(e,n,i){var r;return r=i.trim(),t(r)})},shareLink:function(e,t){var i,r,o;return o=e.g.config.get("importURL"),r="http://biojs-msa.org/app/?seq=",i=function(e){var n;return n=r+e,t?t(n):void 0},o?i(o):n.publishWeb(e,i)},saveAsFile:function(e,t){var n,r;return r=i.write(e.seqs.toJSON()),n=new Blob([r],{type:"text/plain"}),a(n,t)},saveSelection:function(e,t){var n,r,s,l,h,u;if(h=e.g.selcol.pluck("seqId"),console.log(h),h.length>0)for(h=e.seqs.filter(function(e){return o.contains(h,e.get("id"))}),r=s=0,l=h.length-1;l>=s;r=s+=1)h[r]=h[r].toJSON();else h=e.seqs.toJSON(),console.warn("no selection found");return u=i.write(h),n=new Blob([u],{type:"text/plain"}),a(n,t)},saveAnnots:function(e,t){var n,i,s;return i=e.seqs.map(function(e){var t;return i=e.get("features"),0!==i.length?(t=e.get("name"),i.each(function(e){return e.set("seqname",t)}),i.toJSON()):void 0}),i=o.flatten(o.compact(i)),console.log(i),s=r.exportLines(i),n=new Blob([s],{type:"text/plain"}),a(n,t)},saveAsImg:function(e,t){var n,i;return n=e.getView("stage").getView("body").getView("seqblock").el,null!=n?(i=n.toDataURL("image/png"),a(s(i),t,"image/png")):void 0}}},{"biojs-io-fasta":"biojs-io-fasta","biojs-io-gff":"biojs-io-gff",blueimp_canvastoblob:62,"browser-saveas":63,underscore:91,xhr:"xhr"}],130:[function(e,t){var n,i,r,o,s,a,l;i=e("biojs-io-fasta"),n=e("biojs-io-clustal"),o=e("biojs-io-gff"),s=e("underscore"),l=e("xhr"),t.exports=r=function(e){return this.msa=e,this},a={guessFileType:function(e){var t;switch(e=e.split("."),t=e[e.length(-1)]){case"aln":case"clustal":return n;case"fasta":return i;default:return i}},guessFileFromText:function(e){var t,r;return null==e?(console.warn("invalid file format"),["","error"]):("CLUSTAL"===e.substring(0,7)?(t=n,r="seqs"):">"===e.substring(0,1)?(t=i,r="seqs"):"("===e.substring(0,1)?r="newick":(t=o,r="features"),[t,r])},parseText:function(e){var t,n,i,r,o;return i=this.guessFileFromText(e),n=i[0],o=i[1],"seqs"===o?(r=n.parse(e),[r,o]):"features"===o?(t=n.parseSeqs(e),[t,o]):[e,o]},importFiles:function(e){var t,n,i,r,o,s;for(s=[],n=i=0,o=e.length-1;o>=i;n=i+=1)t=e[n],r=new FileReader,r.onload=function(e){return function(t){return e.importFile(t.target.result)}}(this),s.push(r.readAsText(t));return s},importFile:function(e){var t,n,i,r;return i=this.parseText(e),n=i[0],r=i[1],"error"===r?"error":("seqs"===r?(this.msa.seqs.reset(n),this.msa.g.config.set("url","userimport"),this.msa.g.trigger("url:userImport")):"features"===r?this.msa.seqs.addFeatures(n):"newick"===r&&this.msa.u.tree.loadTree(function(t){return function(){return t.msa.u.tree.showTree(e)}}(this)),t=e.name)},importURL:function(e,t){return e=this.msa.u.proxy.corsURL(e),this.msa.g.config.set("url",e),l(e,function(n){return function(i,r,o){var s;if(i)return console.log(i);if(s=n.importFile(o),"error"!==s)return n.msa.g.trigger("import:url",e),t?t():void 0}}(this))}},s.extend(r.prototype,a)},{"biojs-io-clustal":"biojs-io-clustal","biojs-io-fasta":"biojs-io-fasta","biojs-io-gff":"biojs-io-gff",underscore:91,xhr:"xhr"}],131:[function(e,t){t.exports.bmath=e("./bmath"),t.exports.proxy=e("./proxy"),t.exports.seqgen=e("./seqgen"),t.exports.file=e("./file"),t.exports["export"]=e("./export")},{"./bmath":128,"./export":129,"./file":130,"./proxy":133,"./seqgen":134}],132:[function(e,t){var n,i,r=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("koala-js"),t.exports=i={loadScript:function(e,t){var i,r;return i=n.mk("script"),i.type="text/javascript",i.src=e,i.async=!0,i.onload=i.onreadystatechange=function(){var e;return e||this.readyState&&"complete"!==this.readyState?void 0:(e=!0,t())},r=document.getElementsByTagName("script")[0],r.parentNode.appendChild(i)},joinCb:function(e,t,n){var i,o,s;return t=t||1,o=0,i=function(e,t){return null==e?s():function(){return r.call(e,"apply")>=0&&e.apply(t,arguments),s()}},s=function(){return o++,o===t?e.call(n):void 0},i}}},{"koala-js":68}],133:[function(e,t){var n,i,r;i=e("underscore"),t.exports=n=function(e){return this.g=e.g,this},r={corsURL:function(e){return document.URL.indexOf("localhost")>=0&&"/"===e[0]?e:"."===e.charAt(0)||"/"===e.charAt(0)?e:(e=e.replace("www.",""),e=e.replace("http://",""),e=this.g.config.get("importProxy")+e)}},i.extend(n.prototype,r)},{underscore:91}],134:[function(e,t){var n,i,r,o;i=e("biojs-model").seq,n=e("./bmath"),r=e("stat.seqs"),o=t.exports={_generateSequence:function(e){var t,n,i,r;for(r="",t=n=0,i=e-1;i>=n;t=n+=1)r+=o.getRandomChar();return r},getDummySequences:function(e,t){var r,s,a,l;for(l=[],null==e&&(e=n.getRandomInt(3,5)),null==t&&(t=n.getRandomInt(50,200)),r=s=1,a=e;a>=s;r=s+=1)l.push(new i(o._generateSequence(t),"seq"+r,"r"+r));return l},getRandomChar:function(e){var t;return t=e||"ABCDEFGHIJKLMNOPQRSTUVWXYZ",t.charAt(Math.floor(Math.random()*t.length))},genConservedSequences:function(e,t,s){var a,l,h,u,c,d,f,g,m,p,v,b,x,w,y,_,S,k;for(S=[],null==e&&(e=n.getRandomInt(3,5)),null==t&&(t=n.getRandomInt(50,200)),s=s||"ACDEFGHIKLMNPQRSTVWY---",c=f=1,x=e;x>=f;c=f+=1)S[c-1]="";for(k=.2,h=1,c=g=0,w=t-1;w>=g;c=g+=1)for(c%3===0&&(h=n.getRandomInt(50,100)/100),v=[],d=m=0,y=e-1;y>=m;d=m+=1){for(u=0;100>u&&(a=o.getRandomChar(s),l=r(v),l.addSeq(a),u++,!(Math.abs(h-l.scale(l.conservation())[0])<k)););S[d]+=a,v.push(a)}for(b=[],c=p=1,_=e;_>=p;c=p+=1)b.push(new i(S[c-1],"seq"+c,"r"+c));return b}}},{"./bmath":128,"biojs-model":45,"stat.seqs":90}],135:[function(e,t){var n,i,r,o,s,a;a="http://www.w3.org/2000/svg",s=function(e,t){var n,i;for(n in t)i=t[n],e.setAttributeNS(null,n,i);return e},n=function(e){var t;return t=document.createElementNS(a,"svg"),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t},o=function(e){var t;return t=document.createElementNS(a,"rect"),s(t,e)},i=function(e){var t;return t=document.createElementNS(a,"line"),s(t,e)},r=function(e){var t;return t=document.createElementNS(a,"polygon"),s(t,e)},t.exports.rect=o,t.exports.line=i,t.exports.polygon=r,t.exports.base=n},{}],136:[function(e,t){var n,i,r;n=e("underscore"),t.exports=r=function(e){return this.msa=e,this},i={loadTree:function(e){return this.msa.g["package"].loadPackages(["msa-tnt","biojs-io-newick"],e)},showTree:function(e){var t,n,i,r,o,s,a;return n=this.require("biojs-io-newick"),i="string"==typeof e?n.parse_newick(e):e,t=this.require("msa-tnt"),o=new t.selections,a=document.createElement("div"),document.body.appendChild(a),console.log(this.msa.seqs.models),console.log(i),r=t.app({seqs:this.msa.seqs.models,tree:i}),console.log("nodes",r),s=new t.adapters.tree({model:r,el:a,sel:o}),a.style.width="500px"},require:function(t){return e(t)}},n.extend(r.prototype,i)},{underscore:91}],137:[function(e,t){var n,i,r;r=e("backbone-childs"),i=e("./canvas/CanvasSeqBlock"),n=e("./labels/LabelBlock"),t.exports=r.extend({initialize:function(e){var t,r;return this.g=e.g,t=new n({model:this.model,g:this.g}),t.ordering=-1,this.addView("labelblock",t),this.g.vis.get("sequences")&&(r=new i({model:this.model,g:this.g}),r.ordering=0,this.addView("seqblock",r)),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.adjustHeight),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.adjustWidth),this.listenTo(this.g.columns,"change:hidden",this.adjustHeight)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_albody",this.el.style.whiteSpace="nowrap",this.adjustHeight(),this.adjustWidth(),this},adjustHeight:function(){return this.el.style.height="auto"===this.g.zoomer.get("alignmentHeight")?this.g.zoomer.get("rowHeight")*this.model.length+5:this.g.zoomer.get("alignmentHeight")},adjustWidth:function(){return this.el.style.width=this.getWidth()},getWidth:function(){var e;return e=0,e+=this.g.zoomer.getLeftBlockWidth(),this.g.vis.get("sequences")&&(e+=this.g.zoomer.get("alignmentWidth")),e}})},{"./canvas/CanvasSeqBlock":144,"./labels/LabelBlock":153,"backbone-childs":2}],138:[function(e,t){var n,i,r,o,s,a;a=e("backbone-viewj"),o=e("mouse-pos"),s=e("../g/selection/Selection"),r=e("jbone"),i=e("underscore"),t.exports=n=a.extend({className:"biojs_msa_overviewbox",tagName:"canvas",initialize:function(e){return this.g=e.g,this.listenTo(this.g.zoomer,"change:boxRectWidth change:boxRectHeight change:overviewboxPaddingTop",this.render),this.listenTo(this.g.selcol,"add reset change",this.render),this.listenTo(this.g.columns,"change:hidden",this.render),this.listenTo(this.g.colorscheme,"change:showLowerCase",this.render),this.listenTo(this.model,"change",i.debounce(this.render,5)),this.color=this.g.colorscheme.getSelectedScheme(),this.listenTo(this.g.colorscheme,"change:scheme",function(){return this.color=this.g.colorscheme.getSelectedScheme(),this.render()}),this.dragStart=[]},events:{click:"_onclick",mousedown:"_onmousedown"},render:function(){var e,t,n,i,r,o,s,a,l,h,u,c,d,f,g;for(this._createCanvas(),this.el.textContent="overview",this.el.style.marginTop=this.g.zoomer.get("overviewboxPaddingTop"),this.ctx.fillStyle="#999999",this.ctx.fillRect(0,0,this.el.width,this.el.height),l=this.g.zoomer.get("boxRectWidth"),a=this.g.zoomer.get("boxRectHeight"),n=this.g.columns.get("hidden"),d=this.g.colorscheme.get("showLowerCase"),g=-a,i=o=0,h=this.model.length-1;h>=o;i=o+=1)if(c=this.model.at(i).get("seq"),f=0,g+=a,this.model.at(i).get("hidden"))console.log(this.model.at(i).get("hidden")),this.ctx.fillStyle="grey",this.ctx.fillRect(0,g,c.length*l,a);else for(r=s=0,u=c.length-1;u>=s;r=s+=1)e=c[r],d&&(e=e.toUpperCase()),t=this.color.getColor(e,{pos:r}),n.indexOf(r)>=0&&(t="grey"),null!=t&&(this.ctx.fillStyle=t,this.ctx.fillRect(f,g,l,a)),f+=l;return this._drawSelection()},_drawSelection:function(){var e,t,n,i,r,o,s,a,l;if(!(this.dragStart.length>0)||this.prolongSelection){for(o=this.g.zoomer.get("boxRectWidth"),r=this.g.zoomer.get("boxRectHeight"),n=r*this.model.length,this.ctx.fillStyle="#ffff00",this.ctx.globalAlpha=.9,e=t=0,s=this.g.selcol.length-1;s>=t;e=t+=1)a=this.g.selcol.at(e),"column"===a.get("type")?this.ctx.fillRect(o*a.get("xStart"),0,o*(a.get("xEnd")-a.get("xStart")+1),n):"row"===a.get("type")?(l=this.model.filter(function(e){return e.get("id")===a.get("seqId")})[0],i=this.model.indexOf(l),this.ctx.fillRect(0,r*i,o*l.get("seq").length,r)):"pos"===a.get("type")&&(l=this.model.filter(function(e){return e.get("id")===a.get("seqId")})[0],i=this.model.indexOf(l),this.ctx.fillRect(o*a.get("xStart"),r*i,o*(a.get("xEnd")-a.get("xStart")+1),r));return this.ctx.globalAlpha=1}},_onclick:function(e){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:e})})},_onmousemove:function(e){var t;if(0!==this.dragStart.length)return this.render(),this.ctx.fillStyle="#ffff00",this.ctx.globalAlpha=.9,t=this._calcSelection(o.abs(e)),this.ctx.fillRect(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0]),e.preventDefault(),e.stopPropagation()},_onmousedown:function(e){return this.dragStart=o.abs(e),this.dragStartRel=o.rel(e),this.prolongSelection=e.ctrlKey||e.metaKey?!0:!1,r(document.body).on("mousemove.overmove",function(e){return function(t){return e._onmousemove(t)}}(this)),r(document.body).on("mouseup.overup",function(e){return function(t){return e._onmouseup(t)}}(this)),this.dragStart},_calcSelection:function(e){var t,n,i,r,o;for(t=[e[0]-this.dragStart[0],e[1]-this.dragStart[1]],n=i=0;1>=i;n=i+=1)t[n]=this.dragStartRel[n]+t[n];for(o=[[this.dragStartRel[0],t[0]],[this.dragStartRel[1],t[1]]],n=r=0;1>=r;n=r+=1)o[n][1]<o[n][0]&&(o[n]=[o[n][1],o[n][0]]),o[n][0]=Math.max(o[n][0],0);return o},_endSelection:function(e){var t,n,i,o,a,l,h,u,c,d;if(r(document.body).off(".overmove"),r(document.body).off(".overup"),0!==this.dragStart.length){for(h=this._calcSelection(e),n=o=0;1>=o;n=++o)h[0][n]=Math.floor(h[0][n]/this.g.zoomer.get("boxRectWidth"));for(n=a=0;1>=a;n=++a)h[1][n]=Math.floor(h[1][n]/this.g.zoomer.get("boxRectHeight"));for(h[0][1]=Math.min(this.model.getMaxLength()-1,h[0][1]),h[1][1]=Math.min(this.model.length-1,h[1][1]),d=[],i=l=u=h[1][0],c=h[1][1];c>=l;i=l+=1)t={seqId:this.model.at(i).get("id"),xStart:h[0][0],xEnd:h[0][1]},d.push(new s.possel(t));return this.dragStart=[],this.prolongSelection?this.g.selcol.add(d):this.g.selcol.reset(d),this.g.zoomer.setLeftOffset(h[0][0]),this.g.zoomer.setTopOffset(h[1][0])}},_onmouseup:function(e){return this._endSelection(o.abs(e))},_onmouseout:function(e){return this._endSelection(o.abs(e))},_createCanvas:function(){var e,t;return t=this.g.zoomer.get("boxRectWidth"),e=this.g.zoomer.get("boxRectHeight"),this.el.height=this.model.length*e,this.el.width=this.model.getMaxLength()*t,this.ctx=this.el.getContext("2d"),this.el.style.overflow="scroll",this.el.style.cursor="crosshair"}})},{"../g/selection/Selection":102,"backbone-viewj":9,jbone:67,"mouse-pos":71,underscore:91}],139:[function(e,t){var n,i,r,o,s;i=e("backbone-childs"),n=e("underscore"),o=e("koala-js"),r=e("dom-helper"),s=e("../g/selection/Selection"),t.exports=i.extend({initialize:function(e){return this.g=e.g,this.listenTo(this.g.user,"change:searchText",function(e,t){return this.search(t),this.render()}),this.sel=[],this.selPos=0},events:{scroll:"_sendScrollEvent"},render:function(){var e;return this.renderSubviews(),this.el.className="biojs_msa_searchresult",e=this.g.user.get("searchText"),null!=e&&e.length>0&&(0===this.sel.length?this.el.textContent="no selection found":(this.resultBox=o.mk("div"),this.resultBox.className="biojs_msa_searchresult_ovbox",this.updateResult(),this.el.appendChild(this.resultBox),this.el.appendChild(this.buildBtns()))),this},updateResult:function(){var e,t;return t="search pattern: "+this.g.user.get("searchText"),t+=", selection: "+(this.selPos+1),e=this.sel[this.selPos],t+=" (",t+=e.get("xStart")+" - "+e.get("xEnd"),t+=", id: "+e.get("seqId"),t+=")",this.resultBox.textContent=t},buildBtns:function(){var e,t,n,i;return n=o.mk("button"),n.textContent="Prev",n.addEventListener("click",function(e){return function(){return e.moveSel(-1)}}(this)),t=o.mk("button"),t.textContent="Next",t.addEventListener("click",function(e){return function(){return e.moveSel(1)}}(this)),e=o.mk("button"),e.textContent="All",e.addEventListener("click",function(e){return function(){return e.g.selcol.reset(e.sel)}}(this)),i=o.mk("div"),i.appendChild(n),i.appendChild(t),i.appendChild(e),i.className="biojs_msa_searchresult_row",i},moveSel:function(e){var t;return t=this.selPos+e,0>t||t>=this.sel.length?-1:(this.focus(t),this.selPos=t,this.updateResult())},focus:function(e){var t,n;return n=this.sel[e],t=n.get("xStart"),this.g.zoomer.setLeftOffset(t),this.g.selcol.reset([n])},search:function(e){var t,n,i,r;return r=new RegExp(e,"gi"),n=[],t=i=100042,this.model.each(function(e){var i,o,a,l,h;for(h=e.get("seq"),l=[];a=r.exec(h);)o=a.index,i={xStart:o,xEnd:o+a[0].length-1,seqId:e.get("id")},n.push(new s.possel(i)),l.push(t=Math.min(o,t));return l}),this.g.selcol.reset(n),t===i&&(t=0),this.g.zoomer.setLeftOffset(t),this.sel=n}})},{"../g/selection/Selection":102,"backbone-childs":2,"dom-helper":66,"koala-js":68,underscore:91}],140:[function(e,t){var n,i,r,o,s,a;a=e("backbone-childs"),n=e("./AlignmentBody"),i=e("./header/HeaderBlock"),r=e("./OverviewBox"),o=e("./Search"),s=e("underscore"),t.exports=a.extend({initialize:function(e){return this.g=e.g,this.draw(),this.listenTo(this.g.stats,"reset",function(){return this.rerender()}),this.listenTo(this.model,"change:hidden",s.debounce(this.rerender,10)),this.listenTo(this.model,"sort",this.rerender),this.listenTo(this.model,"add",function(){return console.log("seq add")}),this.listenTo(this.g.vis,"change:sequences",this.rerender),this.listenTo(this.g.vis,"change:overviewbox",this.rerender),this.listenTo(this.g.visorder,"change",this.rerender)},draw:function(){var e,t,s,a;return this.removeViews(),this.g.vis.get("overviewbox")&&(s=new r({model:this.model,g:this.g}),s.ordering=this.g.visorder.get("overviewBox"),this.addView("overviewBox",s)),t=new i({model:this.model,g:this.g}),t.ordering=this.g.visorder.get("headerBox"),this.addView("headerBox",t),a=new o({model:this.model,g:this.g}),a.ordering=this.g.visorder.get("searchBox"),this.addView("searchbox",a),e=new n({model:this.model,g:this.g}),e.ordering=this.g.visorder.get("alignmentBody"),this.addView("body",e)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_stage",this},rerender:function(){return this.draw(),this.render()}})},{"./AlignmentBody":137,"./OverviewBox":138,"./Search":139,"./header/HeaderBlock":148,"backbone-childs":2,underscore:91}],141:[function(e,t){var n,i;i=e("biojs-events"),t.exports=n=function(){function e(e){this.g=e,this.cache={},this.cacheHeight=0,this.cacheWidth=0}return e.prototype.getFontTile=function(e,t,n){return(t!==this.cacheWidth||n!==this.cacheHeight)&&(this.cacheHeight=n,this.cacheWidth=t,this.cache={}),void 0===this.cache[e]&&this.createTile(e,t,n),this.cache[e]
},e.prototype.createTile=function(e,t,n){var i;return i=this.cache[e]=document.createElement("canvas"),i.width=t,i.height=n,this.ctx=i.getContext("2d"),this.ctx.font=this.g.zoomer.get("residueFont")+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(e,t/2,n/2,t)},e}()},{"biojs-events":13}],142:[function(e,t){var n,i,r,o;i=e("underscore"),n=e("biojs-events"),r={setMaxScrollHeight:function(){return this.maxScrollHeight=this.g.zoomer.getMaxAlignmentHeight()-this.g.zoomer.get("alignmentHeight")},setMaxScrollWidth:function(){return this.maxScrollWidth=this.g.zoomer.getMaxAlignmentWidth()-this.g.zoomer.getAlignmentWidth()}},t.exports=o=function(e,t){return this.g=e,this.model=t,this.maxScrollWidth=0,this.maxScrollHeight=0,this.setMaxScrollHeight(),this.setMaxScrollWidth(),this.listenTo(this.g.zoomer,"change:rowHeight",this.setMaxScrollHeight),this.listenTo(this.g.zoomer,"change:columnWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.setMaxScrollHeight),this.listenTo(this.model,"add change reset",function(){return this.setMaxScrollHeight(),this.setMaxScrollWidth()},this),this},i.extend(o.prototype,r),n.mixin(o.prototype)},{"biojs-events":13,underscore:91}],143:[function(e,t){var n,i;i=e("underscore"),t.exports=n=function(e,t){return this.g=e,this.ctx=t,this},i.extend(n.prototype,{_getSelection:function(e){var t,n,r,o,s,a,l,h,u,c,d,f,g;if(s=e.get("seq").length,f=[],g=this.g.selcol.getSelForRow(e.get("id")),c=i.find(g,function(e){return"row"===e.get("type")}),null!=c)for(a=t=0,l=s-1;l>=t;a=t+=1)f.push(a);else if(g.length>0)for(n=0,r=g.length;r>n;n++)for(d=g[n],a=o=h=d.get("xStart"),u=d.get("xEnd");u>=o;a=o+=1)f.push(a);return f},_appendSelection:function(e){var t,n,i,r,o,s,a,l,h,u,c,d,f;if(f=e.model.get("seq"),d=this._getSelection(e.model),h=this._getPrevNextSelection(e.model),a=h[0],s=h[1],n=this.g.zoomer.get("columnWidth"),t=this.g.zoomer.get("rowHeight"),0!==d.length){for(i=0,c=[],l=r=0,u=f.length-1;u>=r;l=r+=1)e.hidden.indexOf(l)>=0?c.push(i++):(o=l-i,d.indexOf(l)>=0&&(0===o||d.indexOf(l-1)<0)?c.push(this._renderSelection({n:l,k:o,selection:d,mPrevSel:a,mNextSel:s,xZero:e.xZero,yZero:e.yZero,model:e.model})):c.push(void 0));return c}},_renderSelection:function(e){var t,n,i,r,o,s,a,l,h,u,c,d,f,g,m,p,v,b,x,w,y,_;for(y=e.xZero,_=e.yZero,d=e.n,l=e.k,p=e.selection,c=e.mPrevSel,u=e.mNextSel,v=0,s=a=f=d,g=e.model.get("seq").length-1;g>=a&&p.indexOf(s)>=0;s=a+=1)v++;for(r=this.g.zoomer.get("columnWidth"),i=this.g.zoomer.get("rowHeight"),b=r*v+1,o=this.g.columns.get("hidden"),this.ctx.beginPath(),n=this.ctx.lineWidth,this.ctx.lineWidth=3,t=this.ctx.strokeStyle,this.ctx.strokeStyle="#FF0000",y+=l*r,x=0,s=h=0,m=v-1;m>=0?m>=h:h>=m;s=m>=0?++h:--h)w=d+s,o.indexOf(w)>=0||(null!=c&&c.indexOf(w)>=0||(this.ctx.moveTo(y+x,_),this.ctx.lineTo(x+r+y,_)),null!=u&&u.indexOf(w)>=0||(this.ctx.moveTo(x+y,i+_),this.ctx.lineTo(x+r+y,i+_)),x+=r);return this.ctx.moveTo(y,_),this.ctx.lineTo(y,i+_),this.ctx.moveTo(y+b,_),this.ctx.lineTo(y+b,i+_),this.ctx.stroke(),this.ctx.strokeStyle=t,this.ctx.lineWidth=n},_getPrevNextSelection:function(e){var t,n,i,r;return r=e.collection.prev(e),i=e.collection.next(e),null!=r&&(n=this._getSelection(r)),null!=i&&(t=this._getSelection(i)),[n,t]}})},{underscore:91}],144:[function(e,t){var n,i,r,o,s,a,l,h;a=e("backbone-childs"),h=e("mouse-pos"),s=e("underscore"),l=e("jbone"),r=e("./CanvasCharCache"),o=e("./CanvasSelection"),i=e("./CanvasSeqDrawer"),n=e("./CanvasCoordsCache"),t.exports=a.extend({tagName:"canvas",initialize:function(e){return this.g=e.g,this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft change:_alignmentScrollTop",function(e,t,n){return null==(null!=n?n.origin:void 0)||"canvasseq"!==n.origin?this.render():void 0}),this.listenTo(this.g.columns,"change:hidden",this.render),this.listenTo(this.g.zoomer,"change:alignmentWidth change:alignmentHeight",this.render),this.listenTo(this.g.colorscheme,"change",this.render),this.listenTo(this.g.selcol,"reset add",this.render),this.el.style.display="inline-block",this.el.style.overflowX="hidden",this.el.style.overflowY="hidden",this.el.className="biojs_msa_seqblock",this.ctx=this.el.getContext("2d"),this.cache=new r(this.g),this.coordsCache=new n(this.g,this.model),this.listenTo(this.g.zoomer,"change:residueFont",function(){return this.cache=new r(this.g),this.render()}),this.sel=new o(this.g,this.ctx),this._setColor(),this.throttleTime=0,this.throttleCounts=0,this.throttledDraw=null!=document.documentElement.style.webkitAppearance?function(){var e,t;return e=+new Date,this.draw(),this.throttleTime+=+new Date-e,this.throttleCounts++,this.throttleCounts>15?(t=Math.ceil(this.throttleTime/this.throttleCounts),console.log("avgDrawTime/WebKit",t),this.throttledDraw=this.draw):void 0}:s.throttle(this.throttledDraw,30),this.manageEvents()},throttledDraw:function(){var e,t;return e=+new Date,this.draw(),this.throttleTime+=+new Date-e,this.throttleCounts++,this.throttleCounts>15?(t=Math.ceil(this.throttleTime/this.throttleCounts),console.log("avgDrawTime",t),t*=1.2,t=Math.max(20,t),this.throttledDraw=s.throttle(this.draw,t)):void 0},manageEvents:function(){var e;return e={},e.mousedown="_onmousedown",e.touchstart="_ontouchstart",this.g.config.get("registerMouseClicks")&&(e.dblclick="_onclick"),this.g.config.get("registerMouseHover")&&(e.mousein="_onmousein",e.mouseout="_onmouseout"),e.mousewheel="_onmousewheel",e.DOMMouseScroll="_onmousewheel",this.delegateEvents(e),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.dragStart=[]},_setColor:function(){return this.color=this.g.colorscheme.getSelectedScheme()},draw:function(){return this.el.width=this.el.width,null!=this.seqDrawer&&this.model.length>0?(this.seqDrawer.drawLetters(),this.seqDrawer.drawRows(this.sel._appendSelection,this.sel),this.seqDrawer.drawRows(this.drawFeatures,this)):void 0},drawFeatures:function(e){var t,n,i;return i=this.g.zoomer.get("columnWidth"),n=this.g.zoomer.get("rowHeight"),e.model.attributes.height>1?(t=this.ctx,e.model.attributes.features.each(function(r){var o,s;return t.fillStyle=r.attributes.fillColor||"red",o=r.attributes.xEnd-r.attributes.xStart+1,s=(r.attributes.row+1)*n,t.fillRect(r.attributes.xStart*i+e.xZero,s+e.yZero,i*o,n)}),t.fillStyle="black",t.font=this.g.zoomer.get("residueFont")+"px mono",t.textBaseline="middle",t.textAlign="center",e.model.attributes.features.each(function(r){var o,s;return o=r.attributes.xEnd-r.attributes.xStart+1,s=(r.attributes.row+1)*n,t.fillText(r.attributes.text,e.xZero+r.attributes.xStart*i+o/2*i,e.yZero+.5*n+s)})):void 0},render:function(){return this.el.setAttribute("height",this.g.zoomer.get("alignmentHeight")+"px"),this.el.setAttribute("width",this.g.zoomer.getAlignmentWidth()+"px"),this.g.zoomer._checkScrolling(this._checkScrolling([this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")]),{header:"canvasseq"}),this._setColor(),this.seqDrawer=new i(this.g,this.ctx,this.model,{width:this.el.width,height:this.el.height,color:this.color,cache:this.cache}),this.throttledDraw(),this},_onmousemove:function(e,t){var n,i,r,o,s,a,l,u,c;if(0!==this.dragStart.length){for(n=h.abs(e),l=[n[0]-this.dragStart[0],n[1]-this.dragStart[1]],u=this.g.zoomer.get("canvasEventScale"),t&&(u=3),i=r=0;1>=r;i=r+=1)l[i]=l[i]*u;for(a=[this.dragStartScroll[0]-l[0],this.dragStartScroll[1]-l[1]],i=o=0;1>=o;i=o+=1)a[i]=Math.round(a[i]);for(c=this._checkScrolling(a),this.g.zoomer._checkScrolling(c,{origin:"canvasseq"}),i=s=0;1>=s;i=s+=1)c[i]!==a[i]&&(0===c[i]?(this.dragStart[i]=n[i],this.dragStartScroll[i]=0):this.dragStart[i]=n[i]-c[i]);return this.throttledDraw(),null!=e.preventDefault?(e.preventDefault(),e.stopPropagation()):void 0}},_ontouchmove:function(e){return this._onmousemove(e.changedTouches[0],!0),e.preventDefault(),e.stopPropagation()},_onmousedown:function(e){return this.dragStart=h.abs(e),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],l(document.body).on("mousemove.overmove",function(e){return function(t){return e._onmousemove(t)}}(this)),l(document.body).on("mouseup.overup",function(e){return function(){return e._cleanup()}}(this)),e.preventDefault()},_ontouchstart:function(e){return this.dragStart=h.abs(e.changedTouches[0]),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],l(document.body).on("touchmove.overtmove",function(e){return function(t){return e._ontouchmove(t)}}(this)),l(document.body).on("touchend.overtend touchleave.overtleave touchcancel.overtcanel",function(e){return function(t){return e._touchCleanup(t)}}(this))},_onmousewinout:function(e){return e.toElement===document.body.parentNode?this._cleanup():void 0},_cleanup:function(){return this.dragStart=[],l(document.body).off(".overmove"),l(document.body).off(".overup"),l(document.body).off(".overout")},_touchCleanup:function(e){return e.changedTouches.length>0&&this._onmousemove(e.changedTouches[0],!0),this.dragStart=[],l(document.body).off(".overtmove"),l(document.body).off(".overtend"),l(document.body).off(".overtleave"),l(document.body).off(".overtcancel")},_onmousewheel:function(e){var t;return t=h.wheelDelta(e),this.g.zoomer.set("_alignmentScrollLeft",this.g.zoomer.get("_alignmentScrollLeft")+t[0]),this.g.zoomer.set("_alignmentScrollTop",this.g.zoomer.get("_alignmentScrollTop")+t[1]),e.preventDefault()},_onclick:function(e){var t;return t=this._getClickPos(e),null!=t&&(null!=t.feature?this.g.trigger("feature:click",t):this.g.trigger("residue:click",t)),this.throttledDraw()},_onmousein:function(e){var t;return t=this._getClickPos(e),null!=t&&(null!=t.feature?this.g.trigger("feature:mousein",t):this.g.trigger("residue:mousein",t)),this.throttledDraw()},_onmouseout:function(e){var t;return t=this._getClickPos(e),null!=t&&(null!=t.feature?this.g.trigger("feature:mouseout",t):this.g.trigger("residue:mouseout",t)),this.throttledDraw()},_getClickPos:function(e){var t,n,i,r,o,s,a,l;return t=h.rel(e),t[0]+=this.g.zoomer.get("_alignmentScrollLeft"),a=Math.floor(t[0]/this.g.zoomer.get("columnWidth")),r=this.seqDrawer._getSeqForYClick(t[1]),l=r[0],o=r[1],a+=this.g.columns.calcHiddenColumns(a),l+=this.model.calcHiddenSeqs(l),a=Math.max(0,a),l=Math.max(0,l),s=this.model.at(l).get("id"),o>0?(i=this.model.at(l).get("features").getFeatureOnRow(o-1,a),0!==i.length?(n=i[0],console.log(i[0].attributes),{seqId:s,feature:n,rowPos:a,evt:e}):void 0):{seqId:s,rowPos:a,evt:e}},_checkScrolling:function(e){var t,n,i;for(i=[this.coordsCache.maxScrollWidth,this.coordsCache.maxScrollHeight],t=n=0;1>=n;t=n+=1)e[t]>i[t]&&(e[t]=i[t]),e[t]<0&&(e[t]=0);return e}})},{"./CanvasCharCache":141,"./CanvasCoordsCache":142,"./CanvasSelection":143,"./CanvasSeqDrawer":145,"backbone-childs":2,jbone:67,"mouse-pos":71,underscore:91}],145:[function(e,t){var n,i,r;n=e("underscore"),r={drawLetters:function(){var e;return e=this.rectHeight,this.ctx.globalAlpha=this.g.colorscheme.get("opacity"),this.drawSeqs(function(e){return this.drawSeq(e,this._drawRect)}),this.ctx.globalAlpha=1,this.drawSeqs(function(e){return this.drawSeq(e,this._drawLetter)})},drawSeqs:function(e,t){var n,i,r,o,s,a,l,h,u,c,d;for(n=this.g.columns.get("hidden"),t=t||this,o=this.getStartSeq(),c=o[0],d=o[1],l=[],i=r=s=c,a=this.model.length-1;a>=r;i=r+=1)if(h=this.model.at(i),!h.get("hidden")){if(e.call(t,{model:h,yPos:d,y:i,hidden:n}),u=(h.attributes.height||1)*this.rectHeight,d+=u,d>this.height)break;l.push(void 0)}return l},drawRows:function(e,t){return this.drawSeqs(function(n){return this.drawRow(n,e,t)})},drawRow:function(e,t,n){var i,r,o,s,a;return i=this.g.zoomer.get("columnWidth"),r=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/i))),o=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%i),s=o-r*i,a=e.yPos,t.call(n,{model:e.model,xZero:s,yZero:a,hidden:e.hidden})},getStartSeq:function(){var e,t,n,i;for(n=Math.max(0,Math.floor(this.g.zoomer.get("_alignmentScrollTop")/this.rectHeight))+1,e=0,t=0;n>e&&t<this.model.length;)e+=this.model.at(t).attributes.height||1,t++;return i=Math.max(0,this.g.zoomer.get("_alignmentScrollTop")-e*this.rectHeight+(this.model.at(t-1).attributes.height||1)*this.rectHeight),[t-1,-i]},_getSeqForYClick:function(e){var t,n,i,r,o,s,a,l;for(r=this.getStartSeq(),s=r[0],a=r[1],l=a%this.rectHeight,t=Math.max(0,Math.floor((e-l)/this.rectHeight))+1,n=0,i=s;t>n&&i<this.model.length;)n+=this.model.at(i).attributes.height||1,i++;return o=Math.max(0,Math.floor(e/this.rectHeight)-n+(this.model.at(i-1).get("height")||1)),[i-1,o]},drawSeq:function(e,t){var n,i,r,o,s,a,l,h,u,c,d,f,g,m;for(d=e.model.get("seq"),m=e.yPos,a=this.rectWidth,s=this.rectHeight,f=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/a))),g=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%a),u={rectWidth:a,rectHeight:s,yPos:m,y:e.y},i=this.width,c=[],r=o=l=f,h=d.length-1;h>=o;r=o+=1)if(n=d[r],n=n.toUpperCase(),u.x=r,u.c=n,u.xPos=g,e.hidden.indexOf(r)<0){if(t(this,u),g+=a,g>i)break;c.push(void 0)}return c},_drawRect:function(e,t){var n;return n=e.color.getColor(t.c,{pos:t.x,y:t.y}),null!=n?(e.ctx.fillStyle=n,e.ctx.fillRect(t.xPos,t.yPos,t.rectWidth,t.rectHeight)):void 0},_drawLetter:function(e,t){return e.ctx.drawImage(e.cache.getFontTile(t.c,t.rectWidth,t.rectHeight),t.xPos,t.yPos,t.rectWidth,t.rectHeight)}},t.exports=i=function(e,t,n,i){return this.g=e,this.ctx=t,this.model=n,this.width=i.width,this.height=i.height,this.color=i.color,this.cache=i.cache,this.rectHeight=this.g.zoomer.get("rowHeight"),this.rectWidth=this.g.zoomer.get("columnWidth"),this},n.extend(i.prototype,r)},{underscore:91}],146:[function(e,t){var n,i,r,o;o=e("backbone-viewj"),i=e("dom-helper"),r=e("../../utils/svg"),n=o.extend({className:"biojs_msa_conserv",initialize:function(e){return this.g=e.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.g.stats,"reset",this.render),this.manageEvents()},render:function(){var e,t,n,o,s,a,l,h,u,c,d,f,g,m,p,v;for(n=this.g.stats.scale(this.g.stats.conservation()),i.removeAllChilds(this.el),c=this.model.getMaxLength(),t=this.g.zoomer.get("columnWidth"),h=20,p=t*(c-this.g.columns.get("hidden").length),g=r.base({height:h,width:p}),g.style.display="inline-block",g.style.cursor="pointer",m=this.g.zoomer.get("stepSize"),s=this.g.columns.get("hidden"),v=0,u=0;c>u;)if(s.indexOf(u)>=0)u+=m;else{for(p=t*m,e=0,a=l=0,f=m-1;f>=0?f>=l:l>=f;a=f>=0?++l:--l)e+=n[u];o=h*(e/m),d=r.rect({x:v,y:h-o,width:p-t/4,height:o,style:"stroke:red;stroke-width:1;"}),d.rowPos=u,g.appendChild(d),v+=p,u+=m}return this.el.appendChild(g),this},_onclick:function(e){var t,n,i,r,o,s;for(o=e.target.rowPos,s=this.g.zoomer.get("stepSize"),r=[],t=n=0,i=s-1;i>=n;t=n+=1)r.push(this.g.trigger("bar:click",{rowPos:o+t,evt:e}));return r},manageEvents:function(){var e;return e={},this.g.config.get("registerMouseClicks")&&(e.click="_onclick"),this.g.config.get("registerMouseHover")&&(e.mousein="_onmousein",e.mouseout="_onmouseout"),this.delegateEvents(e),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(e){var t;return t=this.g.zoomer.get("stepSize"*e.rowPos),this.g.trigger("bar:mousein",{rowPos:t,evt:e})},_onmouseout:function(e){var t;return t=this.g.zoomer.get("stepSize"*e.rowPos),this.g.trigger("bar:mouseout",{rowPos:t,evt:e})}}),t.exports=n},{"../../utils/svg":135,"backbone-viewj":9,"dom-helper":66}],147:[function(e,t){var n,i,r,o;o=e("backbone-viewj"),i=e("dom-helper"),r=e("../../utils/svg"),n=o.extend({className:"biojs_msa_gapview",initialize:function(e){return this.g=e.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.model,"reset",this.render),this.manageEvents()},render:function(){var e,t,n,o,s,a,l,h,u,c,d,f,g,m,p,v;for(n=this.g.stats.gaps(),i.removeAllChilds(this.el),c=this.model.getMaxLength(),t=this.g.zoomer.get("columnWidth"),h=20,p=t*(c-this.g.columns.get("hidden").length),g=r.base({height:h,width:p}),g.style.display="inline-block",g.style.cursor="pointer",m=this.g.zoomer.get("stepSize"),s=this.g.columns.get("hidden"),v=0,u=0;c>u;)if(s.indexOf(u)>=0)u+=m;else{for(p=t*m,e=0,a=l=0,f=m-1;f>=0?f>=l:l>=f;a=f>=0?++l:--l)e+=n[u];o=h*(e/m),d=r.rect({x:v,y:h-o,width:p-t/4,height:o,style:"stroke:red;stroke-width:1;"}),d.rowPos=u,g.appendChild(d),v+=p,u+=m}return this.el.appendChild(g),this},_onclick:function(e){var t,n,i,r,o,s;for(o=e.target.rowPos,s=this.g.zoomer.get("stepSize"),r=[],t=n=0,i=s-1;i>=n;t=n+=1)r.push(this.g.trigger("gap:click",{rowPos:o+t,evt:e}));return r},manageEvents:function(){var e;return e={},this.g.config.get("registerMouseClicks")&&(e.click="_onclick"),this.g.config.get("registerMouseHover")&&(e.mousein="_onmousein",e.mouseout="_onmouseout"),this.delegateEvents(e),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(e){var t;return t=this.g.zoomer.get("stepSize"*e.rowPos),this.g.trigger("gap:mousein",{rowPos:t,evt:e})},_onmouseout:function(e){var t;return t=this.g.zoomer.get("stepSize"*e.rowPos),this.g.trigger("gap:mouseout",{rowPos:t,evt:e})}}),t.exports=n},{"../../utils/svg":135,"backbone-viewj":9,"dom-helper":66}],148:[function(e,t){var n,i,r;r=e("backbone-childs"),n=e("./LabelHeader"),i=e("./RightHeaderBlock"),t.exports=r.extend({initialize:function(e){return this.g=e.g,this.draw(),this.listenTo(this.g.vis,"change:labels change:metacell change:leftHeader",function(e){return function(){return e.draw(),e.render()}}(this))},draw:function(){var e,t;return this.removeViews(),this.g.vis.get("leftHeader")&&(this.g.vis.get("labels")||this.g.vis.get("metacell"))&&(e=new n({model:this.model,g:this.g}),e.ordering=-50,this.addView("lHeader",e)),t=new i({model:this.model,g:this.g}),t.ordering=0,this.addView("rHeader",t)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_header"}})},{"./LabelHeader":149,"./RightHeaderBlock":151,"backbone-childs":2}],149:[function(e,t){var n,i,r,o;r=e("koala-js"),o=e("backbone-viewj"),i=e("dom-helper"),t.exports=n=o.extend({className:"biojs_msa_headers",initialize:function(e){return this.g=e.g,this.listenTo(this.g.vis,"change:metacell change:labels",this.render),this.listenTo(this.g.zoomer,"change:labelWidth change:metaWidth",this.render)},render:function(){var e;return i.removeAllChilds(this.el),e=0,e+=this.g.zoomer.getLeftBlockWidth(),this.el.style.width=e+"px",this.g.vis.get("labels")&&this.el.appendChild(this.labelDOM()),this.g.vis.get("metacell")&&this.el.appendChild(this.metaDOM()),this.el.style.display="inline-block",this.el.style.fontSize=this.g.zoomer.get("markerFontsize"),this},labelDOM:function(){var e,t;return e=r.mk("div"),e.style.width=this.g.zoomer.getLabelWidth(),e.style.display="inline-block",this.g.vis.get("labelCheckbox")&&e.appendChild(this.addEl(".",10)),this.g.vis.get("labelId")&&e.appendChild(this.addEl("id",this.g.zoomer.get("labelIdLength"))),this.g.vis.get("labelPartition")&&e.appendChild(this.addEl("part",15)),this.g.vis.get("labelName")&&(t=this.addEl("name"),e.appendChild(t)),e},addEl:function(e,t){var n;return n=document.createElement("span"),n.textContent=e,null!=t&&(n.style.width=t+"px"),n.style.display="inline-block",n},metaDOM:function(){var e;return e=r.mk("div"),e.style.width=this.g.zoomer.getMetaWidth(),e.style.display="inline-block",this.g.vis.get("metaGaps")&&e.appendChild(this.addEl("gaps",this.g.zoomer.get("metaGapWidth"))),this.g.vis.get("metaIdentity")&&e.appendChild(this.addEl("ident",this.g.zoomer.get("metaIdentWidth"))),this.g.vis.get("metaLinks")&&e.appendChild(this.addEl("links")),e}})},{"backbone-viewj":9,"dom-helper":66,"koala-js":68}],150:[function(e,t){var n,i,r,o,s;s=e("backbone-viewj"),i=e("dom-helper"),o=e("../../utils/svg"),r=e("jbone"),n=s.extend({className:"biojs_msa_marker",initialize:function(e){return this.g=e.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth change:markerStepSize change:markerFontsize",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.manageEvents()},render:function(){var e,t,n,r,o,s,a;for(i.removeAllChilds(this.el),this.el.style.fontSize=this.g.zoomer.get("markerFontsize"),t=document.createElement("span"),r=0,e=this.g.zoomer.get("columnWidth"),o=this.model.getMaxLength(),a=this.g.zoomer.get("stepSize"),n=this.g.columns.get("hidden");o>r;)n.indexOf(r)>=0?(this.markerHidden(s,r,a),r+=a):(s=document.createElement("span"),s.style.width=e*a+"px",s.style.display="inline-block",s.textContent=(r+1)%this.g.zoomer.get("markerStepSize")===0?r+1:".",s.rowPos=r,r+=a,t.appendChild(s));return this.el.appendChild(t),this},markerHidden:function(e,t,n){var i,s,a,l,h,u,c,d,f,g,m,p,v,b,x;for(i=this.g.columns.get("hidden").slice(0),c=Math.max(0,t-n),f=!0,l=s=g=c,m=t;m>=s;l=s+=1)f&=i.indexOf(l)>=0;if(!f){for(d=this.model.getMaxLength(),u=0,a=-1,t=h=p=t,v=d;v>=h&&(a>=0||(a=i.indexOf(t)),i.indexOf(t)>=0);t=h+=1)u++;return b=o.base({height:10,width:10}),b.style.position="relative",x=o.polygon({points:"0,0 5,5 10,0",style:"fill:lime;stroke:purple;stroke-width:1"}),r(x).on("click",function(e){return function(){return i.splice(a,u),e.g.columns.set("hidden",i)}}(this)),b.appendChild(x),e.appendChild(b),b}},manageEvents:function(){var e;return e={},this.g.config.get("registerMouseClicks")&&(e.click="_onclick"),this.g.config.get("registerMouseHover")&&(e.mousein="_onmousein",e.mouseout="_onmouseout"),this.delegateEvents(e),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onclick:function(e){var t,n;return t=e.target.rowPos,n=this.g.zoomer.get("stepSize"),this.g.trigger("column:click",{rowPos:t,stepSize:n,evt:e})},_onmousein:function(e){var t,n;return t=this.g.zoomer.get("stepSize"*e.rowPos),n=this.g.zoomer.get("stepSize"),this.g.trigger("column:mousein",{rowPos:t,stepSize:n,evt:e})},_onmouseout:function(e){var t,n;return t=this.g.zoomer.get("stepSize"*e.rowPos),n=this.g.zoomer.get("stepSize"),this.g.trigger("column:mouseout",{rowPos:t,stepSize:n,evt:e})}}),t.exports=n},{"../../utils/svg":135,"backbone-viewj":9,"dom-helper":66,jbone:67}],151:[function(e,t){var n,i,r,o,s,a;r=e("./MarkerView"),n=e("./ConservationView"),a=e("backbone-childs"),s=e("underscore"),o=e("./SeqLogoWrapper"),i=e("./GapView"),t.exports=a.extend({initialize:function(e){return this.g=e.g,this.blockEvents=!1,this.listenTo(this.g.vis,"change:header",function(){return this.draw(),this.render()}),this.listenTo(this.g.vis,"change",this._setSpacer),this.listenTo(this.g.zoomer,"change:alignmentWidth",this._setWidth),this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft",this._adjustScrollingLeft),this.listenTo(this.g.columns,"change:hidden",function(){return this.draw(),this.render()}),this.draw(),this.g.vis.once("change:loaded",this._adjustScrollingLeft,this)},events:{scroll:"_sendScrollEvent"},draw:function(){var e,t,s,a;return this.removeViews(),this.g.vis.get("conserv")&&(e=new n({model:this.model,g:this.g}),e.ordering=-20,this.addView("conserv",e)),this.g.vis.get("markers")&&(s=new r({model:this.model,g:this.g}),s.ordering=-10,this.addView("marker",s)),this.g.vis.get("seqlogo")&&(a=new o({model:this.model,g:this.g}),a.ordering=-30,this.addView("seqlogo",a)),this.g.vis.get("gapHeader")?(t=new i({model:this.model,g:this.g}),t.ordering=-25,this.addView("gapview",t)):void 0},render:function(){return this.renderSubviews(),this._setSpacer(),this.el.className="biojs_msa_rheader",this.el.style.overflowX="auto",this.el.style.display="inline-block",this._setWidth(),this._adjustScrollingLeft(),this},_sendScrollEvent:function(){return this.blockEvents||this.g.zoomer.set("_alignmentScrollLeft",this.el.scrollLeft,{origin:"header"}),this.blockEvents=!1},_adjustScrollingLeft:function(e,t,n){var i;return null==(null!=n?n.origin:void 0)||"header"!==n.origin?(i=this.g.zoomer.get("_alignmentScrollLeft"),this.blockEvents=!0,this.el.scrollLeft=i):void 0},_setSpacer:function(){return this.el.style.marginLeft=this._getLabelWidth()+"px"},_getLabelWidth:function(){var e;return e=0,this.g.vis.get("leftHeader")||(e+=this.g.zoomer.getLeftBlockWidth()),e},_setWidth:function(){return this.el.style.width=this.g.zoomer.getAlignmentWidth()+"px"}})},{"./ConservationView":146,"./GapView":147,"./MarkerView":150,"./SeqLogoWrapper":152,"backbone-childs":2,underscore:91}],152:[function(e,t){var n,i;n=e("biojs-vis-seqlogo/light"),i=e("backbone-viewj"),t.exports=i.extend({initialize:function(e){return this.g=e.g,this.listenTo(this.g.zoomer,"change:alignmentWidth",this.render),this.listenTo(this.g.colorscheme,"change",function(){var e;return e=this.g.colorscheme.getSelectedScheme(),this.seqlogo.changeColors(e),this.render()}),this.listenTo(this.g.zoomer,"change:columnWidth",function(){return this.seqlogo.column_width=this.g.zoomer.get("columnWidth")}),this.render,this.draw()},draw:function(){var e,t,i;return console.log("redraw"),e=this.g.stats.conservResidue({scaled:!0}),e=_.map(e,function(e){return _.pick(e,function(e,t){return"-"!==t})}),i={alphabet:"aa",heightArr:e},t=this.g.colorscheme.getSelectedScheme(),this.seqlogo=new n({model:this.model,g:this.g,data:i,yaxis:!1,scroller:!1,xaxis:!1,height:100,column_width:this.g.zoomer.get("columnWidth"),positionMarker:!1,zoom:1,el:this.el,colors:t})},render:function(){return this.seqlogo.render()}})},{"backbone-viewj":9,"biojs-vis-seqlogo/light":47}],153:[function(e,t){var n,i;n=e("./LabelRowView"),i=e("backbone-childs"),t.exports=i.extend({initialize:function(e){return this.g=e.g,this.draw(),this.listenTo(this.g.zoomer,"change:_alignmentScrollTop",this._adjustScrollingTop),this.g.vis.once("change:loaded",this._adjustScrollingTop,this),this.listenTo(this.g.zoomer,"change:alignmentHeight",this._setHeight),this.listenTo(this.model,"change:reference",this.draw)},draw:function(){var e,t,i,r,o;for(this.removeViews(),r=[],e=t=0,i=this.model.length-1;i>=t;e=t+=1)this.model.at(e).get("hidden")||(o=new n({model:this.model.at(e),g:this.g}),o.ordering=e,r.push(this.addView("row_"+e,o)));return r},events:{scroll:"_sendScrollEvent"},_sendScrollEvent:function(){return this.g.zoomer.set("_alignmentScrollTop",this.el.scrollTop,{origin:"label"})},_adjustScrollingTop:function(){return this.el.scrollTop=this.g.zoomer.get("_alignmentScrollTop")},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_labelblock",this.el.style.display="inline-block",this.el.style.verticalAlign="top",this.el.style.overflowY="auto",this.el.style.overflowX="hidden",this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this.el.style.lineHeight=""+this.g.zoomer.get("labelLineHeight"),this._setHeight(),this},_setHeight:function(){return this.el.style.height=this.g.zoomer.get("alignmentHeight")+"px"}})},{"./LabelRowView":154,"backbone-childs":2}],154:[function(e,t){var n,i,r;r=e("backbone-childs"),n=e("./LabelView"),i=e("./MetaView"),t.exports=r.extend({initialize:function(e){return this.g=e.g,this.draw(),this.listenTo(this.g.vis,"change:labels",this.drawR),this.listenTo(this.g.vis,"change:metacell",this.drawR),this.listenTo(this.g.zoomer,"change:rowHeight",function(){return this.el.style.height=this.g.zoomer.get("rowHeight")+"px"}),this.listenTo(this.g.selcol,"change reset add",this.setSelection)},draw:function(){var e;return this.removeViews(),this.g.vis.get("labels")&&this.addView("labels",new n({model:this.model,g:this.g})),this.g.vis.get("metacell")?(e=new i({model:this.model,g:this.g}),this.addView("metacell",e)):void 0},drawR:function(){return this.draw(),this.render()},render:function(){return this.renderSubviews(),this.el.setAttribute("class","biojs_msa_labelrow"),this.el.style.height=this.g.zoomer.get("rowHeight")*(this.model.attributes.height||1)+"px",this.setSelection(),this},setSelection:function(){var e;return e=this.g.selcol.getSelForRow(this.model.id),this.el.style.fontWeight=e.length>0?"bold":"normal"}})},{"./LabelView":155,"./MetaView":156,"backbone-childs":2}],155:[function(e,t){var n,i,r;r=e("backbone-viewj"),i=e("dom-helper"),n=r.extend({initialize:function(e){return this.seq=e.seq,this.g=e.g,this.manageEvents()},manageEvents:function(){var e;return e={},this.g.config.get("registerMouseClicks")&&(e.click="_onclick"),this.g.config.get("registerMouseHover")&&(e.mousein="_onmousein",e.mouseout="_onmouseout"),this.delegateEvents(e),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.listenTo(this.g.vis,"change:labelName change:labelId change:labelPartition change:labelCheckbox",this.render),this.listenTo(this.g.zoomer,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",this.render),this.listenTo(this.g.zoomer,"change:labelFontSize change:labelLineHeight change:labelWidth change:rowHeight",this.render)},render:function(){var e,t,n,r,o;return i.removeAllChilds(this.el),this.el.style.width=this.g.zoomer.getLabelWidth()+"px",this.el.setAttribute("class","biojs_msa_labels"),this.g.vis.get("labelCheckbox")&&(e=document.createElement("input"),e.setAttribute("type","checkbox"),e.value=this.model.get("id"),e.name="seq",e.style.width=this.g.zoomer.get("labelCheckLength")+"px",this.el.appendChild(e)),this.g.vis.get("labelId")&&(t=document.createElement("span"),o=this.model.get("id"),isNaN(o)||o++,t.textContent=o,t.style.width=this.g.zoomer.get("labelIdLength")+"px",t.style.display="inline-block",this.el.appendChild(t)),this.g.vis.get("labelPartition")&&(r=document.createElement("span"),r.style.width=this.g.zoomer.get("labelPartLength")+"px",r.textContent=this.model.get("partition"),r.style.display="inline-block",this.el.appendChild(t),this.el.appendChild(r)),this.g.vis.get("labelName")&&(n=document.createElement("span"),n.textContent=this.model.get("name"),this.model.get("ref")&&this.g.config.get("hasRef")&&(n.style.fontWeight="bold"),n.style.width=this.g.zoomer.get("labelNameLength")+"px",this.el.appendChild(n)),this.el.style.overflow=scroll,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this},_onclick:function(e){var t;return t=this.model.get("id"),this.g.trigger("row:click",{seqId:t,evt:e})},_onmousein:function(e){var t;return t=this.model.get("id"),this.g.trigger("row:mouseout",{seqId:t,evt:e})},_onmouseout:function(e){var t;return t=this.model.get("id"),this.g.trigger("row:mouseout",{seqId:t,evt:e})}}),t.exports=n},{"backbone-viewj":9,"dom-helper":66}],156:[function(e,t){var n,i,r,o,s,a;a=e("backbone-viewj"),n=e("../../menu/menubuilder"),r=e("underscore"),o=e("dom-helper"),s=e("msa-seqtools"),t.exports=i=a.extend({className:"biojs_msa_metaview",initialize:function(e){return this.g=e.g,this.listenTo(this.g.vis,"change:metacell",this.render),this.listenTo(this.g.zoomer,"change:metaWidth",this.render)},events:{click:"_onclick",mousein:"_onmousein",mouseout:"_onmouseout"},render:function(){var e,t,i,a,l,h,u,c,d;return o.removeAllChilds(this.el),this.el.style.display="inline-block",d=this.g.zoomer.getMetaWidth(),this.el.style.width=d-10,this.el.style.paddingRight=5,this.el.style.paddingLeft=5,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")-2+"px",this.g.vis.get("metaGaps")&&(c=this.model.get("seq"),t=r.reduce(c,function(e,t){return"-"===t&&e++,e},0),t=(t/c.length).toFixed(1),e=document.createElement("span"),e.textContent=t,e.style.display="inline-block",e.style.width=35,this.el.appendChild(e)),this.g.vis.get("metaIdentity")&&(i=this.g.stats.identity()[this.model.id],a=document.createElement("span"),this.model.get("ref")&&this.g.config.get("hasRef")?a.textContent="ref.":null!=i&&(a.textContent=i.toFixed(2)),a.style.display="inline-block",a.style.width=40,this.el.appendChild(a)),this.g.vis.get("metaLinks")&&this.model.attributes.ids&&(h=s.buildLinks(this.model.attributes.ids),r.keys(h).length>0)?(u=new n({name:"â†—"}),console.log(r.keys(h)),r.each(h,function(e,t){return u.addNode(t,function(){return window.open(e)
})}),l=u.buildDOM(),l.style.cursor="pointer",this.el.appendChild(l)):void 0},_onclick:function(e){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:e})})},_onmousein:function(e){return this.g.trigger("meta:mousein",{seqId:this.model.get("id",{evt:e})})},_onmouseout:function(e){return this.g.trigger("meta:mouseout",{seqId:this.model.get("id",{evt:e})})}})},{"../../menu/menubuilder":111,"backbone-viewj":9,"dom-helper":66,"msa-seqtools":89,underscore:91}],"biojs-io-clustal":[function(e,t){var n,i,r;i=e("biojs-io-parser"),r=e("msa-seqtools"),t.exports=n={parse:function(e){var t,n,i,o,s,a,l,h,u,c,d,f,g;if(f=[],l="[object Array]"===Object.prototype.toString.call(e)?e:e.split("\n"),l[0].slice(0,6)===!1)throw new Error("Invalid CLUSTAL Header");for(i=0,t=1,d=0;i<l.length;)i++,a=l[i],null!=a&&0!==a.length?0!==a.trim().length?r.contains(a,"*")||(1===t&&(d=0,t=0),c=/^(?:\s*)(\S+)(?:\s+)(\S+)(?:\s*)(\d*)(?:\s*|$)/g,h=c.exec(a),null!=h?(s=h[1],g=h[2],d>=f.length?(u=r.getMeta(s),s=u.name,n=new r.model(g,s,d),n.ids=u.ids||{},n.details=u.details||{},o=Object.keys(n.ids),o.length>0&&(n.id=n.ids[o[0]]),f.push(n)):f[d].seq+=g,d++):console.log("parse error",a)):t=1:t=1;return f}},i.mixin(n)},{"biojs-io-parser":16,"msa-seqtools":89}],"biojs-io-fasta":[function(e,t){var n,i,r;i=e("biojs-io-parser"),r=e("msa-seqtools"),t.exports=n={parse:function(e){var t,n,i,o,s,a,l,h;if(a=[],!e||0===e.length)return[];for("[object Array]"!==Object.prototype.toString.call(e)&&(e=e.split("\n")),l=0,h=e.length;h>l;l++)o=e[l],">"===o[0]||";"===o[0]?(i=o.slice(1),s=r.getMeta(i),i=s.name,t=new r.model("",i,a.length),t.ids=s.ids||{},n=Object.keys(t.ids),n.length>0&&(t.id=t.ids[n[0]]),t.details=s.details||{},a.push(t)):t.seq+=o;return a},write:function(e,t){var n,i,o,s;for(i="",o=0,s=e.length;s>o;o++)n=e[o],null!=t&&(n=t(n)),i+=">"+n.name+"\n",i+=r.splitNChars(n.seq,80).join("\n"),i+="\n";return i}},i.mixin(n)},{"biojs-io-parser":25,"msa-seqtools":89}],"biojs-io-gff":[function(e,t){var n=e("biojs-io-parser"),i=function(){};n.mixin(i),t.exports=i;var r=e("./utils"),o=e("./jalview");i.parseLines=function(e){var t=e.split("\n"),n={},r=[];n.type=i._guessType(t);var s=0;if("jalview"===n.type){var a=o.readHeader(t);s=a.offset,n.colors=a.colors,r=a.features}for(var l=s;l<t.length;l++){var h=t[l];0!==h.length&&"#"!==h[0]&&(h=i.parseLine(h),void 0!==h&&r.push(h))}return{features:r,config:n}},i._guessType=function(e){return"##gff-version 3"===e[0].substring(0,15)?"gff3":e[0].indexOf("#")<0&&2===e[0].split("	").length?"jalview":"gff3"},i.parseSeqs=i.parse=function(e){var t=i.parseLines(e),n={};return t.features.forEach(function(e){var t=e.seqname;void 0===n[t]&&(n[t]=[]),delete e.seqname,n[t].push(e)}),delete t.features,t.seqs=n,t},i.parseLine=function(e){var t={},n=e.split(/\s+/);if(1!==n.length){t.seqname=n[0],t.source=n[1],t.feature=n[2],t.start=parseInt(n[3]),t.end=parseInt(n[4]),t.score=n[5],t.strand=n[6],t.frame=n[7];var i=n.slice(8).join(" ");return Object.keys(t).forEach(function(e){"."===t[e]&&(t[e]=void 0)}),t.score&&(t.score=parseFloat(t.score)),t.frame&&(t.frame=parseInt(t.frame)),t.attributes=r.extractKeys(i),t}},i.exportLine=function(e){var t=Object.keys(e.attributes).map(function(t){return t+"="+e.attributes[t]}).join(";"),n=[e.seqname,e.source,e.feature,e.start,e.end,e.score,e.strand,e.frame,t];return n=n.map(function(e){return void 0===e?".":e}),n.join("	")},i.exportLines=function(e){return"##gff-version 3\n"+e.map(i.exportLine).join("\n")},i.exportSeqs=i.export=function(e){var t=[],n=function(e){e.seqname=r,t.push(e)};for(var r in e)e[r].forEach(n);return i.exportLines(t)}},{"./jalview":34,"./utils":35,"biojs-io-parser":36}],msa:[function(e,t){"undefined"==typeof biojs&&(biojs={}),"undefined"==typeof biojs.vis&&(biojs.vis={}),window.msa=biojs.vis.msa=t.exports=e("./src/index"),"undefined"==typeof biojs.io&&(biojs.io={}),window.biojs.io.fasta=e("biojs-io-fasta"),window.biojs.io.clustal=e("biojs-io-clustal"),window.biojs.xhr=e("xhr"),t.exports=e("./src/index"),e("./css/msa.css")},{"./css/msa.css":1,"./src/index":108,"biojs-io-clustal":"biojs-io-clustal","biojs-io-fasta":"biojs-io-fasta",xhr:"xhr"}],xhr:[function(e,t){function n(e,t){function n(){4===m.readyState&&S()}function r(){var e=null;if(m.response?e=m.response:"text"!==m.responseType&&m.responseType||(e=m.responseText||m.responseXML),_)try{e=JSON.parse(e)}catch(t){}return e}function u(){return 1223===m.status?204:m.status}function c(e,t){var n=null;if(0===e||e>=400&&600>e){var i=("string"==typeof t?t:!1)||a[String(e).charAt(0)];n=new Error(i),n.statusCode=e}return n}function d(){var e=u(),n=r(),i=c(e,n),o={body:n,statusCode:e,statusText:m.statusText,raw:m};o.headers=m.getAllResponseHeaders?s(m.getAllResponseHeaders()):{},t(i,o,o.body)}function f(){var e=u(),n=c(e);m.status=m.statusCode=e,m.body=r(),m.headers=s(m.getAllResponseHeaders()),t(n,m,m.body)}function g(e){t(e,m)}"string"==typeof e&&(e={uri:e}),e=e||{},t=o(t);var m=e.xhr||null;m||(m=e.cors||e.useXDR?new h:new l);var p,v=m.url=e.uri||e.url,b=m.method=e.method||"GET",x=e.body||e.data,w=m.headers=e.headers||{},y=!!e.sync,_=!1,S=e.response?d:f;if("json"in e&&(_=!0,w.Accept="application/json","GET"!==b&&"HEAD"!==b&&(w["Content-Type"]="application/json",x=JSON.stringify(e.json))),m.onreadystatechange=n,m.onload=S,m.onerror=g,m.onprogress=function(){},m.ontimeout=i,m.open(b,v,!y),(e.withCredentials||e.cors&&e.withCredentials!==!1)&&(m.withCredentials=!0),y||(m.timeout="timeout"in e?e.timeout:5e3),m.setRequestHeader)for(p in w)w.hasOwnProperty(p)&&m.setRequestHeader(p,w[p]);else if(e.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(m.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(m),m.send(x),m}function i(){}var r=e("global/window"),o=e("once"),s=e("parse-headers"),a={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=r.XMLHttpRequest||i,h="withCredentials"in new l?l:r.XDomainRequest;t.exports=n},{"global/window":92,once:93,"parse-headers":97}]},{},["msa"]);
