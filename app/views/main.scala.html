@import java.time.ZonedDateTime

@import build.BuildInfo
@import controllers.routes
@import de.proteinevolution.models.Tool
@import org.webjars.play.WebJarsUtil
@import play.api.Environment
@import play.twirl.api.Html
@(webJarsUtil: WebJarsUtil, tools: Iterable[Tool], message: String = "", view: String = "", environment: Environment)()

<!DOCTYPE html>

<html>
    <head>
            <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,700|Roboto:300|Source+Code+Pro:400,700|Vollkorn:400,700" rel="stylesheet">

        <title>Bioinformatics Toolkit</title>

            <!-- SEO -->
        <meta name="description" content="The MPI Bioinformatics Toolkit is an interactive web service
                                          which offers access to a great variety of public and in-house bioinformatics tools.
                                          They are grouped into different sections that support sequence searches,
                                          multiple alignment, secondary and tertiary structure prediction and classification." />

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />

        <link id="favicon_link" rel="shortcut icon" href="@routes.Assets.versioned("images/favicons/favicon-32x32.png")">

        <link rel="stylesheet" type="text/css" charset="utf-8" href="http://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">

        @Html(webJarsUtil.css("hamburgers.min.css"))
        @Html(webJarsUtil.css("nice-select.css"))
        @Html(webJarsUtil.css("font-awesome.min.css"))
        <link href="@routes.Assets.versioned("styles/global.css")" rel="stylesheet">

            <!-- JQuery -->
        @Html(webJarsUtil.script("3.2.1/jquery.min.js"))
        @Html(webJarsUtil.script("jquery.lazyload.js"))
        @Html(webJarsUtil.script("1.12.1/jquery-ui.min.js"))
        @Html(webJarsUtil.script("jquery.nice-select.js"))

            <!-- Mithril -->

        @Html(webJarsUtil.script("mithril.min.js"))

            <!-- Velocity -->
        @Html(webJarsUtil.script("velocity.min.js"))

            <!-- Highcharts -->
        @Html(webJarsUtil.script("6.0.4/highcharts.js"))

            <!-- Select2 -->
        @Html(webJarsUtil.css("select2.min.css"))
        @Html(webJarsUtil.script("select2.min.js"))

            <!-- NGL 3D Viewer -->
        @Html(webJarsUtil.script("ngl.js"))

            <!-- Typeahead.js -->

        @Html(webJarsUtil.script("bloodhound.min.js"))
        @Html(webJarsUtil.script("typeahead.jquery.js"))

            <!-- VISIBLE -->
        @Html(webJarsUtil.script("jquery.visible.min.js"))

            <!-- Loadingoverlay -->
        <script src="@routes.Assets.versioned("javascripts/vendor/loadingoverlay.js")" type="text/javascript"></script>

            <!-- Tooltipster -->
        @Html(webJarsUtil.css("tooltipster.bundle.min.css"))
        @Html(webJarsUtil.css("tooltipster-sideTip-borderless.min.css"))
        @Html(webJarsUtil.script("tooltipster.bundle.min.js"))

            <!-- MOMENT.JS -->
        @Html(webJarsUtil.script("moment.min.js"))

            <!-- FloatingScroll -->
        @Html(webJarsUtil.script("jquery.floatingscroll.min.js"))
        @Html(webJarsUtil.css("jquery.floatingscroll.css"))

            <!-- Codemirror -->
        @Html(webJarsUtil.script("codemirror.js"))
        @Html(webJarsUtil.css("codemirror.css"))
        @Html(webJarsUtil.script("javascript.js"))

            <!-- Datatables -->
        @Html(webJarsUtil.css("dataTables.foundation.min.css"))
        @Html(webJarsUtil.script("jquery.dataTables.min.js"))
        @Html(webJarsUtil.script("dataTables.foundation.min.js"))

            <!-- Javascript Router -->
        <script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>

    </head>
    <body onload="reloadJobList();">
        <input type="hidden" id="authView" value="@view">

        <div id="message-float">
            <div id="message-container" data-closable data-close class="callout" @if(message == "") {
                hidden="hidden"
            } style="text-align: center;
                position: relative;
                height: 50px;
                padding: 10px;
                margin: 0 auto;">
            @{
                message
            }
            </div>
        </div>

        <div id="main-container" class="off-canvas-wrapper" data-off-canvas-wrapper>
            <div class="off-canvas position-left" id="offCanvas" data-off-canvas>
                @elements.offcanvas(tools)
                <div id="off-canvas-joblist"></div>
            </div>

                <!-- Off Canvas Content includes main content -->
            <div class="off-canvas-content hide-for-large" id="hambutton">
                <button type="button" data-open="offCanvas"><i class="icon-reorder icon2x"></i></button>
            </div>

            <div id="main" class="row" data-off-canvas-content>
                <div class="small-12 padded-column columns">
                    <div class="row">
                        <div class="small-12 padded-column columns">
                                <!-- All purpose Modal -->
                            <div id="modal" class="reveal large" data-reveal>
                                <button class="close-button" data-close aria-label="Close modal" type="button">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>

                                <!-- Hamburger Navbar -->
                            <div id="signInOverlay" class="overlay hide-for-print">
                                <button id="hamburgerInside" class="hamburger hamburger--elastic is-active" type="button" onclick="closeNav()">
                                    <span class="hamburger-box">
                                        <span class="hamburger-inner overlayed"></span>
                                    </span>
                                </button>
                                <div class="overlay-content" id="overlay-content">
                                    <div class="mithril-overlay-content" id="mithril-overlay-content"></div>
                                </div>
                            </div>

                                <!-- Navigation Bar -->
                            <div class="row hide-for-print" id="metanav">
                                <div id="meta-user" class="float-right"></div>
                                <div id="social">
                                    <a href="https://www.facebook.com/mpitoolkit" target="_blank" rel="noopener"><i class="icon-facebook"></i></a>
                                    <a href="https://twitter.com/mpitoolkit" target="_blank" rel="noopener"><i class="icon-twitter"></i></a>
                                </div>

                                <div id="offline-alert" aria-hidden="true" onclick="window.location.reload()">
                                    <i class="icon-retweet"></i>
                                    <b>Reconnecting...</b>
                                </div>
                                <div class="maintenance-alert">
                                    <i class="fa fa-wrench" aria-hidden="true"></i>
                                    <b>Maintenance in a few seconds!</b>
                                </div>
                            </div>

                            <div class="row" id="navcontainer">
                                    <!--logo-->
                                <div class="columns large-2 show-for-large" id="logo">
                                    <a href="/#/">
                                        <img src="@routes.Assets.versioned("images/minlogo.svg")">
                                    </a>
                                </div>

                                    <!--navbar-->
                                <div class="columns show-for-medium hide-for-print end" id="navbar">
                                @elements.navbar(tools)
                                </div>
                            </div>
                        </div>
                    </div>

                        <!-- Mount points for Mithril Application -->
                    <div class="row" id="main-window">
                        <div class="large-2 padded-column columns show-for-large hide-for-print" id="sidebar">
                            <div id="sidebar-search"></div>
                            <div id="sidebar-joblist"></div>
                        </div>
                        <div id="main-content">
                            <noscript><div class="noscript">
                                This website relies on JavaScript to work properly.<br />
                                Please activate JavaScript in your browser to see everything we offer.
                            </div></noscript>
                        </div>
                    </div>
                </div>
                <footer>
                    <div class="row">
                        <div class="columns large-12">
                            <ul class="menu align-center hide-for-print text-small">
                                <li><a data-open="footerHelpModal">Help</a></li>
                                <li><a data-open="footerFAQModal">FAQ</a></li>
                                <li><a data-open="footerPrivacyModal">Privacy Policy</a></li>
                                <li><a data-open="footerImprintModal">Imprint</a></li>
                                <li><a data-open="footerContactModal">Contact Us</a></li>
                                <li><a data-open="footerCiteModal">Cite Us</a></li>
                                <li><a data-open="footerRecentUpdatesModal">Recent Updates</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <p class="column small-12 text-center text-small">
                            © 2008-@(ZonedDateTime.now.getYear), Dept. of Protein Evolution, Max Planck Institute for Developmental Biology, Tübingen
                        </p>
                    </div>

                    @if(environment.mode == play.api.Mode.Dev) {
                        <div class="row">
                            <div id="buildinfo" class="column small-6 small-centered text-center text-small">
                            @(new java.lang.StringBuilder()
                                    .append("Version: ")
                                    .append(BuildInfo.version)
                                    .append(" on Scala ")
                                    .append(BuildInfo.scalaVersion)
                                    .append(" with Sbt ")
                                    .append(BuildInfo.sbtVersion)
                                    .append(" and Play! ")
                                    .append(BuildInfo.playVersion)
                                    .toString)
                            </div>
                        </div>
                    }
                </footer>
            </div>
        </div>

            <!-- scroll-top arrow -->
        <div id="scrollTop"></div>

        <div class="small reveal help-modal" id="footerImprintModal" data-reveal>
            @helpmodals.imprintmodal()
            <button class="close-button" data-close aria-label="Close modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="small reveal help-modal" id="footerHelpModal" data-reveal>
            @helpmodals.helpmodal()
            <button class="close-button" data-close aria-label="Close modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="small reveal help-modal" id="footerFAQModal" data-reveal>
            @helpmodals.faqmodal()
            <button class="close-button" data-close aria-label="Close modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="small reveal help-modal" id="footerPrivacyModal" data-reveal>
            @helpmodals.privacypolicymodal()
            <button class="close-button" data-close aria-label="Close modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="small reveal help-modal" id="footerContactModal" data-reveal>
            @helpmodals.contactmodal()
            <button class="close-button" data-close aria-label="Close modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="small reveal help-modal" id="footerCiteModal" data-reveal>
            @helpmodals.citemodal()
            <button class="close-button" data-close aria-label="Close modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="small reveal help-modal" id="footerRecentUpdatesModal" data-reveal>
            @helpmodals.recentupdatesmodal()
            <button class="close-button" data-close aria-label="Close modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        @views.html.help.modal()

            <!-- Foundation 6 -->
        @Html(webJarsUtil.script("foundation.min.js"))


            <!-- Reformat Javascript Library -->
        <script src="@routes.Assets.versioned("javascripts/vendor/reformat/src/reformat.js")"></script>


            <!-- TypeScript && Mithril Assets -->

        <script src="@routes.Assets.versioned("javascripts/blast-visualization.js")"></script>
        <script src="@routes.Assets.versioned("javascripts/vendor/msa.min.js")" type="text/javascript"></script>
        @Html(webJarsUtil.script("biojs-io-newick.min.js"))
        <script src='@routes.Assets.versioned("javascripts/vendor/biojs-vis-tree.min.js")'></script>
        @Html(webJarsUtil.script("snapsvg", "dist/snap.svg-min.js"))
        <link rel="stylesheet" type="text/css" charset="utf-8" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
        <script src="@routes.Assets.versioned("javascripts/typescriptc.js")"></script>

            <!-- ScalaJS assets -->

        @scalajs.html.scripts("client", routes.Assets.versioned(_).toString, name => getClass.getResource(s"/public/$name") != null)
    </body>
</html>
