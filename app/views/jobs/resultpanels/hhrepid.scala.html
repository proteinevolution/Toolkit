@import de.proteinevolution.models.results.HHrepID
@import play.api.mvc.RequestHeader
@(jobID: String, filePath: String, resultName: String,  tool : de.proteinevolution.models.Tool)(implicit request: RequestHeader)
@views.html.forwardmodals.simpler(tool, resultName)
@views.html.forwardmodals.hhsuite(tool, tool.toolNameShort + "_hhrepid")

@if(HHrepID.existsResult(jobID, filePath)) {
    <div class="colorOptsAlignment">
        <a id="forwardButtonHHsuite" data-open="forwardModal_@{
            tool.toolNameShort
        }_hhrepid">Forward Query A3M</a>
        <hr id="line-element" colspan="4" class="horizontal-line">
    </div>

    <div class="hhrepidResult">
    @HHrepID.getResult(jobID, filePath)
    </div>
    <br/><br/>
    <br/><hr><br/>
    <div id="toolReferences">
        If you use @{tool.toolNameLong} on our Toolkit for your research, please cite:
        <div class="citation">
            <div>The MPI bioinformatics Toolkit as an integrative platform for advanced protein sequence and structure analysis.<br>
                Alva V, Nam SZ, Söding J, Lupas AN.<a href="https://academic.oup.com/nar/article-lookup/doi/10.1093/nar/gkw348" target="_blank" rel="noopener"> Nucleic Acids Res. 2016 Jul 8;44(W1):W410-5.</a>
            </div><br>

            <div>De novo identification of highly diverged protein repeats by probabilistic consistency.<br>
                Biegert A, Söding J.<a href="https://academic.oup.com/bioinformatics/article-lookup/doi/10.1093/bioinformatics/btn039" target="_blank" rel="noopener"> Bioinformatics. 2008 Mar 15;24(6):807-14.</a></div>
        </div>
        <hr id="line-element" colspan="4" class="horizontal-line">
    </div>
}else{
    <div class="callout alert noHitsWide" id="noHitsWide">No repeats found!</div>
}

<script>

        function @{tool.toolNameShort}_forwardQueryMSA(selectedTool) {
            $.LoadingOverlay("show");
            $.ajax({
                type: 'GET',
                url: 'files/@jobID/reduced.a3m'
            }).done(function (data_) {
                forward(selectedTool, data_.toString());
            });
        }

</script>
