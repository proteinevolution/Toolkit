@import models.results.Ancescon
@(treePath: String, iddiv: String)(implicit request: RequestHeader)


<select id="@{iddiv}_select" onchange="setLayout()">
    <option value="radial">Radial</option>
    <option value="vertical">Vertical</option>
</select> <br />
<div id="@iddiv"></div>


<script>
    var s = $("#@{iddiv}_select");
    s.niceSelect();
    function setLayout() {

        var v = s.val();
        if(v == "radial") {

            tree.layout(radial_layout);

        } else {
            tree.layout(vertical_layout);
        }
        tree.update();
    }

   var parser = require("biojs-io-newick");
   var treelib =  biojs.vis.tree;
   var tree = treelib.tree();

  // Define the Layout
  var width = $("#tool-tabs").width() - 200;
  var vertical_layout = treelib.tree.layout.vertical();
  var radial_layout = treelib.tree.layout.radial();
  vertical_layout.width(width);
  vertical_layout.scale(false);
  radial_layout.width(width);
  radial_layout.scale(false);

  tree.layout(radial_layout );
  tree.data(parser.parse_newick('@Ancescon.readTree(treePath)'));
  tree.on_click(function(node) {
      node.toggle();
      tree.update();
  });
  tree(document.getElementById("@iddiv"));

  function onFullscreenToggle() {

   var layout = tree.layout();
   layout.width($("#tool-tabs").width() - 200);
   tree.update();
  }
</script>
