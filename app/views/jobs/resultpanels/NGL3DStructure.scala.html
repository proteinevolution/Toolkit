@import play.api.mvc.RequestHeader

@(filepath : String, filename : String, jobID : String, resultname : String)(implicit request: RequestHeader)

<a type="button" onclick="@{resultname}_download()" id="downloadAlignment">Download PDB file</a>
<hr id="line-element" colspan="4" class="horizontal-line">

<div id="viewport"></div>

<script>
        var downloadFilename = "@{resultname}_@{jobID}";
        window["@{resultname}_download"] = function(){
            var downloadFilename = "@{resultname}_@{jobID}";
            var fileURL="/files/@{jobID}/@{filename}";
            $.ajax({
                method: "GET",
                url: fileURL
            }).done(function(data){
                download(downloadFilename, data);
            })
        };

        $(document).ready(function () {
            setViewport();
        });

        function setViewport() {

            if($('#tool-tabs').hasClass('fullscreen')) {
                $('#viewport').width(1500).height(900).find('canvas').first().remove();
            } else {
                $('#viewport').width(810).height(500).find('canvas').first().remove();
            }

            $("#viewport").ready(function(){
                setTimeout(function() {
                    stage = new NGL.Stage( "viewport" );
                    stage.loadFile('@filepath', {defaultRepresentation: true});
                    stage.set
                }, 100);
            });

        }

</script>
