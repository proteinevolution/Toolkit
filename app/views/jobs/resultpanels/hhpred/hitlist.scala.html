@import models.results.HHpred
@(jobID: String)(implicit request: RequestHeader)


@*  Load html Map used for the image representation *@
@HHpred.html(s"$jobID/results/$jobID.html_NOIMG")

<style>
.slider {
    width: 84%;
    cursor: default;
    background-color: rgb(238, 238, 238);
    display: block;
    margin: auto;
    position: absolute;
    margin-top: -250px !important;
    margin-left: 26px;
}

.slider-handle {
    width: 1.1rem;
    height: 1.1rem;
    background-color: grey;
    font-color: white;

}

.slider-handle:hover {
    background-color: red;
}

.slider-fill {
background-color: black;
}
</style>

<p><img src="/files/@{jobID}/@{jobID}.png" border="0" alt="hhpredhits" usemap="#hhpredmap"></p>



    <div class="slider" data-slider data-initial-start="25" data-initial-end="75">
        <span id="lefthandle" class="slider-handle" data-slider-handle role="slider" tabindex="1" aria-controls="sliderHandle1"></span>
        <span class="slider-fill" data-slider-fill></span>
        <span id="righthandle" class="slider-handle" data-slider-handle role="slider" tabindex="1" aria-controls="handle2"></span>
        <input id="hidden1" type="hidden">
        <input id="hidden2" type="hidden">
    </div>



<table style="width:100%">
    <tr>
        <th>Job: @jobID</th>
        <th>Result Overview</th>
    </tr>
    <tr>
        <td>Query</td>
        <td>@HHpred.header(jobID).Query</td>
    </tr>
    <tr>
        <td>Match_columns</td>
        <td>@HHpred.header(jobID).Match_columns</td>
    </tr>
    <tr>
        <td>No_of_Seqs</td>
        <td>@HHpred.header(jobID).No_of_Seqs</td>
    </tr>
    <tr>
        <td>Neff</td>
        <td>@HHpred.header(jobID).Neff</td>
    </tr>
    <tr>
        <td>Searched HMMs</td>
        <td>@HHpred.header(jobID).Searched_HMMs</td>
    </tr>
    <tr>
        <td>Date</td>
        <td>@HHpred.header(jobID).Date</td>
    </tr>
    <tr>
        <td>Command</td>
        <td>@HHpred.header(jobID).Command</td>
    </tr>
</table>


<table id="htb" class="display">

    <thead>
        <tr>
            <th>No</th>
            <th>Hits</th>
            <th>Probs</th>
            <th>Evals</th>
            <th>Pvals</th>
            <th>Scores</th>
            <th>SS</th>
            <th>Cols</th>
            <th>Query HMMs</th>
            <th>Template HMMs</th>
        </tr>
    </thead>
    <tbody>
        @for((x,i) <- HHpred.hitlist(jobID).Hits.zipWithIndex) {
            <tr>
                <td>@(i+1)</td>
                <td>@HHpred.hitlist(jobID).Hits(i)</td>
                <td>@HHpred.hitlist(jobID).Probs(i)</td>
                <td>@HHpred.hitlist(jobID).Evals(i)</td>
                <td>@HHpred.hitlist(jobID).Pvals(i)</td>
                <td>@HHpred.hitlist(jobID).Scores(i)</td>
                <td>@HHpred.hitlist(jobID).SS(i)</td>
                <td>@HHpred.hitlist(jobID).Cols(i)</td>
                <td>@HHpred.hitlist(jobID).Query_HMMs(i)</td>
                <td>@HHpred.hitlist(jobID).Template_HMMs(i)</td>
            </tr>
        }
    </tbody>
</table>


<table style="font-weight: bold">
    @for((x,i) <- HHpred.alignments(jobID).Headers.zipWithIndex) {
        <tr>
            <td>No @(i+1)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).Headers(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).QuerySeqs(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).QueryCon(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).QueryCon2(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).TemplateCon(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).TemplateSeqs(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).TemplateDSSP(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).TemplatePRED(i)</td>
        </tr>
        <tr>
            <td>@HHpred.alignments(jobID).Confidence(i)</td>
        </tr>
    }
</table>

<script>
         $('.slider').on('moved.zf.slider', function() {
             $('#lefthandle').html($('#hidden1').val());
             $('#lefthandle').css({
                 'color' : 'white',
                 'font-weight': 'bold',
                 'padding-left' : '2px'
             });
             $('#righthandle').html($('#hidden2').val());
             $('#righthandle').css({
                 'color' : 'white',
                 'font-weight': 'bold',
                 'padding-left' : '2px'
             });
         });

         var table;

         $(document).ready( function () {
             $(document).foundation();

             table = $('#htb').DataTable({
                 "bPaginate": false,
                 "bLengthChange": false,
                 "bFilter": true,
                 "bInfo": false,
                 "bAutoWidth": false,
                 retrieve: true,
                 paging: true
             });
         });

</script>