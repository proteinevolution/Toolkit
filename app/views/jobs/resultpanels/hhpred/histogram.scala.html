@import models.results.BlastVisualization
@(jobID: String)(implicit request: RequestHeader)
<link href="@routes.Assets.versioned("styles/hhpred_slider.css")" rel="stylesheet">

@*  Load html Map used for the image representation *@
@BlastVisualization.html(s"$jobID/results/$jobID.html_NOIMG")

<p><img src="/files/@{jobID}/@{jobID}.png" border="0" alt="hhpredhits" usemap="#hhpredmap"></p>


<div class="slider" id="slider-histo" data-slider data-initial-start="25" data-initial-end="75">
    <span id="lefthandle_his" class="slider-handle" data-slider-handle role="slider" tabindex="1"></span>
    <span class="slider-fill" id="slider-fill-histo" data-slider-fill></span>
    <span id="righthandle_his" class="slider-handle" data-slider-handle role="slider" tabindex="1"></span>
    <input id="hidden1_his" type="hidden">
    <input id="hidden2_his" type="hidden">
</div>


<table id="htb_his">
    <thead>
        <tr>
            <th>No</th>
            <th>Hits</th>
            <th>Probs</th>
            <th>Evals</th>
            <th>Pvals</th>
            <th>Scores</th>
            <th>SS</th>
            <th>Cols</th>
            <th>Query HMMs</th>
            <th>Template HMMs</th>
        </tr>
    </thead>
    <tbody>
    @for((x,i) <- BlastVisualization.hitlist(jobID).Hits.zipWithIndex) {
        <tr>
            <td>@(i+1)</td>
            <td>@BlastVisualization.hitlist(jobID).Hits(i)</td>
            <td>@BlastVisualization.hitlist(jobID).Probs(i)</td>
            <td>@BlastVisualization.hitlist(jobID).Evals(i)</td>
            <td>@BlastVisualization.hitlist(jobID).Pvals(i)</td>
            <td>@BlastVisualization.hitlist(jobID).Scores(i)</td>
            <td>@BlastVisualization.hitlist(jobID).SS(i)</td>
            <td>@BlastVisualization.hitlist(jobID).Cols(i)</td>
            <td>@BlastVisualization.hitlist(jobID).Query_HMMs(i)</td>
            <td>@BlastVisualization.hitlist(jobID).Template_HMMs(i)</td>
        </tr>
    }
    </tbody>
</table>

    <script>
            $('.slider').on('moved.zf.slider', function() {
                $('#lefthandle_his').html($('#hidden1_his').val());
                $('#lefthandle_his').css({
                    'color' : 'white',
                    'font-weight': 'bold',
                    'padding-left' : '2px'
                });
                $('#righthandle_his').html($('#hidden2_his').val());
                $('#righthandle_his').css({
                    'color' : 'white',
                    'font-weight': 'bold',
                    'padding-left' : '2px'
                });
            });

            //var pos = 5;
            //mySlider = new Foundation.Slider( $("#slider-histo"), {initialStart: pos});

            var table;

            $(document).ready( function () {
                $(document).foundation();

                table = $('#htb_his').DataTable({
                    "bPaginate": false,
                    "bLengthChange": false,
                    "bFilter": true,
                    "bInfo": false,
                    "bAutoWidth": false,
                    retrieve: true,
                    paging: true
                });
            });
    </script>